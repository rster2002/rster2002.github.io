var example = `Metapsionics
Metapsionics is the rarest and most esoteric of the psychic disciplines, with few psychics having the necessary
temperament or interest in developing these complex
abilities. A metapsion controls psychic energy itself,
molding and shaping the flows of energy that spill
through the brains of those marked by MES.
Taken in isolation, metapsionics allows a psychic
to increase the raw Effort available to them and become
more flexible in how this Effort is used. Expert metapsions can even teach other potential psychics how to
control and channel their new abilities, and the services
of a trained psychic mentor command considerable
sums in most systems.
Beyond this, in most stellar sectors a competent
metapsion is the only practical way to protect a target
from undetectable psychic assault. Without a vigilant
brainguard, a head of state, interstellar celebrity, or
planetary oligarch might find their minds rifled effortlessly by some undetected psychic intruder.
As a consequence, many metapsions become much
more physically competent and better-trained in combat than the average psychic. The high prices they can
command as brainguards attract some, though others
find their clients too aggravating to endure for long.
*- Core Technique- Psychic Refinement
The metapsion gains improved mastery over their own
powers and an innate sensitivity to the use of psionic
abilities in their presence.
Level-0: The adept can visually and audibly detect the
use of psychic powers. If both the source and target are visible to the metapsion, they can tell who’s
using the power, even if it’s normally imperceptible. They gain a +2 bonus on any saving throw
versus a psionic power.
Level-1: The metapsion’s maximum Effort increases by
an additional point.
Level-2: The adept can determine whether or not a
person is a psychic or has latent psionic abilities
through one round of visual inspection. Their saving throw bonus against psionic powers increases
to +3.
Level-3: The metapsion’s maximum Effort increases by
an additional point.
Level-4: The metapsion can perform a slightly safer
version of torching. Instead of rolling the torching damage die, they simply suffer 10 hit points of
damage after torching is used. The damage occurs
after the fueled power activates, allowing a psychic
at low hit points to trigger a power before falling
unconscious. This damage cannot be healed by
anything but natural bed rest, though a psychic
can be stabilized if this technique drops her to zero
hit points.
*- Techniques
Cloak Powers Level-1
The metapsion can conceal their own psychic abilities
from metapsionic senses. They must Commit Effort
for as long as they wish to cloak their powers. While
hidden, only a metapsion with equal or higher skill in
Metapsionics can detect their abilities with their level-0
or level-2 Psychic Refinement abilities. In such cases, an
opposed Wis/Metapsionics roll is made between the
metapsion and the investigator. If the investigator wins,
the cloak is pierced, while if the metapsion wins, the
investigator’s Psychic Refinement remains oblivious.
Mindtracing Level-1
The metapsion can trace back the use of psionic powers
they’ve noticed in their presence. By Committing Effort for the scene as an Instant action, they can see and
hear through the senses of a user of a psychic power,
gaining an intuitive awareness of their location and
treating them as a visible target for purposes of their
own abilities. Thus, if they see someone being affected
by a telepathy power with no visible source, they can
use this ability to briefly share the hidden telepath’s
senses. If used on a target that is teleporting, they can
perceive the teleporter’s view of their destination. Use
on a metamorphically-shaped impostor would reveal
the biopsion responsible for the change, and so forth.
These shared senses last for only one round and do not
interfere with the adept’s other actions.
Synthetic Adaptation Level-1
This is a particularly esoteric technique, one that requires the adept to have at least Program-0 or Fix-0
skill in order to master. With it, however, the metapsion has learned how to synergize with the quantum
intelligence of a VI or True AI in order to apply Telepathy or Biopsion powers to their inanimate corpus. Only
intelligent machines can be affected, as the technique
requires a sentient mind to catalyze the effect.
This synergy takes much of its force from the adept. Any System Strain the powers might inflict must
be paid by the adept rather than the target.
Neural Trap Level-2
The metapsion allows a hostile psychic into their mental sanctum in order to gain a later advantage. When
targeted by a hostile psionic power that allows a save,
the metapsion may Commit Effort as an Instant action
and voluntarily fail the saving throw, accepting the effect. The next psychic power the user targets at that
assailant then allows the victim no saving throw. This
technique lasts until the metapsion makes their psychic
attack or reclaims their Committed Effort. A hostile
psychic may be affected by only one Neural Trap from
a given psychic at a time.
Psychic Static Level-2
As an Instant action, the metapsion may Commit Effort for the day to negate a perceived psychic power.
The psychic responsible for the effect must Commit
Effort for the day as an Instant action to resist this negation, otherwise the power ends and any action used
to trigger it is wasted. The PC may then Commit Effort for the day again, with each spending and counter-spending until one runs out of Effort or chooses to
stop. Psychic Static can be applied only once per round
to any particular power. The target of the Psychic Static automatically knows the position of the interfering
metapsion, though other onlookers do not have any
obvious way of identifying the metapsion.
Suspended Manifestation Level-2
The metapsion is capable of “hanging” a psychic power
in their brain, forming the energy patterns and then
suspending them in a self-sustaining loop until it’s time
to trigger their release. The psychic must Commit Effort for the day to hang a power, along with the Effort
normally necessary to trigger it. None of this Effort can
be recovered until the power is expended, after which
it recovers at its usual speed. Activating the power is
an Instant action, or an On Turn action if it allows the
target a saving throw of some kind. Only one ability
can be held suspended at any one time.
Concert of Minds Level-3
As an On Turn action, the metapsion may Commit
Effort and form a psychic gestalt with one or more
willing psychics within three meters, including up to
one other psychic per Metapsion skill level. This gestalt persists as long as the Effort remains committed,
regardless of the subsequent distance between psychics.
On their own turn, any member of the gestalt may use
any power or technique known by any other member,
using the other member’s skill levels as necessary and
paying any Effort cost from their own pool. This gestalt
shares only psychic power, not thoughts or senses. At
the end of each round in which one or more members
have used some other member’s powers or abilities on
their turn of action, the metapsion must Commit Effort
for the scene or the gestalt drops and cannot be re-established for the rest of the scene.
Metadimensional Friction Level-3
As a Main Action, the metapsion Commits Effort for
the scene to create localized MES turbulence around a
visible target psychic within 200 meters. Each time the
target Commits Effort or an NPC initiates a psychic
power, they suffer 1d8 damage per Metapsionics skill
level of the adept. Each time the target suffers the damage they can attempt a Mental saving throw to throw
off the effect. It lasts no longer than the rest of the scene
at most. Only one application of this friction can affect
a target at once.
Psychic Tutelage Level-3
An expert metapsion can modulate and temper the
metadimensional energy that surges through an untrained psychic’s mind. This “safety buffer” allows the
novice to experiment with their abilities and gradually
develop the control they need to channel their powers
without causing permanent brain damage. Without
this technique, it is virtually impossible to turn a normal with untapped potential into a trained psychic.
An adept with Metapsionics-3 skill can train up to
ten pupils at once. One with Metapsionics-4 can train
up to one hundred. It requires only a week to train a
potential in ways to avoid accidentally triggering their
powers and suffering the damage that follows, but actually teaching them to use their powers effectively takes
anywhere from one to four years depending on their
natural aptitude and the availability of other psychics
willing to assist the metapsion in the training process.
Surge Momentum Level-3
The metapsion’s abilities can be reinforced with a degree of metadimensional energy that would cause substantial damage to a less adept mind. Particularly weak
or unprepared minds might be completely crushed by
the force of the adept’s augmented will.
The adept must Commit Effort for the day when
using a power that normally grants its target a saving
throw. The target then suffers a penalty equal to the
adept’s Metapsionics skill on any saving throw normally granted by the power. If the target’s hit die total or
character level is less than half the adept’s level, rounded up, they automatically fail their saving throw.
Flawless Mastery Level-4
When this technique is learned, the adept may choose
one technique from any discipline they know. That
technique no longer requires Effort to be Committed in
any way, though other techniques that augment it may
still exact a cost. Mastered Psychic Static, for example,
can expend an effectively unlimited amount of effort.
If the technique has a duration based on Committed
Effort then it lasts until the metapsion chooses to end it
or is killed. This technique may only be mastered once,
though the perfected technique may be changed with
a month of meditation and practice.
Impervious Pavis of Will Level-4
When this technique is learned, the metapsion must
choose a discipline. They then become entirely immune to unwanted powers from that discipline; they
and their abilities are simply not valid targets for purposes of that discipline’s powers unless the adept chooses to be affected. By Committing Effort for the day as
an Instant action, they can extend this immunity for a
scene to all allies within 50 meters. This technique may
be learned more than once, and any shared protection
applies to all disciplines negated by the adept.`

var text = `Teleportation
Teleporters do not provoke the kind of persistent
worry that telepaths induce in most normals, but their
particular gifts cause a more physical concern. An experienced teleporter can reach or see into any location
they’ve ever been; security officials don’t just need to
make sure that no teleporter is in a restricted area, but
that they’ve never been there before at any time. Access
into the most important areas is carefully filtered to
ensure that no outside teleporter ever gets a chance to
see a location they might suddenly appear in several
months or years later.
Most governments with access to trained psychics
will have at least a few expert teleporters on hand to
provide untraceable communications links and superlative infiltrators. Despite their many advantages in intrusion and evasion, however, a teleporter needs the
skills to actually get into a restricted area before they
can take advantage of a quick escape. It’s not unknown
for teleporters to be paired with more conventional
burglars who supply the security-defeating skills and
information-gathering talents that a professional psychic doesn’t always have the time to cultivate.
The criminal applications of teleportation are obvious, as is its utility in surveillance. Some bold teleporters make excellent money as thieves or spies for
whatever employer can afford their exorbitant fees.
The price for their services is invariably high, not only
due to the rarity of experienced teleporters, but due to
the consequences of arrest.
As tempting as the criminal path can be for many
teleporters, most are dissuaded by the penalties. Very
few worlds have prison facilities that are in any way designed to cope with teleporting inmates. On advanced
worlds, this means that criminal teleporters are often
implanted with surgical bombs keyed to explode if they
leave a restricted area or stop receiving a specific signal
from a government transmitter. On primitive worlds,
this means that criminal teleporters face summary execution for any crime more serious than a misdemeanor.
Some devices can be used to defeat teleporters,
creating a curdled patch of metadimensional space
that is impossible to enter or leave via teleportation.
These ancient pretech artifacts are invariably ridiculously expensive in the unlikely case that a planetary
government allows them to remain in private hands at
all, and only the most important figures of an advanced
world will have any access to teleporter-sealed “safe
zones”. Many worlds have no access to such devices at
all, with even princes and potentates left to keep a wary
eye on teleporting psychics. A metapsion brainguard is
the usual low-tech answer to psychic threats, if such an
expensive mercenary can be hired on the world.
*- Core Technique- Personal Apportation
The teleporter can translocate to another location they
have either occupied before or can see with their unaided vision. Locations are fixed in reference to the nearest
major gravity well. For example, it is not possible to
teleport to the cockpit of a distant moving vehicle they
once occupied, but they can teleport to another point
on a planet’s surface even though the planet has since
moved far through the stellar void.
The core technique allows the teleporter to move
himself and any mass he is able to carry with his own
natural strength. Resisting targets cannot be carried
along, and unresisting ones must be touched. A teleporter can leave any clothing, shackles, adhesions, or
other matter behind when he teleports, but he cannot
leave behind matter that has been inserted into his
body, such as cybernetics or shrapnel. Matter cannot
be partially left behind.
A teleporter will instinctively abort any apportation that would leave him embedded in a solid object
or in an environment of imminent physical harm. Any
Committed Effort on such aborted jumps is wasted, as
is any action spent triggering the power.
The maximum range of Personal Apportation depends on the teleporter’s skill level. Teleporting with
Personal Apportation counts as a Main Action and requires that the psychic Commit Effort for the scene.
Level-0: The psychic can teleport up to 10 meters.
Level-1: The psychic can teleport up to 100 meters.
Level-2: The psychic can teleport up to 10 kilometers.
Level-3: The psychic can teleport up to 1,000 kilometers.
Level-4: The psychic can teleport anywhere on a planet’s surface or near orbit.
*- Techniques
Proficient Apportation Level-1
Personal Apportation now counts as a Move action,
though it still can be performed only once per round.
Apportations of 10 meters or less no longer require
Effort to be Committed, though any augments to the
technique must still be paid for normally.
Spatial Awareness Level-1
The psychic may Commit Effort as an On Turn action to gain an intuitive 360-degree awareness of their
physical surroundings. The sense is roughly equivalent
to sight out to 100 meters, though it cannot read text
or distinguish colors. It is blocked by solid objects but
is unimpeded by darkness, mist, blinding light, holograms, or optical illusions. The sense lasts as long as the
Effort remains Committed to the technique.
Burdened Apportation Level-2
The psychic can carry willing companions with them
when using Personal Apportation. Up to three human-sized companions and their man-portable gear
may be carried per skill level in Teleportation. Allies
must be within 3 meters of the teleporter to be carried
along. Ordinary inert matter cannot be carried along
unless the psychic is touching it or it’s being carried by
an ally affected by this power. If carrying inert mass, up
to two hundred kilos of objects can be carried per skill
level. Using this technique increases the Effort cost of
Personal Apportation, requiring that an extra point of
Effort be Committed for the day.
Perceptive Dislocation Level-2
Commit Effort for the day to sense any location the
psychic could teleport to. The psychic perceives the
location as if there, lasting for fifteen minutes at most.
Spatial Synchrony Mandala Level-2
The psychic imprints a particular object or person on
their psionic awareness. Provided the object is relatively intact and in range of their Personal Apportation, the
psychic always knows its exact location and can teleport
to within three meters of it with Personal Apportation
even if it has moved from its original location. Imprinting an object requires an hour’s meditation with
it, and only one object can be imprinted at a time. If
imprinting on a person, the target must be willing and
cooperative to make the imprint. Objects must be at
least one kilogram in mass to be effectively tracked.
Effortless Apportation Level-3
The psychic does not need to Commit Effort to use
Personal Apportation. If the technique is augmented by
other techniques that come with their own extra or increased cost, however, this extra cost must still be paid.
Stutterjump Level-3
The psychic can instinctively micro-teleport away from
incoming danger. As an On Turn action they may
Commit Effort to begin shifting their spatial position
away from attacks, gaining a base Armor Class of 20
so long as the Effort remains Committed. This Armor
Class is not modified by armor, shields, or Dexterity
modifiers, and the micro-jumps do not significantly
move the psychic from their current location. While
Stutterjump is active, as an Instant action the adept may
Commit Effort for the day to negate a successful hit by
a weapon attack, even after damage has been rolled.
This reflexive defensive jump may be used only once
per day and leaves the psychic just outside the radius
of explosions or other area-effect attacks.
Rift Reduplication Level-3
Expert teleporters can be infuriatingly difficult to pin
down. By Committing an additional Effort for the day
as an Instant action, the adept can use Personal Apportation as an On Turn action, even if they’ve already used it
once this round. Apporting itself costs whatever Effort
it normally would, in addition to any techniques that
augment it. Rift Reduplication can only be triggered once
per round.
If the adept uses their powers to teleport into a
location, perform an action, and then use Rift Reduplication to teleport back out, onlookers in the area will
not have time to react to their action or attack the adept
unless the onlookers have held their action explicitly
to counter the psychic. Enemies who hold their action
this way waste it entirely if the psychic does not give
them a chance to attack or otherwise interfere. Such a
lightning strike may be surprising to onlookers, but it
doesn’t allow enough preparation time to count as an
Execution Attack as described on page 52.
Deep Intrusion Level-4
The adept can use Personal Apportation to blind-teleport
into a building, structure, vehicle, or spaceship visible
to them, including spaceships close enough to engage
in conventional ship-to-ship combat. They intuitively
seek out a space large enough to hold them and without
immediate environmental hazards, but cannot control
their precise destination. Using this technique in conjunction with Personal Apportation is very draining to
the psychic, and requires that they Commit an additional Effort point for the day.
Offensive Apportation Level-4
The psychic can use Personal Apportation as a Main Action to teleport an unwilling target, provided the user
can make physical contact with them. Contact with an
unsuspecting or incapacitated target is automatic, while
touching a resisting enemy requires a Punch hit roll
with a bonus equal to the psychic’s Teleportation skill.
If the psychic does not use the Burdened Apportation
technique then only the target is teleported; otherwise
the user may go along with them. The psychic cannot
teleport a target to any location they could not teleport to, including locations of imminent environmental danger, such as high in the air, into a windowless
tomb, or into the middle of a sea. A conscious, resisting target can make a Mental saving throw to forcibly
abort the teleportation, rolling at a penalty equal to
the psychic’s Teleportation skill. Use of this technique
adds to the cost of Personal Apportation, requiring the
psychic Commit an additional point of Effort for the
day whether the touch hits or not.`;

function replaceAll(c, a, b) {
	let temp = c.split(a);
	temp = temp.join(b);
	return temp;
}

var obj = {
	core: {
		level: {}
	},
	additional: [],
	techniques: []
};
var temp;

var lines = text.split("\n");
temp = lines.shift();
obj.title = temp;
obj.internalTitle = replaceAll(temp.toLowerCase(), " ", "_");

var sections = text.split("*- ");
console.log(sections);
sections.forEach((a, i) => {
	if (i === 0) {
		obj.description = a.split("\n").join(" ");
	} else {
		let l = a.split("\n");
		let name = l.shift();
		if (name.includes("Core Technique")) {
			let t = l.join(" ");
			t = t.split(": ");
			obj.core.description = t.shift();
			t.forEach((desc, lvl) => {
				obj.core.level["l" + lvl] = desc;
			});
		} else if (name === "Techniques") {
			let t = l.join(" ");
			let arr = t.split(" Level-");
			arr.forEach((tech, i) => {
				if (i !== 0) {
					var last = arr[i - 1];
					last = last.split(". ");
					var name = last[last.length - 1];
					console.log(name);
					let t = tech.split(" ");
					let lvl = Number(t.shift());
					t = t.join(" ");
					obj.techniques.push({
						title: name,
						internalName: replaceAll(name.toLowerCase(), " ", "_"),
						description: t,
						minLevel: lvl
					});
				}
			});
		} else {
			obj.additional.push({
				title: name,
				description: l.join(" ")
			});
		}
	}
});

console.log(obj);
console.log(JSON.stringify(obj));
