var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,l=(t,n,s)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s,c=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&l(e,n,t[n]);if(s)for(var n of s(t))r.call(t,n)&&l(e,n,t[n]);return e},i=(e,s)=>t(e,n(s));import{S as o,i as u,s as h,e as f,t as p,a as d,J as m,c as g,b as $,d as v,f as y,g as E,h as b,j as w,k as I,r as x,u as T,W as N,L as S,M as k,X as D,N as P,H as O,I as V,O as C,Y as B,C as j,G as H,_ as A,n as M,$ as R,a0 as U,a1 as L,a2 as _,z,a3 as q,a4 as X,a5 as F,v as W,a6 as G,a7 as Y,a8 as K,T as J,a9 as Q,E as Z,F as ee,aa as te,ab as ne,ac as se,ad as ae,Q as re,ae as le,af as ce,ag as ie,ah as oe,ai as ue,aj as he}from"./vendor.js";import{g as fe,E as pe,C as de,I as me,M as ge,S as $e,a as ve,b as ye,P as Ee,c as be,d as we,s as Ie}from"./SpellPopup.js";import{d as xe,t as Te,m as Ne,c as Se,g as ke,i as De,a as Pe,b as Oe,e as Ve,f as Ce,s as Be}from"./index.js";import{B as je,R as He,F as Ae,D as Me,S as Re}from"./DatasetGuard.js";import{L as Ue,D as Le,s as _e}from"./searchResultScores.js";import{G as ze,C as qe,A as Xe,T as Fe}from"./GenericTable.js";const We={id:"root",name:"DM Screen",items:[]};var Ge,Ye;(Ye=Ge||(Ge={})).HASH_REF="hashRef",Ye.NPC="npc",Ye.NOTE="note";const Ke={id:null,type:null,data:null,top:32,left:32,width:300,height:300,index:1,pinned:!1};const Je={version:1,name:"New Campaign",id:null,dataset:null,currentManager:"default",initiative:[],currentScreenId:"root",screens:[We],partyMembers:[],currentInitiativeIndex:0,initiativeRound:1,savedEncounters:[],encounters:[]},Qe={id:null,name:"New party member",level:1,pp:10,conditions:[]},Ze=[[25,50,75,100],[50,100,150,200],[75,150,225,400],[125,250,375,500],[250,500,750,1100],[300,600,900,1400],[250,750,1100,1700],[450,900,1400,2100],[550,1100,1600,2400],[600,1200,1900,2800],[800,1600,2400,3600],[1e3,2e3,3e3,4500],[1100,2200,3400,5100],[1250,2500,3800,5700],[1400,2800,4300,6400],[1600,3200,4800,7200],[2e3,3900,5900,8800],[2100,4200,6300,9500],[2400,4900,7300,10900],[2800,5700,8500,127e3]],et={1:300,2:600,3:1200,4:1700,5:3500,6:4e3,7:5e3,8:6e3,9:7500,10:9e3,11:10500,12:11500,13:13500,14:15e3,15:18e3,16:2e4,17:25e3,18:27e3,19:3e4,20:4e4};const tt={initiative:0,type:"manual",name:"New initiative entry",deathSaves:{fails:0,successes:0},currentHealth:0,maxHealth:0,data:null};function nt(){return xe(tt)}function st(e,t,n){const s=e.slice();return s[13]=t[n],s[15]=n,s}function at(e,t,n){const s=e.slice();return s[16]=t[n],s}function rt(e){let t,n=e[13].subsections,s=[];for(let a=0;a<n.length;a+=1)s[a]=lt(at(e,n,a));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=m()},l(e){for(let t=0;t<s.length;t+=1)s[t].l(e);t=m()},m(e,n){for(let t=0;t<s.length;t+=1)s[t].m(e,n);w(e,t,n)},p(e,a){if(80&a){let r;for(n=e[13].subsections,r=0;r<n.length;r+=1){const l=at(e,n,r);s[r]?s[r].p(l,a):(s[r]=lt(l),s[r].c(),s[r].m(t.parentNode,t))}for(;r<s.length;r+=1)s[r].d(1);s.length=n.length}},d(e){N(s,e),e&&y(t)}}}function lt(e){let t,n,s,a,r=e[16].name+"";function l(){return e[10](e[16])}return{c(){t=f("div"),n=p(r),this.h()},l(e){t=g(e,"DIV",{class:!0});var s=$(t);n=v(s,r),s.forEach(y),this.h()},h(){b(t,"class","subsection svelte-1ekbfpl")},m(e,r){w(e,t,r),I(t,n),s||(a=x(t,"click",l),s=!0)},p(t,s){e=t,16&s&&r!==(r=e[16].name+"")&&T(n,r)},d(e){e&&y(t),s=!1,a()}}}function ct(e){let t,n,s,a,r,l,c,i=e[13].name+"";function o(){return e[9](e[15])}let u=e[15]===e[0]&&rt(e);return{c(){t=f("div"),n=p(i),a=d(),u&&u.c(),r=m(),this.h()},l(e){t=g(e,"DIV",{class:!0});var s=$(t);n=v(s,i),s.forEach(y),a=E(e),u&&u.l(e),r=m(),this.h()},h(){b(t,"class",s="section "+(e[15]===e[0]&&"current")+" svelte-1ekbfpl")},m(e,s){w(e,t,s),I(t,n),w(e,a,s),u&&u.m(e,s),w(e,r,s),l||(c=x(t,"click",o),l=!0)},p(a,l){e=a,16&l&&i!==(i=e[13].name+"")&&T(n,i),1&l&&s!==(s="section "+(e[15]===e[0]&&"current")+" svelte-1ekbfpl")&&b(t,"class",s),e[15]===e[0]?u?u.p(e,l):(u=rt(e),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},d(e){e&&y(t),e&&y(a),u&&u.d(e),e&&y(r),l=!1,c()}}}function it(e){let t,n,s,a,r,l,c,i,o=e[4],u=[];for(let h=0;h<o.length;h+=1)u[h]=ct(st(e,o,h));return r=new pe({props:{entries:e[5].entries}}),{c(){t=f("section"),n=f("div");for(let e=0;e<u.length;e+=1)u[e].c();s=d(),a=f("div"),S(r.$$.fragment),this.h()},l(e){t=g(e,"SECTION",{class:!0});var l=$(t);n=g(l,"DIV",{class:!0,style:!0});var c=$(n);for(let t=0;t<u.length;t+=1)u[t].l(c);c.forEach(y),s=E(l),a=g(l,"DIV",{class:!0});var i=$(a);k(r.$$.fragment,i),i.forEach(y),l.forEach(y),this.h()},h(){b(n,"class","sectionOverview svelte-1ekbfpl"),D(n,"margin-top",e[3]+"px"),b(a,"class","entries svelte-1ekbfpl"),b(t,"class","svelte-1ekbfpl")},m(o,h){w(o,t,h),I(t,n);for(let e=0;e<u.length;e+=1)u[e].m(n,null);e[11](n),I(t,s),I(t,a),P(r,a,null),e[12](t),l=!0,c||(i=x(t,"scroll",e[7]),c=!0)},p(e,[t]){if(81&t){let s;for(o=e[4],s=0;s<o.length;s+=1){const a=st(e,o,s);u[s]?u[s].p(a,t):(u[s]=ct(a),u[s].c(),u[s].m(n,null))}for(;s<u.length;s+=1)u[s].d(1);u.length=o.length}(!l||8&t)&&D(n,"margin-top",e[3]+"px");const s={};32&t&&(s.entries=e[5].entries),r.$set(s)},i(e){l||(O(r.$$.fragment,e),l=!0)},o(e){V(r.$$.fragment,e),l=!1},d(n){n&&y(t),N(u,n),e[11](null),C(r),e[12](null),c=!1,i()}}}function ot(e,t,n){let s,a;var r,l,{adventure:c}=t,i=0,o=0;function u(e){let t=document.getElementById(e);t&&n(1,r.scrollTop=t.offsetTop,r)}return e.$$set=e=>{"adventure"in e&&n(8,c=e.adventure)},e.$$.update=()=>{256&e.$$.dirty&&n(4,s=function(e){return e.data,e.data.map((e=>{let t={name:e.name,subsections:[]};for(const n of e.entries)"object"==typeof n&&"entries"===n.type&&t.subsections.push({name:n.name,id:n.id});return t}))}(c)),257&e.$$.dirty&&n(5,a=c.data[i])},[i,r,l,o,s,a,u,function(){n(3,o=r.scrollTop)},c,e=>n(0,i=e),e=>u(e.id),function(e){B[e?"unshift":"push"]((()=>{n(2,l=e)}))},function(e){B[e?"unshift":"push"]((()=>{n(1,r=e)}))}]}class ut extends o{constructor(e){super(),u(this,e,ot,it,h,{adventure:8})}}class ht extends o{constructor(e){super(),u(this,e,null,null,h,{})}}function ft(e){let t,n,s;var a=e[1];function r(e){return{props:{data:e[0]}}}return a&&(t=new a(r(e))),{c(){t&&S(t.$$.fragment),n=m()},l(e){t&&k(t.$$.fragment,e),n=m()},m(e,a){t&&P(t,e,a),w(e,n,a),s=!0},p(e,[s]){const l={};if(1&s&&(l.data=e[0]),a!==(a=e[1])){if(t){j();const e=t;V(e.$$.fragment,1,0,(()=>{C(e,1)})),H()}a?(t=new a(r(e)),S(t.$$.fragment),O(t.$$.fragment,1),P(t,n.parentNode,n)):t=null}else a&&t.$set(l)},i(e){s||(t&&O(t.$$.fragment,e),s=!0)},o(e){t&&V(t.$$.fragment,e),s=!1},d(e){e&&y(n),t&&C(t,e)}}}function pt(e,t,n){let s,a;var{data:r}=t,{hash:l}=t;const c={background:je,class:de,item:me,monster:ge,race:He,spell:$e,adventure:ut,language:Ue};return e.$$set=e=>{"data"in e&&n(2,r=e.data),"hash"in e&&n(3,l=e.hash)},e.$$.update=()=>{var t,i;12&e.$$.dirty&&n(0,(t=l,s=r||Te[t])),1&e.$$.dirty&&n(1,(i=s.dataType,a=c[i]||ht))},[s,a,r,l]}class dt extends o{constructor(e){super(),u(this,e,pt,ft,h,{data:2,hash:3})}}function mt(e,t,n){const s=e.slice();return s[1]=t[n],s}function gt(e,t,n){const s=e.slice();return s[4]=t[n],s}function $t(e,t,n){const s=e.slice();return s[7]=t[n],s}function vt(e){let t,n,s;return{c(){t=f("img"),this.h()},l(e){t=g(e,"IMG",{src:!0,style:!0,alt:!0,class:!0}),this.h()},h(){t.src!==(n=e[7].src)&&b(t,"src",n),b(t,"style",s=e[7].transformStyle),b(t,"alt",""),b(t,"class","svelte-54hkii")},m(e,n){w(e,t,n)},p(e,a){1&a&&t.src!==(n=e[7].src)&&b(t,"src",n),1&a&&s!==(s=e[7].transformStyle)&&b(t,"style",s)},d(e){e&&y(t)}}}function yt(e){let t,n,s,a;return n=new ve({props:{line:e[4]}}),{c(){t=f("li"),S(n.$$.fragment),s=d()},l(e){t=g(e,"LI",{});var a=$(t);k(n.$$.fragment,a),s=E(a),a.forEach(y)},m(e,r){w(e,t,r),P(n,t,null),I(t,s),a=!0},p(e,t){const s={};1&t&&(s.line=e[4]),n.$set(s)},i(e){a||(O(n.$$.fragment,e),a=!0)},o(e){V(n.$$.fragment,e),a=!1},d(e){e&&y(t),C(n)}}}function Et(e){let t,n,s,a;return n=new ve({props:{line:e[1]}}),{c(){t=f("li"),S(n.$$.fragment),s=d()},l(e){t=g(e,"LI",{});var a=$(t);k(n.$$.fragment,a),s=E(a),a.forEach(y)},m(e,r){w(e,t,r),P(n,t,null),I(t,s),a=!0},p(e,t){const s={};1&t&&(s.line=e[1]),n.$set(s)},i(e){a||(O(n.$$.fragment,e),a=!0)},o(e){V(n.$$.fragment,e),a=!1},d(e){e&&y(t),C(n)}}}function bt(e){let t,n,s,a,r,l,c,i,o,u,h,m,x,S,k,D,P,C,B,A,M,R,U,L,_,z,q,X,F,W,G,Y,K,J,Q,Z,ee,te,ne,se,ae,re,le,ce,ie,oe,ue,he,fe,pe,de,me,ge,$e,ve=e[0].fullName+"",ye=e[0].sex+"",Ee=e[0].race+"",be=e[0].voice+"",we=e[0].voiceTrait+"",Ie=e[0].age+"",xe=e[0].stageOfLife+"",Te=e[0].profession+"",Ne=e[0].imageLayers,Se=[];for(let f=0;f<Ne.length;f+=1)Se[f]=vt($t(e,Ne,f));let ke=e[0].traits,De=[];for(let f=0;f<ke.length;f+=1)De[f]=yt(gt(e,ke,f));const Pe=e=>V(De[e],1,1,(()=>{De[e]=null}));let Oe=e[0].story,Ve=[];for(let f=0;f<Oe.length;f+=1)Ve[f]=Et(mt(e,Oe,f));const Ce=e=>V(Ve[e],1,1,(()=>{Ve[e]=null}));return{c(){t=f("section"),n=f("header"),s=f("div");for(let e=0;e<Se.length;e+=1)Se[e].c();a=d(),r=f("div"),l=f("h2"),c=p(ve),i=d(),o=f("h4"),u=p(ye),h=d(),m=p(Ee),x=d(),S=f("div"),k=f("p"),D=f("b"),P=p("Voice"),C=p(": "),B=p(be),A=d(),M=f("p"),R=f("b"),U=p("Trait"),L=p(": "),_=p(we),z=d(),q=f("p"),X=f("b"),F=p("Age"),W=p(": "),G=p(Ie),Y=p(" ("),K=p(xe),J=p(")"),Q=d(),Z=f("p"),ee=f("b"),te=p("Profession"),ne=p(": "),se=p(Te),ae=d(),re=f("div"),le=f("div"),ce=f("h6"),ie=p("Traits"),oe=d(),ue=f("ol");for(let e=0;e<De.length;e+=1)De[e].c();he=d(),fe=f("div"),pe=f("h6"),de=p("Story"),me=d(),ge=f("ol");for(let e=0;e<Ve.length;e+=1)Ve[e].c();this.h()},l(e){t=g(e,"SECTION",{});var f=$(t);n=g(f,"HEADER",{class:!0});var p=$(n);s=g(p,"DIV",{class:!0});var d=$(s);for(let t=0;t<Se.length;t+=1)Se[t].l(d);d.forEach(y),a=E(p),r=g(p,"DIV",{class:!0});var b=$(r);l=g(b,"H2",{class:!0});var w=$(l);c=v(w,ve),w.forEach(y),i=E(b),o=g(b,"H4",{class:!0});var I=$(o);u=v(I,ye),h=E(I),m=v(I,Ee),I.forEach(y),x=E(b),S=g(b,"DIV",{class:!0});var T=$(S);k=g(T,"P",{class:!0});var N=$(k);D=g(N,"B",{});var O=$(D);P=v(O,"Voice"),O.forEach(y),C=v(N,": "),B=v(N,be),N.forEach(y),A=E(T),M=g(T,"P",{class:!0});var V=$(M);R=g(V,"B",{});var j=$(R);U=v(j,"Trait"),j.forEach(y),L=v(V,": "),_=v(V,we),V.forEach(y),z=E(T),q=g(T,"P",{class:!0});var H=$(q);X=g(H,"B",{});var $e=$(X);F=v($e,"Age"),$e.forEach(y),W=v(H,": "),G=v(H,Ie),Y=v(H," ("),K=v(H,xe),J=v(H,")"),H.forEach(y),Q=E(T),Z=g(T,"P",{class:!0});var Ne=$(Z);ee=g(Ne,"B",{});var ke=$(ee);te=v(ke,"Profession"),ke.forEach(y),ne=v(Ne,": "),se=v(Ne,Te),Ne.forEach(y),T.forEach(y),b.forEach(y),p.forEach(y),ae=E(f),re=g(f,"DIV",{class:!0});var Pe=$(re);le=g(Pe,"DIV",{class:!0});var Oe=$(le);ce=g(Oe,"H6",{class:!0});var Ce=$(ce);ie=v(Ce,"Traits"),Ce.forEach(y),oe=E(Oe),ue=g(Oe,"OL",{});var Be=$(ue);for(let t=0;t<De.length;t+=1)De[t].l(Be);Be.forEach(y),Oe.forEach(y),he=E(Pe),fe=g(Pe,"DIV",{class:!0});var je=$(fe);pe=g(je,"H6",{class:!0});var He=$(pe);de=v(He,"Story"),He.forEach(y),me=E(je),ge=g(je,"OL",{});var Ae=$(ge);for(let t=0;t<Ve.length;t+=1)Ve[t].l(Ae);Ae.forEach(y),je.forEach(y),Pe.forEach(y),f.forEach(y),this.h()},h(){b(s,"class","imageWrapper svelte-54hkii"),b(l,"class","svelte-54hkii"),b(o,"class","svelte-54hkii"),b(k,"class","svelte-54hkii"),b(M,"class","svelte-54hkii"),b(q,"class","svelte-54hkii"),b(Z,"class","svelte-54hkii"),b(S,"class","details svelte-54hkii"),b(r,"class","generalWrapper svelte-54hkii"),b(n,"class","svelte-54hkii"),b(ce,"class","svelte-54hkii"),b(le,"class","svelte-54hkii"),b(pe,"class","svelte-54hkii"),b(fe,"class","svelte-54hkii"),b(re,"class","content svelte-54hkii")},m(e,f){w(e,t,f),I(t,n),I(n,s);for(let t=0;t<Se.length;t+=1)Se[t].m(s,null);I(n,a),I(n,r),I(r,l),I(l,c),I(r,i),I(r,o),I(o,u),I(o,h),I(o,m),I(r,x),I(r,S),I(S,k),I(k,D),I(D,P),I(k,C),I(k,B),I(S,A),I(S,M),I(M,R),I(R,U),I(M,L),I(M,_),I(S,z),I(S,q),I(q,X),I(X,F),I(q,W),I(q,G),I(q,Y),I(q,K),I(q,J),I(S,Q),I(S,Z),I(Z,ee),I(ee,te),I(Z,ne),I(Z,se),I(t,ae),I(t,re),I(re,le),I(le,ce),I(ce,ie),I(le,oe),I(le,ue);for(let t=0;t<De.length;t+=1)De[t].m(ue,null);I(re,he),I(re,fe),I(fe,pe),I(pe,de),I(fe,me),I(fe,ge);for(let t=0;t<Ve.length;t+=1)Ve[t].m(ge,null);$e=!0},p(e,[t]){if(1&t){let n;for(Ne=e[0].imageLayers,n=0;n<Ne.length;n+=1){const a=$t(e,Ne,n);Se[n]?Se[n].p(a,t):(Se[n]=vt(a),Se[n].c(),Se[n].m(s,null))}for(;n<Se.length;n+=1)Se[n].d(1);Se.length=Ne.length}if((!$e||1&t)&&ve!==(ve=e[0].fullName+"")&&T(c,ve),(!$e||1&t)&&ye!==(ye=e[0].sex+"")&&T(u,ye),(!$e||1&t)&&Ee!==(Ee=e[0].race+"")&&T(m,Ee),(!$e||1&t)&&be!==(be=e[0].voice+"")&&T(B,be),(!$e||1&t)&&we!==(we=e[0].voiceTrait+"")&&T(_,we),(!$e||1&t)&&Ie!==(Ie=e[0].age+"")&&T(G,Ie),(!$e||1&t)&&xe!==(xe=e[0].stageOfLife+"")&&T(K,xe),(!$e||1&t)&&Te!==(Te=e[0].profession+"")&&T(se,Te),1&t){let n;for(ke=e[0].traits,n=0;n<ke.length;n+=1){const s=gt(e,ke,n);De[n]?(De[n].p(s,t),O(De[n],1)):(De[n]=yt(s),De[n].c(),O(De[n],1),De[n].m(ue,null))}for(j(),n=ke.length;n<De.length;n+=1)Pe(n);H()}if(1&t){let n;for(Oe=e[0].story,n=0;n<Oe.length;n+=1){const s=mt(e,Oe,n);Ve[n]?(Ve[n].p(s,t),O(Ve[n],1)):(Ve[n]=Et(s),Ve[n].c(),O(Ve[n],1),Ve[n].m(ge,null))}for(j(),n=Oe.length;n<Ve.length;n+=1)Ce(n);H()}},i(e){if(!$e){for(let e=0;e<ke.length;e+=1)O(De[e]);for(let e=0;e<Oe.length;e+=1)O(Ve[e]);$e=!0}},o(e){De=De.filter(Boolean);for(let t=0;t<De.length;t+=1)V(De[t]);Ve=Ve.filter(Boolean);for(let t=0;t<Ve.length;t+=1)V(Ve[t]);$e=!1},d(e){e&&y(t),N(Se,e),N(De,e),N(Ve,e)}}}function wt(e,t,n){let{data:s}=t;return e.$$set=e=>{"data"in e&&n(0,s=e.data)},[s]}class It extends o{constructor(e){super(),u(this,e,wt,bt,h,{data:0})}}function xt(e){let t,n,s,a,r,l;return{c(){t=f("div"),n=f("input"),s=d(),a=f("textarea"),this.h()},l(e){t=g(e,"DIV",{class:!0});var r=$(t);n=g(r,"INPUT",{type:!0,class:!0}),s=E(r),a=g(r,"TEXTAREA",{placeholder:!0,class:!0}),$(a).forEach(y),r.forEach(y),this.h()},h(){b(n,"type","text"),b(n,"class","svelte-1nxkfg0"),b(a,"placeholder","Write a note"),b(a,"class","svelte-1nxkfg0"),b(t,"class","note svelte-1nxkfg0")},m(c,i){w(c,t,i),I(t,n),A(n,e[1].title),I(t,s),I(t,a),A(a,e[0].content),r||(l=[x(n,"input",e[4]),x(n,"blur",e[2]),x(a,"input",e[5]),x(a,"blur",e[2])],r=!0)},p(e,[t]){2&t&&n.value!==e[1].title&&A(n,e[1].title),1&t&&A(a,e[0].content)},i:M,o:M,d(e){e&&y(t),r=!1,R(l)}}}function Tt(e,t,n){let{data:s}=t;var{item:a=U("screenItem")}=t,{campaign:r=U("campaign")}=t;return e.$$set=e=>{"data"in e&&n(0,s=e.data),"item"in e&&n(1,a=e.item),"campaign"in e&&n(3,r=e.campaign)},[s,a,function(){r&&r.refresh()},r,function(){a.title=this.value,n(1,a)},function(){s.content=this.value,n(0,s)}]}class Nt extends o{constructor(e){super(),u(this,e,Tt,xt,h,{data:0,item:1,campaign:3})}}function St(e={}){return i(c({name:"New encounter",monsters:[]},e),{getMonsters(){return this.monsters.map((e=>Ne[e]))},getTotalXP(){return this.getMonsters().reduce(((e,t)=>e+t.getXPValue()),0)},getEncounterXP(){let e=this.getTotalXP(),t=1,n=this.monsters.length;return n>=2?t=1.5:n>=3?t=2:n>=7?t=2.5:n>=11?t=3:n>=15&&(t=4),e*t},getEncounterDifficulty(e){let t=this.getEncounterXP(),n="super easy";for(let[s,a]of Object.entries(e))t>=a&&(n=s);return n},addMonster(e){"object"==typeof e&&(e=e.hash),this.monsters.push(e)},removeMonster(e){"object"==typeof e&&(e=e.hash);let t=this.monsters.indexOf(e);-1!==t&&this.monsters.splice(t,1)}})}function kt(e){let t,n,s,a,r;function l(t){e[14](t)}t=new ze({props:{headers:e[4],items:e[0],clickable:e[1],tiny:e[2],limit:e[3]}}),t.$on("click",e[7]);let c={entry:e[5]};return void 0!==e[6]&&(c.open=e[6]),s=new ye({props:c}),B.push((()=>L(s,"open",l))),{c(){S(t.$$.fragment),n=d(),S(s.$$.fragment)},l(e){k(t.$$.fragment,e),n=E(e),k(s.$$.fragment,e)},m(e,a){P(t,e,a),w(e,n,a),P(s,e,a),r=!0},p(e,[n]){const r={};16&n&&(r.headers=e[4]),1&n&&(r.items=e[0]),2&n&&(r.clickable=e[1]),4&n&&(r.tiny=e[2]),8&n&&(r.limit=e[3]),t.$set(r);const l={};32&n&&(l.entry=e[5]),!a&&64&n&&(a=!0,l.open=e[6],_((()=>a=!1))),s.$set(l)},i(e){r||(O(t.$$.fragment,e),O(s.$$.fragment,e),r=!0)},o(e){V(t.$$.fragment,e),V(s.$$.fragment,e),r=!1},d(e){C(t,e),e&&y(n),C(s,e)}}}function Dt(e,t,n){const s=z();var a,{encounter:r=null}=t,{items:l}=t,{alignment:c=!1}=t,{cr:i=!1}=t,{environments:o=!1}=t,{popup:u=!1}=t,{hidePopupIndicator:h=!1}=t,{remove:f=!1}=t,{tiny:p=!1}=t,{limit:d=null}=t,m=!1,g=[];const $={unaligned:{color:"#ffffff",backgroundColor:"#814e4e"},"lawful evil":{color:"#ffffff",backgroundColor:"#850707"},"neutral evil":{color:"#ffffff",backgroundColor:"#c3510e"},"chaotic evil":{color:"#ffffff",backgroundColor:"#ff0000"},"lawful neutral":{color:"#ffffff",backgroundColor:"#17cdab"},"lawful good":{color:"#ffffff",backgroundColor:"#00cb35"},"chaotic good":{color:"#ffffff",backgroundColor:"#0e7c30"}};return e.$$set=e=>{"encounter"in e&&n(8,r=e.encounter),"items"in e&&n(0,l=e.items),"alignment"in e&&n(9,c=e.alignment),"cr"in e&&n(10,i=e.cr),"environments"in e&&n(11,o=e.environments),"popup"in e&&n(1,u=e.popup),"hidePopupIndicator"in e&&n(12,h=e.hidePopupIndicator),"remove"in e&&n(13,f=e.remove),"tiny"in e&&n(2,p=e.tiny),"limit"in e&&n(3,d=e.limit)},e.$$.update=()=>{16146&e.$$.dirty&&(n(4,g=[]),g.push({header:"Monster",type:qe.SUBTEXT,alignment:Xe.LEFT,sortable:!0,wide:!0,text:e=>e.name,subtext:e=>e.getDescription(),sort:(e,t)=>e.name<t.name?1:-1}),i&&g.push({header:"CR",type:qe.TEXT,sortable:!0,text:e=>e.getCRStringWithoutXP(),sort:(e,t)=>e.getCRValue()-t.getCRValue()}),c&&g.push({header:"Aligmnent",type:qe.TEXT,text:()=>"",textDecorations:e=>{let t="#ffffff",n="#7a7a7a",s=e.getAlignmentString();if(s in $){let e=$[s];t=e.color,n=e.backgroundColor}return[{color:t,backgroundColor:n,text:s}]}}),o&&g.push({header:"Environments",type:qe.TEXT,alignment:Xe.CENTER,maxWidth:150,text:e=>e.environment?e.environment.map(Se).join(", "):"—"}),r&&g.push({type:qe.BUTTON,text:()=>"Add to encounter",onClick:e=>{r.addMonster(e),n(8,r),n(4,g),n(10,i),n(9,c),n(11,o),n(1,u),n(12,h),n(13,f)}}),u&&!h&&g.push({type:qe.ICON_BUTTON,icon:()=>"arrow-expand-all"}),f&&g.push({type:qe.ICON_BUTTON,icon:()=>"close",onClick:e=>s("remove",e)}))},[l,u,p,d,g,a,m,function({detail:e}){u&&(n(5,a=e),n(6,m=!0))},r,c,i,o,h,f,function(e){n(6,m=e)}]}class Pt extends o{constructor(e){super(),u(this,e,Dt,kt,h,{encounter:8,items:0,alignment:9,cr:10,environments:11,popup:1,hidePopupIndicator:12,remove:13,tiny:2,limit:3})}}function Ot(e){let t;return{c(){t=p("Add to initiative")},l(e){t=v(e,"Add to initiative")},m(e,n){w(e,t,n)},d(e){e&&y(t)}}}function Vt(e){let t,n,s,a,r,l,c,i,o,u,h,m,x,N,D,B,j,H,A,M,R,U,L,_,z,q;return L=new Fe({props:{$$slots:{default:[Ot]},$$scope:{ctx:e}}}),L.$on("click",e[5]),z=new Pt({props:{items:e[2],popup:!0}}),{c(){t=f("div"),n=f("header"),s=f("h1"),a=p(e[1]),l=d(),c=f("div"),i=f("section"),o=f("h4"),u=p(e[3]),h=d(),m=f("h6"),x=p("XP Reward"),N=d(),D=f("section"),B=f("h4"),j=p(e[4]),H=d(),A=f("h6"),M=p("Adjusted XP"),R=d(),U=f("div"),S(L.$$.fragment),_=d(),S(z.$$.fragment),this.h()},l(r){t=g(r,"DIV",{class:!0});var f=$(t);n=g(f,"HEADER",{class:!0});var p=$(n);s=g(p,"H1",{class:!0});var d=$(s);a=v(d,e[1]),d.forEach(y),l=E(p),c=g(p,"DIV",{class:!0});var b=$(c);i=g(b,"SECTION",{});var w=$(i);o=g(w,"H4",{class:!0});var I=$(o);u=v(I,e[3]),I.forEach(y),h=E(w),m=g(w,"H6",{class:!0});var T=$(m);x=v(T,"XP Reward"),T.forEach(y),w.forEach(y),N=E(b),D=g(b,"SECTION",{});var S=$(D);B=g(S,"H4",{class:!0});var P=$(B);j=v(P,e[4]),P.forEach(y),H=E(S),A=g(S,"H6",{class:!0});var O=$(A);M=v(O,"Adjusted XP"),O.forEach(y),S.forEach(y),b.forEach(y),R=E(p),U=g(p,"DIV",{class:!0});var V=$(U);k(L.$$.fragment,V),V.forEach(y),p.forEach(y),_=E(f),k(z.$$.fragment,f),f.forEach(y),this.h()},h(){b(s,"class",r="difficulty "+e[1]+" svelte-gp5lg1"),b(o,"class","xp svelte-gp5lg1"),b(m,"class","svelte-gp5lg1"),b(B,"class","xp svelte-gp5lg1"),b(A,"class","svelte-gp5lg1"),b(c,"class","svelte-gp5lg1"),b(U,"class","svelte-gp5lg1"),b(n,"class","svelte-gp5lg1"),b(t,"class","encounter")},m(e,r){w(e,t,r),I(t,n),I(n,s),I(s,a),I(n,l),I(n,c),I(c,i),I(i,o),I(o,u),I(i,h),I(i,m),I(m,x),I(c,N),I(c,D),I(D,B),I(B,j),I(D,H),I(D,A),I(A,M),I(n,R),I(n,U),P(L,U,null),I(t,_),P(z,t,null),q=!0},p(e,[t]){(!q||2&t)&&T(a,e[1]),(!q||2&t&&r!==(r="difficulty "+e[1]+" svelte-gp5lg1"))&&b(s,"class",r),(!q||8&t)&&T(u,e[3]),(!q||16&t)&&T(j,e[4]);const n={};1024&t&&(n.$$scope={dirty:t,ctx:e}),L.$set(n);const l={};4&t&&(l.items=e[2]),z.$set(l)},i(e){q||(O(L.$$.fragment,e),O(z.$$.fragment,e),q=!0)},o(e){V(L.$$.fragment,e),V(z.$$.fragment,e),q=!1},d(e){e&&y(t),C(L),C(z)}}}function Ct(e,t,n){let s,a,r,l,c,i,o,u=M,h=()=>(u(),u=q(p,(e=>n(9,o=e))),p);e.$$.on_destroy.push((()=>u()));var{data:f}=t,{campaign:p=U("campaign")}=t;return h(),e.$$set=e=>{"data"in e&&n(6,f=e.data),"campaign"in e&&h(n(0,p=e.campaign))},e.$$.update=()=>{64&e.$$.dirty&&n(7,s=St(f)),512&e.$$.dirty&&n(8,a=o.party.getXPThreshHolds()),384&e.$$.dirty&&n(1,r=s.getEncounterDifficulty(a)),128&e.$$.dirty&&n(2,l=s.getMonsters()),128&e.$$.dirty&&n(3,c=s.getTotalXP()),128&e.$$.dirty&&n(4,i=s.getEncounterXP())},[p,r,l,c,i,function(){l.forEach((e=>o.initiative.addMonster(e)))},f,s,a,o]}class Bt extends o{constructor(e){super(),u(this,e,Ct,Vt,h,{data:6,campaign:0})}}function jt(e){let t,n,s;var a=e[1];function r(e){return{props:{data:e[2],item:e[0]}}}return a&&(t=new a(r(e))),{c(){t&&S(t.$$.fragment),n=m()},l(e){t&&k(t.$$.fragment,e),n=m()},m(e,a){t&&P(t,e,a),w(e,n,a),s=!0},p(e,[s]){const l={};if(4&s&&(l.data=e[2]),1&s&&(l.item=e[0]),a!==(a=e[1])){if(t){j();const e=t;V(e.$$.fragment,1,0,(()=>{C(e,1)})),H()}a?(t=new a(r(e)),S(t.$$.fragment),O(t.$$.fragment,1),P(t,n.parentNode,n)):t=null}else a&&t.$set(l)},i(e){s||(t&&O(t.$$.fragment,e),s=!0)},o(e){t&&V(t.$$.fragment,e),s=!1},d(e){e&&y(n),t&&C(t,e)}}}function Ht(e,t,n){let s,a;var{item:r}=t;const l={hashRef:dt,npc:It,note:Nt,encounter:Bt};return e.$$set=e=>{"item"in e&&n(0,r=e.item)},e.$$.update=()=>{var t;1&e.$$.dirty&&n(1,(t=r.type,s=l[t])),1&e.$$.dirty&&n(2,a=function(e,t){return e===Ge.HASH_REF?Te[t]:t}(r.type,r.data))},[r,s,a]}class At extends o{constructor(e){super(),u(this,e,Ht,jt,h,{item:0})}}function Mt(e){let t,n,s;t=new be({props:{text:e[1].fullName,background:"./img/header/tree.jpg"}});const a=e[2].default,r=X(a,e,e[4],null),l=r||function(e){let t,n;return t=new It({props:{data:e[1]}}),{c(){S(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,s){P(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.data=e[1]),t.$set(s)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}(e);return{c(){S(t.$$.fragment),n=d(),l&&l.c()},l(e){k(t.$$.fragment,e),n=E(e),l&&l.l(e)},m(e,a){P(t,e,a),w(e,n,a),l&&l.m(e,a),s=!0},p(e,n){const c={};2&n&&(c.text=e[1].fullName),t.$set(c),r?r.p&&(!s||16&n)&&F(r,a,e,e[4],n,null,null):l&&l.p&&2&n&&l.p(e,n)},i(e){s||(O(t.$$.fragment,e),O(l,e),s=!0)},o(e){V(t.$$.fragment,e),V(l,e),s=!1},d(e){C(t,e),e&&y(n),l&&l.d(e)}}}function Rt(e){let t,n,s;function a(t){e[3](t)}let r={$$slots:{default:[Mt]},$$scope:{ctx:e}};return void 0!==e[0]&&(r.open=e[0]),t=new Ee({props:r}),B.push((()=>L(t,"open",a))),{c(){S(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,n){P(t,e,n),s=!0},p(e,[s]){const a={};18&s&&(a.$$scope={dirty:s,ctx:e}),!n&&1&s&&(n=!0,a.open=e[0],_((()=>n=!1))),t.$set(a)},i(e){s||(O(t.$$.fragment,e),s=!0)},o(e){V(t.$$.fragment,e),s=!1},d(e){C(t,e)}}}function Ut(e,t,n){let{$$slots:s={},$$scope:a}=t;var{open:r=!1}=t,{entry:l}=t;return e.$$set=e=>{"open"in e&&n(0,r=e.open),"entry"in e&&n(1,l=e.entry),"$$scope"in e&&n(4,a=e.$$scope)},[r,l,s,function(e){n(0,r=e)},a]}class Lt extends o{constructor(e){super(),u(this,e,Ut,Rt,h,{open:0,entry:1})}}function _t(e){let t,n,s;t=new be({props:{text:e[1].title,background:"./img/header/planet.jpg"}});const a=e[2].default,r=X(a,e,e[4],null),l=r||function(e){let t,n;return t=new Nt({props:{data:e[1]}}),{c(){S(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,s){P(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.data=e[1]),t.$set(s)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}(e);return{c(){S(t.$$.fragment),n=d(),l&&l.c()},l(e){k(t.$$.fragment,e),n=E(e),l&&l.l(e)},m(e,a){P(t,e,a),w(e,n,a),l&&l.m(e,a),s=!0},p(e,n){const c={};2&n&&(c.text=e[1].title),t.$set(c),r?r.p&&(!s||16&n)&&F(r,a,e,e[4],n,null,null):l&&l.p&&2&n&&l.p(e,n)},i(e){s||(O(t.$$.fragment,e),O(l,e),s=!0)},o(e){V(t.$$.fragment,e),V(l,e),s=!1},d(e){C(t,e),e&&y(n),l&&l.d(e)}}}function zt(e){let t,n,s;function a(t){e[3](t)}let r={$$slots:{default:[_t]},$$scope:{ctx:e}};return void 0!==e[0]&&(r.open=e[0]),t=new Ee({props:r}),B.push((()=>L(t,"open",a))),{c(){S(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,n){P(t,e,n),s=!0},p(e,[s]){const a={};18&s&&(a.$$scope={dirty:s,ctx:e}),!n&&1&s&&(n=!0,a.open=e[0],_((()=>n=!1))),t.$set(a)},i(e){s||(O(t.$$.fragment,e),s=!0)},o(e){V(t.$$.fragment,e),s=!1},d(e){C(t,e)}}}function qt(e,t,n){let{$$slots:s={},$$scope:a}=t;var{open:r=!1}=t,{entry:l}=t;return e.$$set=e=>{"open"in e&&n(0,r=e.open),"entry"in e&&n(1,l=e.entry),"$$scope"in e&&n(4,a=e.$$scope)},[r,l,s,function(e){n(0,r=e)},a]}class Xt extends o{constructor(e){super(),u(this,e,qt,zt,h,{open:0,entry:1})}}function Ft(e){let t,n,s,a;function r(t){e[4](t)}var l=e[1];function c(e){let t={entry:e[2]};return void 0!==e[0]&&(t.open=e[0]),{props:t}}return l&&(t=new l(c(e)),B.push((()=>L(t,"open",r)))),{c(){t&&S(t.$$.fragment),s=m()},l(e){t&&k(t.$$.fragment,e),s=m()},m(e,n){t&&P(t,e,n),w(e,s,n),a=!0},p(e,[a]){const i={};if(4&a&&(i.entry=e[2]),!n&&1&a&&(n=!0,i.open=e[0],_((()=>n=!1))),l!==(l=e[1])){if(t){j();const e=t;V(e.$$.fragment,1,0,(()=>{C(e,1)})),H()}l?(t=new l(c(e)),B.push((()=>L(t,"open",r))),S(t.$$.fragment),O(t.$$.fragment,1),P(t,s.parentNode,s)):t=null}else l&&t.$set(i)},i(e){a||(t&&O(t.$$.fragment,e),a=!0)},o(e){t&&V(t.$$.fragment,e),a=!1},d(e){e&&y(s),t&&C(t,e)}}}function Wt(e,t,n){let s,a;var{entry:r}=t,{open:l=!1}=t;const c={hashRef:Le,npc:Lt,note:Xt};return e.$$set=e=>{"entry"in e&&n(3,r=e.entry),"open"in e&&n(0,l=e.open)},e.$$.update=()=>{var t;8&e.$$.dirty&&n(1,(t=r.type,s=c[t])),8&e.$$.dirty&&n(2,a=function(e,t){return"hashRef"===e?Te[t]:t}(r.type,r.data))},[l,s,a,r,function(e){n(0,l=e)}]}class Gt extends o{constructor(e){super(),u(this,e,Wt,Ft,h,{entry:3,open:0})}}function Yt(){return{start(){document.addEventListener("mousemove",this.onChange)},stop(){document.removeEventListener("mousemove",this.onChange)},onChange:e=>{}}}const Kt=e=>({open:64&e[0]}),Jt=e=>({open:e[6]});function Qt(e,t,n){const s=e.slice();return s[3]=t[n],s}function Zt(e){let t,n,s,a=e[3].name+"";return{c(){t=f("option"),n=p(a),this.h()},l(e){t=g(e,"OPTION",{value:!0});var s=$(t);n=v(s,a),s.forEach(y),this.h()},h(){t.__value=s=e[3].id,t.value=t.__value},m(e,s){w(e,t,s),I(t,n)},p(e,r){4096&r[0]&&a!==(a=e[3].name+"")&&T(n,a),4096&r[0]&&s!==(s=e[3].id)&&(t.__value=s,t.value=t.__value)},d(e){e&&y(t)}}}function en(e){let t,n,s,a,r,l,c,i,o,u,h,p,m,v,I,T,N;return{c(){t=f("div"),n=d(),s=f("div"),a=d(),r=f("div"),l=d(),c=f("div"),i=d(),o=f("div"),u=d(),h=f("div"),p=d(),m=f("div"),v=d(),I=f("div"),this.h()},l(e){t=g(e,"DIV",{class:!0}),$(t).forEach(y),n=E(e),s=g(e,"DIV",{class:!0}),$(s).forEach(y),a=E(e),r=g(e,"DIV",{class:!0}),$(r).forEach(y),l=E(e),c=g(e,"DIV",{class:!0}),$(c).forEach(y),i=E(e),o=g(e,"DIV",{class:!0}),$(o).forEach(y),u=E(e),h=g(e,"DIV",{class:!0}),$(h).forEach(y),p=E(e),m=g(e,"DIV",{class:!0}),$(m).forEach(y),v=E(e),I=g(e,"DIV",{class:!0}),$(I).forEach(y),this.h()},h(){b(t,"class","leftHold svelte-bz66p5"),b(s,"class","rightHold svelte-bz66p5"),b(r,"class","topHold svelte-bz66p5"),b(c,"class","bottomHold svelte-bz66p5"),b(o,"class","topLeftHold svelte-bz66p5"),b(h,"class","topRightHold svelte-bz66p5"),b(m,"class","bottomLeftHold svelte-bz66p5"),b(I,"class","bottomRightHold svelte-bz66p5")},m(f,d){w(f,t,d),w(f,n,d),w(f,s,d),w(f,a,d),w(f,r,d),w(f,l,d),w(f,c,d),w(f,i,d),w(f,o,d),w(f,u,d),w(f,h,d),w(f,p,d),w(f,m,d),w(f,v,d),w(f,I,d),T||(N=[x(t,"mousedown",e[27]),x(s,"mousedown",e[28]),x(r,"mousedown",e[29]),x(c,"mousedown",e[30]),x(o,"mousedown",e[19]),x(h,"mousedown",e[20]),x(m,"mousedown",e[21]),x(I,"mousedown",e[22])],T=!0)},p:M,d(e){e&&y(t),e&&y(n),e&&y(s),e&&y(a),e&&y(r),e&&y(l),e&&y(c),e&&y(i),e&&y(o),e&&y(u),e&&y(h),e&&y(p),e&&y(m),e&&y(v),e&&y(I),T=!1,R(N)}}}function tn(e){let t;const n=e[25].popup,s=X(n,e,e[33],Jt);return{c(){s&&s.c()},l(e){s&&s.l(e)},m(e,n){s&&s.m(e,n),t=!0},p(e,a){s&&s.p&&(!t||64&a[0]|4&a[1])&&F(s,n,e,e[33],a,Kt,Jt)},i(e){t||(O(s,e),t=!0)},o(e){V(s,e),t=!1},d(e){s&&s.d(e)}}}function nn(e){let t,n,s;function a(t){e[32](t)}let r={$$slots:{default:[sn]},$$scope:{ctx:e}};return void 0!==e[6]&&(r.open=e[6]),t=new Ee({props:r}),B.push((()=>L(t,"open",a))),{c(){S(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,n){P(t,e,n),s=!0},p(e,s){const a={};4&s[1]&&(a.$$scope={dirty:s,ctx:e}),!n&&64&s[0]&&(n=!0,a.open=e[6],_((()=>n=!1))),t.$set(a)},i(e){s||(O(t.$$.fragment,e),s=!0)},o(e){V(t.$$.fragment,e),s=!1},d(e){C(t,e)}}}function sn(e){let t;const n=e[25].default,s=X(n,e,e[33],null);return{c(){s&&s.c()},l(e){s&&s.l(e)},m(e,n){s&&s.m(e,n),t=!0},p(e,a){s&&s.p&&(!t||4&a[1])&&F(s,n,e,e[33],a,null,null)},i(e){t||(O(s,e),t=!0)},o(e){V(s,e),t=!1},d(e){s&&s.d(e)}}}function an(e){let t,n,s,a,r,l,c,i,o,u,h,m,S,k,D,P,C,B,A,M,U,L,_,z,q,Y;const K=e[25].default,J=X(K,e,e[33],null);let Q=e[12],Z=[];for(let f=0;f<Q.length;f+=1)Z[f]=Zt(Qt(e,Q,f));let ee=!e[0].pinned&&en(e);const te=[nn,tn],ne=[];function se(e,t){return void 0===e[23].popup?0:1}return U=se(e),L=ne[U]=te[U](e),{c(){t=f("section"),n=f("div"),J&&J.c(),s=d(),a=f("div"),r=f("button"),l=f("span"),c=d(),i=f("button"),o=f("span"),h=d(),m=f("button"),S=f("span"),k=d(),D=f("span"),P=p(e[1]),C=d(),B=f("select");for(let e=0;e<Z.length;e+=1)Z[e].c();A=d(),ee&&ee.c(),M=d(),L.c(),_=d(),this.h()},l(u){t=g(u,"SECTION",{class:!0,style:!0});var f=$(t);n=g(f,"DIV",{class:!0});var p=$(n);J&&J.l(p),p.forEach(y),s=E(f),a=g(f,"DIV",{class:!0});var d=$(a);r=g(d,"BUTTON",{class:!0});var b=$(r);l=g(b,"SPAN",{class:!0}),$(l).forEach(y),b.forEach(y),c=E(d),i=g(d,"BUTTON",{class:!0});var w=$(i);o=g(w,"SPAN",{class:!0}),$(o).forEach(y),w.forEach(y),h=E(d),m=g(d,"BUTTON",{class:!0});var I=$(m);S=g(I,"SPAN",{class:!0}),$(S).forEach(y),I.forEach(y),k=E(d),D=g(d,"SPAN",{class:!0});var x=$(D);P=v(x,e[1]),x.forEach(y),C=E(d),B=g(d,"SELECT",{class:!0});var T=$(B);for(let e=0;e<Z.length;e+=1)Z[e].l(T);T.forEach(y),d.forEach(y),A=E(f),ee&&ee.l(f),f.forEach(y),M=E(u),L.l(u),_=E(u),this.h()},h(){b(n,"class","display svelte-bz66p5"),b(l,"class","mdi mdi-arrow-expand-all"),b(r,"class","svelte-bz66p5"),b(o,"class",u="mdi mdi-"+(e[0].pinned?"pin-off":"pin-outline")),b(i,"class","svelte-bz66p5"),b(S,"class","mdi mdi-delete-outline"),b(m,"class","svelte-bz66p5"),b(D,"class","svelte-bz66p5"),b(B,"class","svelte-bz66p5"),void 0===e[5]&&W((()=>e[26].call(B))),b(a,"class","controlls svelte-bz66p5"),b(t,"class","item svelte-bz66p5"),b(t,"style",e[11])},m(u,f){w(u,t,f),I(t,n),J&&J.m(n,null),I(t,s),I(t,a),I(a,r),I(r,l),I(a,c),I(a,i),I(i,o),I(a,h),I(a,m),I(m,S),I(a,k),I(a,D),I(D,P),I(a,C),I(a,B);for(let e=0;e<Z.length;e+=1)Z[e].m(B,null);G(B,e[5]),I(t,A),ee&&ee.m(t,null),e[31](t),w(u,M,f),ne[U].m(u,f),w(u,_,f),z=!0,q||(Y=[x(n,"mousedown",e[17]),x(r,"click",e[15]),x(i,"click",e[14]),x(m,"click",e[16]),x(B,"change",e[26]),x(B,"change",e[13]),x(document.body,"mouseup",e[18])],q=!0)},p(e,n){if(J&&J.p&&(!z||4&n[1])&&F(J,K,e,e[33],n,null,null),(!z||1&n[0]&&u!==(u="mdi mdi-"+(e[0].pinned?"pin-off":"pin-outline")))&&b(o,"class",u),(!z||2&n[0])&&T(P,e[1]),4096&n[0]){let t;for(Q=e[12],t=0;t<Q.length;t+=1){const s=Qt(e,Q,t);Z[t]?Z[t].p(s,n):(Z[t]=Zt(s),Z[t].c(),Z[t].m(B,null))}for(;t<Z.length;t+=1)Z[t].d(1);Z.length=Q.length}4128&n[0]&&G(B,e[5]),e[0].pinned?ee&&(ee.d(1),ee=null):ee?ee.p(e,n):(ee=en(e),ee.c(),ee.m(t,null)),(!z||2048&n[0])&&b(t,"style",e[11]);let s=U;U=se(e),U===s?ne[U].p(e,n):(j(),V(ne[s],1,1,(()=>{ne[s]=null})),H(),L=ne[U],L?L.p(e,n):(L=ne[U]=te[U](e),L.c()),O(L,1),L.m(_.parentNode,_))},i(e){z||(O(J,e),O(L),z=!0)},o(e){V(J,e),V(L),z=!1},d(n){n&&y(t),J&&J.d(n),N(Z,n),ee&&ee.d(),e[31](null),n&&y(M),ne[U].d(n),n&&y(_),q=!1,R(Y)}}}function rn(e,t,n){let s,a,r,l,c=M,i=()=>(c(),c=q(g,(e=>n(24,l=e))),g);e.$$.on_destroy.push((()=>c()));let{$$slots:o={},$$scope:u}=t;const h=Y(o);var f,{label:p}=t,{item:d}=t,{screen:m=U("dmScreen")}=t,{campaign:g=U("campaign")}=t;i();var $=m.id,v=!1,y=Yt(),E=Yt(),b=Yt(),w=Yt(),I=Yt();I.onChange=e=>{if(!d.pinned){e.preventDefault();let{movementX:t,movementY:s}=e;n(0,d.left+=t,d),n(0,d.top+=s,d)}},y.onChange=e=>{e.preventDefault();let{movementX:t}=e;d.width+t<100?n(0,d.width=100,d):n(0,d.width+=t,d)},E.onChange=e=>{e.preventDefault();let{movementX:t}=e;d.width-t<100?n(0,d.width=100,d):(n(0,d.width-=t,d),n(0,d.left+=t,d))},b.onChange=e=>{e.preventDefault();let{movementY:t}=e;d.height-t<100?n(0,d.height=100,d):(n(0,d.height-=t,d),n(0,d.top+=t,d))},w.onChange=e=>{e.preventDefault();let{movementY:t}=e;d.height+t<100?n(0,d.height=100,d):n(0,d.height+=t,d)};return e.$$set=e=>{"label"in e&&n(1,p=e.label),"item"in e&&n(0,d=e.item),"screen"in e&&n(3,m=e.screen),"campaign"in e&&i(n(2,g=e.campaign)),"$$scope"in e&&n(33,u=e.$$scope)},e.$$.update=()=>{4&e.$$.dirty[0]&&(s=g.campaignStore),1&e.$$.dirty[0]&&n(11,a=function({top:e,left:t,height:n,width:s,index:a}){return`top: ${e}px; left: ${t}px; height: ${n}px; width: ${s}px; z-index: ${a};`}(d)),16777216&e.$$.dirty[0]&&n(12,r=l.screens.get())},[d,p,g,m,f,$,v,y,E,b,w,a,r,function(){g.screens.moveItemTo(d,$)},function(){g.screens.togglePin(d),n(0,d)},function(){n(6,v=!0)},function(){g.screens.removeItemFromScreen(m,d)},function(){g.screens.moveUp(d),I.start()},function(){y.stop(),E.stop(),b.stop(),w.stop(),I.stop(),s.refresh()},function(){b.start(),E.start()},function(){b.start(),y.start()},function(){w.start(),E.start()},function(){w.start(),y.start()},h,l,o,function(){$=K(this),n(5,$),n(12,r),n(24,l)},()=>E.start(),()=>y.start(),()=>b.start(),()=>w.start(),function(e){B[e?"unshift":"push"]((()=>{n(4,f=e)}))},function(e){n(6,v=e)},u]}class ln extends o{constructor(e){super(),u(this,e,rn,an,h,{label:1,item:0,screen:3,campaign:2},[-1,-1])}}function cn(e){let t,n;return t=new At({props:{item:e[1]}}),{c(){S(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,s){P(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.item=e[1]),t.$set(s)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function on(e){let t,n;return t=new Gt({props:{slot:"popup",entry:e[1],open:e[4]}}),{c(){S(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,s){P(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.entry=e[1]),16&n&&(s.open=e[4]),t.$set(s)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function un(e){let t,n;return t=new ln({props:{label:e[2],screen:e[0],item:e[1],$$slots:{popup:[on,({open:e})=>({4:e}),({open:e})=>e?16:0],default:[cn,({open:e})=>({4:e}),({open:e})=>e?16:0]},$$scope:{ctx:e}}}),{c(){S(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,s){P(t,e,s),n=!0},p(e,[n]){const s={};4&n&&(s.label=e[2]),1&n&&(s.screen=e[0]),2&n&&(s.item=e[1]),50&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function hn(e,t,n){let s;var{screen:a}=t,{item:r}=t;return e.$$set=e=>{"screen"in e&&n(0,a=e.screen),"item"in e&&n(1,r=e.item)},e.$$.update=()=>{2&e.$$.dirty&&n(2,s=function(e){if(e.type===Ge.HASH_REF)return Te[e.data].name;return e.title}(r)),2&e.$$.dirty&&J("screenItem",r)},[a,r,s]}class fn extends o{constructor(e){super(),u(this,e,hn,un,h,{screen:0,item:1})}}function pn(e,t,n){const s=e.slice();return s[11]=t[n],s}function dn(e,t,n){const s=e.slice();return s[14]=t[n],s}function mn(e){let t,n,s,a,r,l=e[14].name+"";function c(){return e[10](e[14])}return{c(){t=f("button"),n=p(l),this.h()},l(e){t=g(e,"BUTTON",{class:!0});var s=$(t);n=v(s,l),s.forEach(y),this.h()},h(){b(t,"class",s=Q(e[14].id===e[1].id&&"current")+" svelte-1gt4vqn")},m(e,s){w(e,t,s),I(t,n),a||(r=x(t,"click",c),a=!0)},p(a,r){e=a,8&r&&l!==(l=e[14].name+"")&&T(n,l),10&r&&s!==(s=Q(e[14].id===e[1].id&&"current")+" svelte-1gt4vqn")&&b(t,"class",s)},d(e){e&&y(t),a=!1,r()}}}function gn(e,t){let n,s,a;return s=new fn({props:{campaign:t[0],item:t[11],screen:t[1]}}),{key:e,first:null,c(){n=m(),S(s.$$.fragment),this.h()},l(e){n=m(),k(s.$$.fragment,e),this.h()},h(){this.first=n},m(e,t){w(e,n,t),P(s,e,t),a=!0},p(e,n){t=e;const a={};1&n&&(a.campaign=t[0]),2&n&&(a.item=t[11]),2&n&&(a.screen=t[1]),s.$set(a)},i(e){a||(O(s.$$.fragment,e),a=!0)},o(e){V(s.$$.fragment,e),a=!1},d(e){e&&y(n),C(s,e)}}}function $n(e){let t,n,s,a,r,l,c,i,o,u,h,p,m,v,T,S,k=[],D=new Map,P=e[3],C=[];for(let f=0;f<P.length;f+=1)C[f]=mn(dn(e,P,f));let B=e[1].items;const A=e=>e[11].id;for(let f=0;f<B.length;f+=1){let t=pn(e,B,f),n=A(t);D.set(n,k[f]=gn(n,t))}return{c(){t=f("section"),n=f("div");for(let e=0;e<C.length;e+=1)C[e].c();s=d(),a=f("button"),r=f("span"),l=d(),c=f("button"),i=f("span"),o=d(),u=f("button"),h=f("span"),p=d(),m=f("div");for(let e=0;e<k.length;e+=1)k[e].c();this.h()},l(e){t=g(e,"SECTION",{class:!0});var f=$(t);n=g(f,"DIV",{class:!0});var d=$(n);for(let t=0;t<C.length;t+=1)C[t].l(d);s=E(d),a=g(d,"BUTTON",{disabled:!0,class:!0});var v=$(a);r=g(v,"SPAN",{class:!0}),$(r).forEach(y),v.forEach(y),l=E(d),c=g(d,"BUTTON",{disabled:!0,class:!0});var b=$(c);i=g(b,"SPAN",{class:!0}),$(i).forEach(y),b.forEach(y),o=E(d),u=g(d,"BUTTON",{class:!0});var w=$(u);h=g(w,"SPAN",{class:!0}),$(h).forEach(y),w.forEach(y),d.forEach(y),p=E(f),m=g(f,"DIV",{class:!0});var I=$(m);for(let t=0;t<k.length;t+=1)k[t].l(I);I.forEach(y),f.forEach(y),this.h()},h(){b(r,"class","mdi mdi-pencil"),a.disabled=e[4],b(a,"class","svelte-1gt4vqn"),b(i,"class","mdi mdi-delete-outline"),c.disabled=e[4],b(c,"class","svelte-1gt4vqn"),b(h,"class","mdi mdi-plus"),b(u,"class","svelte-1gt4vqn"),b(n,"class","tabs svelte-1gt4vqn"),b(m,"class","grid svelte-1gt4vqn"),b(t,"class","dmScreen svelte-1gt4vqn")},m(f,d){w(f,t,d),I(t,n);for(let e=0;e<C.length;e+=1)C[e].m(n,null);I(n,s),I(n,a),I(a,r),I(n,l),I(n,c),I(c,i),I(n,o),I(n,u),I(u,h),I(t,p),I(t,m);for(let e=0;e<k.length;e+=1)k[e].m(m,null);v=!0,T||(S=[x(a,"click",e[8]),x(c,"click",e[7]),x(u,"click",e[6])],T=!0)},p(e,[t]){if(42&t){let a;for(P=e[3],a=0;a<P.length;a+=1){const r=dn(e,P,a);C[a]?C[a].p(r,t):(C[a]=mn(r),C[a].c(),C[a].m(n,s))}for(;a<C.length;a+=1)C[a].d(1);C.length=P.length}(!v||16&t)&&(a.disabled=e[4]),(!v||16&t)&&(c.disabled=e[4]),3&t&&(B=e[1].items,j(),k=Z(k,t,A,1,e,B,D,m,ee,gn,null,pn),H())},i(e){if(!v){for(let e=0;e<B.length;e+=1)O(k[e]);v=!0}},o(e){for(let t=0;t<k.length;t+=1)V(k[t]);v=!1},d(e){e&&y(t),N(C,e);for(let t=0;t<k.length;t+=1)k[t].d();T=!1,R(S)}}}function vn(e,t,n){let s,a,r,l,c,i=M;e.$$.on_destroy.push((()=>i()));var{campaign:o}=t;function u(e){o.screens.openScreen(e)}return e.$$set=e=>{"campaign"in e&&n(0,o=e.campaign)},e.$$.update=()=>{1&e.$$.dirty&&(n(2,s=o.campaignStore),i(),i=q(s,(e=>n(9,c=e)))),513&e.$$.dirty&&n(3,a=o.screens.get(c)),513&e.$$.dirty&&n(1,r=o.screens.getOpenScreen(c)),2&e.$$.dirty&&n(4,l="root"===r.id)},[o,r,s,a,l,u,function(){o.screens.newScreen()},function(){confirm("Are you sure you want to delete this tab?")&&o.screens.deleteScreen(r)},function(){var e=prompt("Type a name");e&&o.screens.renameCurrentScreen(e)},c,e=>u(e)]}function yn(e){let t,n,s,a,r,l,c,i;return{c(){t=f("div"),n=f("h4"),s=p(e[0]),a=f("span"),r=p("xp"),l=d(),c=f("h6"),i=p(e[1]),this.h()},l(o){t=g(o,"DIV",{class:!0});var u=$(t);n=g(u,"H4",{class:!0});var h=$(n);s=v(h,e[0]),a=g(h,"SPAN",{class:!0});var f=$(a);r=v(f,"xp"),f.forEach(y),h.forEach(y),l=E(u),c=g(u,"H6",{class:!0});var p=$(c);i=v(p,e[1]),p.forEach(y),u.forEach(y),this.h()},h(){b(a,"class","svelte-8oh2jc"),b(n,"class","svelte-8oh2jc"),b(c,"class","svelte-8oh2jc"),b(t,"class","svelte-8oh2jc")},m(e,o){w(e,t,o),I(t,n),I(n,s),I(n,a),I(a,r),I(t,l),I(t,c),I(c,i)},p(e,[t]){1&t&&T(s,e[0]),2&t&&T(i,e[1])},i:M,o:M,d(e){e&&y(t)}}}function En(e,t,n){var{xp:s}=t,{difficulty:a}=t;return e.$$set=e=>{"xp"in e&&n(0,s=e.xp),"difficulty"in e&&n(1,a=e.difficulty)},[s,a]}class bn extends o{constructor(e){super(),u(this,e,En,yn,h,{xp:0,difficulty:1})}}function wn(e,t,n){const s=e.slice();return s[9]=t[n],s}function In(e){let t,n;const s=[e[9]];let a={};for(let r=0;r<s.length;r+=1)a=se(a,s[r]);return t=new bn({props:a}),{c(){S(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,s){P(t,e,s),n=!0},p(e,n){const a=16&n?te(s,[ne(e[9])]):{};t.$set(a)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function xn(e){let t;return{c(){t=p("Save encounter")},l(e){t=v(e,"Save encounter")},m(e,n){w(e,t,n)},d(e){e&&y(t)}}}function Tn(e){let t,n,s,a,r,l,c,i,o,u,h,m,x,D,B,A,M,R,U,L,_,z=e[4],q=[];for(let f=0;f<z.length;f+=1)q[f]=In(wn(e,z,f));const X=e=>V(q[e],1,1,(()=>{q[e]=null}));return B=new Pt({props:{items:e[1],remove:!0,tiny:!0,popup:!0,hidePopupIndicator:!0}}),B.$on("remove",e[5]),L=new Fe({props:{$$slots:{default:[xn]},$$scope:{ctx:e}}}),L.$on("click",e[6]),{c(){t=f("div"),n=f("header"),s=f("div");for(let e=0;e<q.length;e+=1)q[e].c();a=d(),r=f("div"),l=f("h1"),c=f("span"),i=p(e[3]),u=d(),h=f("span"),m=p(e[2]),x=p("xp"),D=d(),S(B.$$.fragment),A=d(),M=f("footer"),R=f("input"),U=d(),S(L.$$.fragment),this.h()},l(o){t=g(o,"DIV",{class:!0});var f=$(t);n=g(f,"HEADER",{});var p=$(n);s=g(p,"DIV",{class:!0});var d=$(s);for(let e=0;e<q.length;e+=1)q[e].l(d);d.forEach(y),a=E(p),r=g(p,"DIV",{});var b=$(r);l=g(b,"H1",{class:!0});var w=$(l);c=g(w,"SPAN",{class:!0});var I=$(c);i=v(I,e[3]),I.forEach(y),u=E(w),h=g(w,"SPAN",{class:!0});var T=$(h);m=v(T,e[2]),x=v(T,"xp"),T.forEach(y),w.forEach(y),b.forEach(y),p.forEach(y),D=E(f),k(B.$$.fragment,f),A=E(f),M=g(f,"FOOTER",{class:!0});var N=$(M);R=g(N,"INPUT",{}),U=E(N),k(L.$$.fragment,N),N.forEach(y),f.forEach(y),this.h()},h(){b(s,"class","challengeLevels svelte-i7tvej"),b(c,"class",o="difficulty "+e[3]+" svelte-i7tvej"),b(h,"class","xp svelte-i7tvej"),b(l,"class","svelte-i7tvej"),b(M,"class","svelte-i7tvej"),b(t,"class","sections")},m(e,o){w(e,t,o),I(t,n),I(n,s);for(let t=0;t<q.length;t+=1)q[t].m(s,null);I(n,a),I(n,r),I(r,l),I(l,c),I(c,i),I(l,u),I(l,h),I(h,m),I(h,x),I(t,D),P(B,t,null),I(t,A),I(t,M),I(M,R),I(M,U),P(L,M,null),_=!0},p(e,[t]){if(16&t){let n;for(z=e[4],n=0;n<z.length;n+=1){const a=wn(e,z,n);q[n]?(q[n].p(a,t),O(q[n],1)):(q[n]=In(a),q[n].c(),O(q[n],1),q[n].m(s,null))}for(j(),n=z.length;n<q.length;n+=1)X(n);H()}(!_||8&t)&&T(i,e[3]),(!_||8&t&&o!==(o="difficulty "+e[3]+" svelte-i7tvej"))&&b(c,"class",o),(!_||4&t)&&T(m,e[2]);const n={};2&t&&(n.items=e[1]),B.$set(n);const a={};4096&t&&(a.$$scope={dirty:t,ctx:e}),L.$set(a)},i(e){if(!_){for(let e=0;e<z.length;e+=1)O(q[e]);O(B.$$.fragment,e),O(L.$$.fragment,e),_=!0}},o(e){q=q.filter(Boolean);for(let t=0;t<q.length;t+=1)V(q[t]);V(B.$$.fragment,e),V(L.$$.fragment,e),_=!1},d(e){e&&y(t),N(q,e),C(B),C(L)}}}function Nn(e,t,n){let s,a,r,l,c,i=M,o=()=>(i(),i=q(u,(e=>n(8,c=e))),u);e.$$.on_destroy.push((()=>i()));var{campaign:u=U("campaign")}=t;o();var{encounter:h}=t;return e.$$set=e=>{"campaign"in e&&o(n(0,u=e.campaign)),"encounter"in e&&n(7,h=e.encounter)},e.$$.update=()=>{128&e.$$.dirty&&n(1,s=h.getMonsters()),128&e.$$.dirty&&n(2,a=h.getEncounterXP()),384&e.$$.dirty&&n(3,r=h.getEncounterDifficulty(c.party.getXPThreshHolds())),256&e.$$.dirty&&n(4,l=Object.entries(c.party.getXPThreshHolds()).map((([e,t])=>({xp:t,difficulty:Se(e)}))))},[u,s,a,r,l,function({detail:e}){h.removeMonster(e),n(7,h)},function(){u.screens.addItemToCurrentScreen("New encounter","encounter",h)},h,c]}class Sn extends o{constructor(e){super(),u(this,e,Nn,Tn,h,{campaign:0,encounter:7})}}function kn(e,t,n){const s=e.slice();return s[3]=t[n],s}function Dn(e){let t,n,s,a=e[3].text+"";return{c(){t=f("option"),n=p(a),this.h()},l(e){t=g(e,"OPTION",{value:!0});var s=$(t);n=v(s,a),s.forEach(y),this.h()},h(){t.__value=s=e[3].value,t.value=t.__value},m(e,s){w(e,t,s),I(t,n)},p:M,d(e){e&&y(t)}}}function Pn(e){let t,n,s,a=e[1],r=[];for(let l=0;l<a.length;l+=1)r[l]=Dn(kn(e,a,l));return{c(){t=f("select");for(let e=0;e<r.length;e+=1)r[e].c();this.h()},l(e){t=g(e,"SELECT",{class:!0});var n=$(t);for(let t=0;t<r.length;t+=1)r[t].l(n);n.forEach(y),this.h()},h(){b(t,"class","svelte-17oxtdk"),void 0===e[0]&&W((()=>e[2].call(t)))},m(a,l){w(a,t,l);for(let e=0;e<r.length;e+=1)r[e].m(t,null);G(t,e[0]),n||(s=x(t,"change",e[2]),n=!0)},p(e,[n]){if(2&n){let s;for(a=e[1],s=0;s<a.length;s+=1){const l=kn(e,a,s);r[s]?r[s].p(l,n):(r[s]=Dn(l),r[s].c(),r[s].m(t,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=a.length}3&n&&G(t,e[0])},i:M,o:M,d(e){e&&y(t),N(r,e),n=!1,s()}}}function On(e){return 0===e?"0":1===e?"1/8":2===e?"1/4":3===e?"1/2":String(e-3)}function Vn(e,t,n){var s,{cr:a}=t,r=[];for(let l=0;l<=33;l++)r.push({value:(s=l,0===s?0:1===s?.125:2===s?.25:3===s?.5:s-3),text:On(l)});return e.$$set=e=>{"cr"in e&&n(0,a=e.cr)},[a,r,function(){a=K(this),n(0,a),n(1,r)}]}class Cn extends o{constructor(e){super(),u(this,e,Vn,Pn,h,{cr:0})}}function Bn(e){let t,n,s,a,r,l,c,i,o,u,h,m,x,T,N;function D(t){e[2](t)}let j={};function H(t){e[3](t)}void 0!==e[0]&&(j.cr=e[0]),l=new Cn({props:j}),B.push((()=>L(l,"cr",D)));let A={};return void 0!==e[1]&&(A.cr=e[1]),x=new Cn({props:A}),B.push((()=>L(x,"cr",H))),{c(){t=f("div"),n=f("div"),s=f("h6"),a=p("Min"),r=d(),S(l.$$.fragment),i=d(),o=f("div"),u=f("h6"),h=p("Max"),m=d(),S(x.$$.fragment),this.h()},l(e){t=g(e,"DIV",{class:!0});var c=$(t);n=g(c,"DIV",{class:!0});var f=$(n);s=g(f,"H6",{class:!0});var p=$(s);a=v(p,"Min"),p.forEach(y),r=E(f),k(l.$$.fragment,f),f.forEach(y),i=E(c),o=g(c,"DIV",{class:!0});var d=$(o);u=g(d,"H6",{class:!0});var b=$(u);h=v(b,"Max"),b.forEach(y),m=E(d),k(x.$$.fragment,d),d.forEach(y),c.forEach(y),this.h()},h(){b(s,"class","svelte-1l2sto3"),b(n,"class","svelte-1l2sto3"),b(u,"class","svelte-1l2sto3"),b(o,"class","svelte-1l2sto3"),b(t,"class","crRangeSelect svelte-1l2sto3")},m(e,c){w(e,t,c),I(t,n),I(n,s),I(s,a),I(n,r),P(l,n,null),I(t,i),I(t,o),I(o,u),I(u,h),I(o,m),P(x,o,null),N=!0},p(e,[t]){const n={};!c&&1&t&&(c=!0,n.cr=e[0],_((()=>c=!1))),l.$set(n);const s={};!T&&2&t&&(T=!0,s.cr=e[1],_((()=>T=!1))),x.$set(s)},i(e){N||(O(l.$$.fragment,e),O(x.$$.fragment,e),N=!0)},o(e){V(l.$$.fragment,e),V(x.$$.fragment,e),N=!1},d(e){e&&y(t),C(l),C(x)}}}function jn(e,t,n){var{min:s=0}=t,{max:a=30}=t;return e.$$set=e=>{"min"in e&&n(0,s=e.min),"max"in e&&n(1,a=e.max)},[s,a,function(e){n(0,s=e)},function(e){n(1,a=e)}]}class Hn extends o{constructor(e){super(),u(this,e,jn,Bn,h,{min:0,max:1})}}function An(e){let t,n,s,a,r,l,c,i,o,u,h,m,T,N,D,j,H,M,R,U,z;function q(t){e[6](t)}function X(t){e[7](t)}let F={};function W(t){e[8](t)}void 0!==e[1]&&(F.min=e[1]),void 0!==e[2]&&(F.max=e[2]),u=new Hn({props:F}),B.push((()=>L(u,"min",q))),B.push((()=>L(u,"max",X)));let G={possibleValues:ke()};return void 0!==e[3]&&(G.selectedValues=e[3]),H=new Ae({props:G}),B.push((()=>L(H,"selectedValues",W))),{c(){t=f("div"),n=f("h3"),s=p("Search"),a=d(),r=f("input"),l=d(),c=f("h3"),i=p("Challenge rating"),o=d(),S(u.$$.fragment),T=d(),N=f("h3"),D=p("Environment"),j=d(),S(H.$$.fragment),this.h()},l(e){t=g(e,"DIV",{});var h=$(t);n=g(h,"H3",{class:!0});var f=$(n);s=v(f,"Search"),f.forEach(y),a=E(h),r=g(h,"INPUT",{class:!0}),l=E(h),c=g(h,"H3",{class:!0});var p=$(c);i=v(p,"Challenge rating"),p.forEach(y),o=E(h),k(u.$$.fragment,h),T=E(h),N=g(h,"H3",{class:!0});var d=$(N);D=v(d,"Environment"),d.forEach(y),j=E(h),k(H.$$.fragment,h),h.forEach(y),this.h()},h(){b(n,"class","svelte-1kicwjl"),b(r,"class","svelte-1kicwjl"),b(c,"class","svelte-1kicwjl"),b(N,"class","svelte-1kicwjl")},m(h,f){w(h,t,f),I(t,n),I(n,s),I(t,a),I(t,r),A(r,e[0]),I(t,l),I(t,c),I(c,i),I(t,o),P(u,t,null),I(t,T),I(t,N),I(N,D),I(t,j),P(H,t,null),R=!0,U||(z=x(r,"input",e[5]),U=!0)},p(e,[t]){1&t&&r.value!==e[0]&&A(r,e[0]);const n={};!h&&2&t&&(h=!0,n.min=e[1],_((()=>h=!1))),!m&&4&t&&(m=!0,n.max=e[2],_((()=>m=!1))),u.$set(n);const s={};!M&&8&t&&(M=!0,s.selectedValues=e[3],_((()=>M=!1))),H.$set(s)},i(e){R||(O(u.$$.fragment,e),O(H.$$.fragment,e),R=!0)},o(e){V(u.$$.fragment,e),V(H.$$.fragment,e),R=!1},d(e){e&&y(t),C(u),C(H),U=!1,z()}}}function Mn(e,t,n){var{filtering:s={query:a,cr:{min:0,max:30},environments:[]}}=t,a="",r=0,l=30,c=[];return e.$$set=e=>{"filtering"in e&&n(4,s=e.filtering)},e.$$.update=()=>{15&e.$$.dirty&&(n(4,s.query=a,s),n(4,s.cr.min=r,s),n(4,s.cr.max=l,s),n(4,s.environments=c,s))},[a,r,l,c,s,function(){a=this.value,n(0,a)},function(e){n(1,r=e)},function(e){n(2,l=e)},function(e){n(3,c=e)}]}class Rn extends o{constructor(e){super(),u(this,e,Mn,An,h,{filtering:4})}}function Un(e){let t,n,s,a,r,l,c,i,o,u,h,p;function m(t){e[4](t)}let v={};function x(t){e[5](t)}void 0!==e[0]&&(v.filtering=e[0]),s=new Rn({props:v}),B.push((()=>L(s,"filtering",m)));let T={items:e[2],limit:100,cr:!0,environments:!0,popup:!0,alignment:!0};return void 0!==e[1]&&(T.encounter=e[1]),c=new Pt({props:T}),B.push((()=>L(c,"encounter",x))),h=new Sn({props:{encounter:e[1]}}),{c(){t=f("section"),n=f("div"),S(s.$$.fragment),r=d(),l=f("div"),S(c.$$.fragment),o=d(),u=f("div"),S(h.$$.fragment),this.h()},l(e){t=g(e,"SECTION",{class:!0});var a=$(t);n=g(a,"DIV",{class:!0});var i=$(n);k(s.$$.fragment,i),i.forEach(y),r=E(a),l=g(a,"DIV",{class:!0});var f=$(l);k(c.$$.fragment,f),f.forEach(y),o=E(a),u=g(a,"DIV",{class:!0});var p=$(u);k(h.$$.fragment,p),p.forEach(y),a.forEach(y),this.h()},h(){b(n,"class","filters svelte-1g5uj0e"),b(l,"class","monsters svelte-1g5uj0e"),b(u,"class","currentEncounter svelte-1g5uj0e"),b(t,"class","encounterBuilder svelte-1g5uj0e")},m(e,a){w(e,t,a),I(t,n),P(s,n,null),I(t,r),I(t,l),P(c,l,null),I(t,o),I(t,u),P(h,u,null),p=!0},p(e,[t]){const n={};!a&&1&t&&(a=!0,n.filtering=e[0],_((()=>a=!1))),s.$set(n);const r={};4&t&&(r.items=e[2]),!i&&2&t&&(i=!0,r.encounter=e[1],_((()=>i=!1))),c.$set(r);const l={};2&t&&(l.encounter=e[1]),h.$set(l)},i(e){p||(O(s.$$.fragment,e),O(c.$$.fragment,e),O(h.$$.fragment,e),p=!0)},o(e){V(s.$$.fragment,e),V(c.$$.fragment,e),V(h.$$.fragment,e),p=!1},d(e){e&&y(t),C(s),C(c),C(h)}}}function Ln(e,t,n){let s;var{campaign:a=U("campaign")}=t,r=St(),l=Object.values(Ne),c={query:"",cr:{min:0,max:30},environments:[]};return e.$$set=e=>{"campaign"in e&&n(3,a=e.campaign)},e.$$.update=()=>{1&e.$$.dirty&&n(2,s=l.filter((e=>{let t=e.name.toLowerCase().includes(c.query.toLowerCase()),n=e.getCRValue()>=c.cr.min&&e.getCRValue()<=c.cr.max,s=0===c.environments.length||c.environments.some((t=>{var n;return null===(n=e.environment)||void 0===n?void 0:n.includes(t.toLowerCase())}));return t&&n&&s})))},[c,r,s,a,function(e){n(0,c=e)},function(e){n(1,r=e)}]}function _n(e){let t,n;return{c(){t=f("img"),this.h()},l(e){t=g(e,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){t.src!==(n="./books/"+e[1].code+"/"+e[0]+".png")&&b(t,"src",n),b(t,"alt",""),b(t,"class","svelte-1l52rgg")},m(e,n){w(e,t,n)},p(e,s){3&s&&t.src!==(n="./books/"+e[1].code+"/"+e[0]+".png")&&b(t,"src",n)},d(e){e&&y(t)}}}function zn(e){let t,n,s,a,r;return{c(){t=f("div"),n=f("img"),this.h()},l(e){t=g(e,"DIV",{class:!0});var s=$(t);n=g(s,"IMG",{src:!0,alt:!0,style:!0,class:!0}),s.forEach(y),this.h()},h(){n.src!==(s="./books/"+e[1].code+"/"+e[0]+".png")&&b(n,"src",s),b(n,"alt",""),b(n,"style",e[6]),b(n,"class","svelte-1l52rgg"),b(t,"class","pagePopup svelte-1l52rgg")},m(s,l){w(s,t,l),I(t,n),a||(r=x(t,"click",ae(e[9])),a=!0)},p(e,t){3&t&&n.src!==(s="./books/"+e[1].code+"/"+e[0]+".png")&&b(n,"src",s),64&t&&b(n,"style",e[6])},d(e){e&&y(t),a=!1,r()}}}function qn(e){let t,n,s,a,r,l,c,i,o,u,h,m,N=e[5]&&_n(e),S=e[4]&&zn(e);return{c(){t=f("div"),n=f("div"),s=f("span"),a=p(e[3]),r=d(),N&&N.c(),l=d(),c=f("span"),i=p(e[3]),o=d(),S&&S.c(),u=d(),this.h()},l(h){t=g(h,"DIV",{id:!0,class:!0});var f=$(t);n=g(f,"DIV",{class:!0});var p=$(n);s=g(p,"SPAN",{class:!0});var d=$(s);a=v(d,e[3]),d.forEach(y),r=E(p),N&&N.l(p),p.forEach(y),l=E(f),c=g(f,"SPAN",{class:!0});var m=$(c);i=v(m,e[3]),m.forEach(y),o=E(f),S&&S.l(f),f.forEach(y),u=E(h),this.h()},h(){b(s,"class","svelte-1l52rgg"),b(n,"class","shell svelte-1l52rgg"),b(c,"class","svelte-1l52rgg"),b(t,"id",e[7]),b(t,"class","page svelte-1l52rgg")},m(f,p){w(f,t,p),I(t,n),I(n,s),I(s,a),I(n,r),N&&N.m(n,null),I(t,l),I(t,c),I(c,i),I(t,o),S&&S.m(t,null),e[18](t),w(f,u,p),h||(m=[x(n,"click",e[8]),x(document.body,"wheel",e[10]),x(document.body,"mousedown",e[11]),x(document.body,"mouseup",e[12]),x(document.body,"mousemove",e[13])],h=!0)},p(e,[s]){8&s&&T(a,e[3]),e[5]?N?N.p(e,s):(N=_n(e),N.c(),N.m(n,null)):N&&(N.d(1),N=null),8&s&&T(i,e[3]),e[4]?S?S.p(e,s):(S=zn(e),S.c(),S.m(t,null)):S&&(S.d(1),S=null),128&s&&b(t,"id",e[7])},i:M,o:M,d(n){n&&y(t),N&&N.d(),S&&S.d(),e[18](null),n&&y(u),h=!1,R(m)}}}function Xn(e,t,n){let s,a,r,l,c;var i,{page:o}=t,{metaData:u}=t,{scrollPosition:h}=t,f=!1,p=.5,d=!1,m=0,g=0;return e.$$set=e=>{"page"in e&&n(0,o=e.page),"metaData"in e&&n(1,u=e.metaData),"scrollPosition"in e&&n(14,h=e.scrollPosition)},e.$$.update=()=>{2&e.$$.dirty&&(s=u.code.toUpperCase()),3&e.$$.dirty&&n(3,a=function(e){let t=u.pageMapFunction(e);return isNaN(t)?t:`${s} ${t}`}(o)),16388&e.$$.dirty&&n(5,r=function(e,t){if(void 0===e)return!1;let n=e.getBoundingClientRect(),s=e.offsetTop-n.height-200,a=e.offsetTop+2*n.height;return t>s&&t<a}(i,h)),229376&e.$$.dirty&&n(6,l=`transform: scale(${p}) translate(${m}px, ${g}px);`),8&e.$$.dirty&&n(7,c=a.replace(" ","-"))},[o,u,i,a,f,r,l,c,function(){n(4,f=!0)},function(){n(4,f=!1)},function(e){f&&(n(15,p-=e.deltaY/3e3),p<.2&&n(15,p=.2))},function(e){d=!0},function(e){d=!1},function(e){if(e.preventDefault(),f&&d){let t=1/p;n(16,m+=e.movementX*t),n(17,g+=e.movementY*t)}},h,p,m,g,function(e){B[e?"unshift":"push"]((()=>{n(2,i=e)}))}]}class Fn extends o{constructor(e){super(),u(this,e,Xn,qn,h,{page:0,metaData:1,scrollPosition:14})}}function Wn(e,t,n){const s=e.slice();return s[13]=t[n],s}function Gn(e){let t,n;return t=new Fn({props:{page:e[13],metaData:e[0],scrollPosition:e[1]}}),{c(){S(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,s){P(t,e,s),n=!0},p(e,n){const s={};8&n&&(s.page=e[13]),1&n&&(s.metaData=e[0]),2&n&&(s.scrollPosition=e[1]),t.$set(s)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Yn(e){let t,n,s=e[3],a=[];for(let l=0;l<s.length;l+=1)a[l]=Gn(Wn(e,s,l));const r=e=>V(a[e],1,1,(()=>{a[e]=null}));return{c(){t=f("div");for(let e=0;e<a.length;e+=1)a[e].c();this.h()},l(e){t=g(e,"DIV",{class:!0});var n=$(t);for(let t=0;t<a.length;t+=1)a[t].l(n);n.forEach(y),this.h()},h(){b(t,"class","imageBookView svelte-1v3o944")},m(s,r){w(s,t,r);for(let e=0;e<a.length;e+=1)a[e].m(t,null);e[7](t),n=!0},p(e,[n]){if(11&n){let l;for(s=e[3],l=0;l<s.length;l+=1){const r=Wn(e,s,l);a[l]?(a[l].p(r,n),O(a[l],1)):(a[l]=Gn(r),a[l].c(),O(a[l],1),a[l].m(t,null))}for(j(),l=s.length;l<a.length;l+=1)r(l);H()}},i(e){if(!n){for(let e=0;e<s.length;e+=1)O(a[e]);n=!0}},o(e){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)V(a[t]);n=!1},d(n){n&&y(t),N(a,n),e[7](null)}}}function Kn(e,t,n){let s,a,r;var{metaData:l}=t,{campaign:c}=t;const{campaignStore:i}=c;re(e,i,(e=>n(6,r=e)));var o,u=0;function h(){n(1,u=o.scrollTop)}function f(){setTimeout((()=>{if(l.scrollToPage){let e=function(e){let t=l.pageMapFunction(e);return isNaN(t)?t:`${a} ${t}`}(l.scrollToPage).replace(" ","-"),t=document.getElementById(e);t&&t.scrollIntoView(),n(0,l.scrollToPage=null,l)}}),0)}return queueMicrotask((()=>{o.addEventListener("scroll",h),h()})),e.$$set=e=>{"metaData"in e&&n(0,l=e.metaData),"campaign"in e&&n(5,c=e.campaign)},e.$$.update=()=>{1&e.$$.dirty&&n(3,s=function(e){let t=[];for(let n=0;n<e;n++)t.push(n);return t}(l.pages)),1&e.$$.dirty&&(a=l.code.toUpperCase()),64&e.$$.dirty&&f()},[l,u,o,s,i,c,r,function(e){B[e?"unshift":"push"]((()=>{n(2,o=e)}))}]}class Jn extends o{constructor(e){super(),u(this,e,Kn,Yn,h,{metaData:0,campaign:5})}}function Qn(e,t,n){const s=e.slice();return s[9]=t[n],s}function Zn(e){let t,n,s;return n=new Jn({props:{metaData:e[2],campaign:e[0]}}),{c(){t=f("section"),S(n.$$.fragment),this.h()},l(e){t=g(e,"SECTION",{class:!0});var s=$(t);k(n.$$.fragment,s),s.forEach(y),this.h()},h(){b(t,"class","openBook svelte-fc2q39")},m(e,a){w(e,t,a),P(n,t,null),s=!0},p(e,t){const s={};4&t&&(s.metaData=e[2]),1&t&&(s.campaign=e[0]),n.$set(s)},i(e){s||(O(n.$$.fragment,e),s=!0)},o(e){V(n.$$.fragment,e),s=!1},d(e){e&&y(t),C(n)}}}function es(e){let t,n=e[3],s=[];for(let a=0;a<n.length;a+=1)s[a]=ts(Qn(e,n,a));return{c(){t=f("section");for(let e=0;e<s.length;e+=1)s[e].c();this.h()},l(e){t=g(e,"SECTION",{class:!0});var n=$(t);for(let t=0;t<s.length;t+=1)s[t].l(n);n.forEach(y),this.h()},h(){b(t,"class","sourceBooks svelte-fc2q39")},m(e,n){w(e,t,n);for(let a=0;a<s.length;a+=1)s[a].m(t,null)},p(e,a){if(40&a){let r;for(n=e[3],r=0;r<n.length;r+=1){const l=Qn(e,n,r);s[r]?s[r].p(l,a):(s[r]=ts(l),s[r].c(),s[r].m(t,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=n.length}},i:M,o:M,d(e){e&&y(t),N(s,e)}}}function ts(e){let t,n,s,a,r,l;function c(){return e[7](e[9])}return{c(){t=f("div"),n=f("img"),a=d(),this.h()},l(e){t=g(e,"DIV",{class:!0});var s=$(t);n=g(s,"IMG",{src:!0,alt:!0,class:!0}),a=E(s),s.forEach(y),this.h()},h(){n.src!==(s="./books/"+e[9].code+"/0.png")&&b(n,"src",s),b(n,"alt",""),b(n,"class","svelte-fc2q39"),b(t,"class","book svelte-fc2q39")},m(e,s){w(e,t,s),I(t,n),I(t,a),r||(l=x(n,"click",c),r=!0)},p(t,a){e=t,8&a&&n.src!==(s="./books/"+e[9].code+"/0.png")&&b(n,"src",s)},d(e){e&&y(t),r=!1,l()}}}function ns(e){let t,n,s,a;const r=[es,Zn],l=[];function c(e,t){return e[1]?1:0}return t=c(e),n=l[t]=r[t](e),{c(){n.c(),s=m()},l(e){n.l(e),s=m()},m(e,n){l[t].m(e,n),w(e,s,n),a=!0},p(e,[a]){let i=t;t=c(e),t===i?l[t].p(e,a):(j(),V(l[i],1,1,(()=>{l[i]=null})),H(),n=l[t],n?n.p(e,a):(n=l[t]=r[t](e),n.c()),O(n,1),n.m(s.parentNode,s))},i(e){a||(O(n),a=!0)},o(e){V(n),a=!1},d(e){l[t].d(e),e&&y(s)}}}function ss(e,t,n){let s,a;var{campaign:r=null}=t;const{campaignStore:l}=r;re(e,l,(e=>n(6,a=e)));var c=!1,i={};function o(e){n(2,i=e),n(1,c=!0)}return e.$$set=e=>{"campaign"in e&&n(0,r=e.campaign)},e.$$.update=()=>{64&e.$$.dirty&&function(){let e=r.mainManager.get();if(e.openSource){let t=De[e.openSource.toLowerCase()];void 0!==t&&(t.scrollToPage=e.openPage,o(t)),e.openSource=null}}()},n(3,s=Object.values(De)),[r,c,i,s,l,o,a,e=>o(e)]}function as(e,t,n){const s=e.slice();return s[6]=t[n],s}function rs(e){let t,n,s,a=e[6].name+"";return{c(){t=f("option"),n=p(a),this.h()},l(e){t=g(e,"OPTION",{value:!0});var s=$(t);n=v(s,a),s.forEach(y),this.h()},h(){t.__value=s=e[6].hash,t.value=t.__value},m(e,s){w(e,t,s),I(t,n)},p(e,r){8&r&&a!==(a=e[6].name+"")&&T(n,a),8&r&&s!==(s=e[6].hash)&&(t.__value=s,t.value=t.__value)},d(e){e&&y(t)}}}function ls(e){let t,n,s,a,r,l,c,i,o=e[3],u=[];for(let h=0;h<o.length;h+=1)u[h]=rs(as(e,o,h));return{c(){t=f("section"),n=f("div"),s=f("p"),a=p("Only change the dataset for this campaign when updating an old dataset or you're absolutely sure the new dataset is compatible with the old one."),r=d(),l=f("select");for(let e=0;e<u.length;e+=1)u[e].c();this.h()},l(e){t=g(e,"SECTION",{class:!0});var c=$(t);n=g(c,"DIV",{class:!0});var i=$(n);s=g(i,"P",{});var o=$(s);a=v(o,"Only change the dataset for this campaign when updating an old dataset or you're absolutely sure the new dataset is compatible with the old one."),o.forEach(y),r=E(i),l=g(i,"SELECT",{});var h=$(l);for(let t=0;t<u.length;t+=1)u[t].l(h);h.forEach(y),i.forEach(y),c.forEach(y),this.h()},h(){void 0===e[2].dataset&&W((()=>e[5].call(l))),b(n,"class","generalSettings svelte-wd8nwp"),b(t,"class","settings svelte-wd8nwp")},m(o,h){w(o,t,h),I(t,n),I(n,s),I(s,a),I(n,r),I(n,l);for(let e=0;e<u.length;e+=1)u[e].m(l,null);G(l,e[2].dataset),c||(i=x(l,"change",e[5]),c=!0)},p(e,[t]){if(8&t){let n;for(o=e[3],n=0;n<o.length;n+=1){const s=as(e,o,n);u[n]?u[n].p(s,t):(u[n]=rs(s),u[n].c(),u[n].m(l,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=o.length}12&t&&G(l,e[2].dataset)},i:M,o:M,d(e){e&&y(t),N(u,e),c=!1,i()}}}function cs(e,t,n){let s,a,r,l,c=M,i=()=>(c(),c=q(u,(e=>n(4,a=e))),u),o=M;re(e,Pe,(e=>n(3,l=e))),e.$$.on_destroy.push((()=>c())),e.$$.on_destroy.push((()=>o()));var{campaign:u=U("campaign")}=t;return i(),e.$$set=e=>{"campaign"in e&&i(n(0,u=e.campaign))},e.$$.update=()=>{16&e.$$.dirty&&(n(1,s=a.campaignStore),o(),o=q(s,(e=>n(2,r=e))))},[u,s,r,l,a,function(){r.dataset=K(this),s.set(r)}]}const is={default:{id:"default",title:"DM Screen",icon:"view-dashboard-outline",component:class extends o{constructor(e){super(),u(this,e,vn,$n,h,{campaign:0})}}},encounterBuilder:{id:"encounterBuilder",title:"Encounter builder",icon:"sword-cross",component:class extends o{constructor(e){super(),u(this,e,Ln,Un,h,{campaign:3})}}},bookView:{id:"bookView",title:"Source books",icon:"book-open-blank-variant",openSource:null,openPage:null,component:class extends o{constructor(e){super(),u(this,e,ss,ns,h,{campaign:0})}}},settingsView:{id:"settingsView",title:"Settings",icon:"cog",component:class extends o{constructor(e){super(),u(this,e,cs,ls,h,{campaign:0})}}}};function os(e){var t;const n=Oe(`campaign_${e}`,Je);n.update((e=>c(c({},Je),e))),(null==(t=n.get())?void 0:t.dataset)||(n.get().dataset=Ve.get(),n.refresh());const s={campaignStore:n,refresh(){n.refresh()},subscribe(e){return n.subscribe((t=>{e(this)}))},update(e){n.update(e)}};return s.screens=function(e){const{campaignStore:t}=e;return{get:()=>t.get().screens,getScreenById(e){return this.get().find((t=>t.id===e))},getOpenScreenId:()=>t.get().currentScreenId,getOpenScreen(){return this.get().find((e=>e.id===this.getOpenScreenId()))},newScreen(){let e=c({},We);e.id=fe(),e.name="New screen",this.get().push(e),t.refresh()},openScreen(e){"object"==typeof e&&(e=e.id),t.get().currentScreenId=e,t.refresh()},deleteScreen(e){let n=this.get(),s=n.indexOf(e);if(s<0)return"notAScreen";this.openScreen("root"),n.splice(s,1),t.refresh()},addItemToScreen(e,n="Pinned item",s,a=null){let r=i(c({},Ke),{id:fe(),title:n,type:s,data:a});e.items.push(r),t.refresh()},addItemToCurrentScreen(e="Pinned item",t,n=null){this.addItemToScreen(this.getOpenScreen(),e,t,n)},removeItemFromScreen(e,n){let s=e.items.indexOf(n);e.items.splice(s,1),t.refresh()},renameCurrentScreen(e){this.getOpenScreen().name=e,t.refresh()},moveUp(e){let n=this.getOpenScreen().items,s=n.sort((t=>t.id===e.id?-1:1)).map(((e,t)=>(e.index=n.length-t,e)));this.getOpenScreen().items=s,t.refresh()},togglePin(t){t.pinned=!t.pinned,e.refresh()},moveItemTo(e,n){"string"==typeof n&&(n=this.getScreenById(n)),this.removeItemFromScreen(this.getOpenScreen(),e),this.addItemToScreen(n,e.title,e.type,e.data),t.refresh()}}}(s),s.party=function(e){const{campaignStore:t}=e;return{get:()=>t.get().partyMembers,getById(e){return this.get().find((t=>t.id===e))||null},addMember(){let t=c({},Qe);t.id=fe(),this.get().push(t),e.refresh()},removeMember(t){let n=this.get().indexOf(t);if(n<0)return"noPartyMember";this.get().splice(n,1),e.refresh()},getXPThreshHolds(){let e=this.get(),t={easy:0,medium:0,hard:0,deadly:0};for(let{level:n}of e){if(n<1||n>20)continue;let e=n-1,[s,a,r,l]=Ze[e];t.easy+=s,t.medium+=a,t.hard+=r,t.deadly+=l}return t},getDailyXP(){return this.get().map((e=>et[e.level])).reduce(((e,t)=>e+t),0)}}}(s),s.initiative=function(e){const{campaignStore:t}=e;return{get:()=>t.get().initiative,getCombatStarted(){return this.get().length>0},getRound:()=>t.get().initiativeRound,getPreviousInitiativeIndex(){return this.getMappedIndex(this.getCurrentInitiativeIndex()-1)},getCurrentInitiativeIndex:()=>t.get().currentInitiativeIndex,getNextInitiativeIndex(){return this.getMappedIndex(this.getCurrentInitiativeIndex()+1)},getPreviousEntry(){let e=this.getPreviousInitiativeIndex();return this.getSortedInitiative()[e]},getCurrentEntry(){let e=this.getCurrentInitiativeIndex();return this.getSortedInitiative()[e]},getNextEntry(){let e=this.getNextInitiativeIndex();return this.getSortedInitiative()[e]},getInitiativeOverview(){return[this.getPreviousEntry(),this.getCurrentEntry(),this.getNextEntry()]},getSortedInitiative(){return this.get().sort(((e,t)=>t.initiative-e.initiative))},getMappedIndex(e){return function(e,t,n){let s=e%(n+1);return s<0&&(s=n+1+s),s+t}(e,0,this.get().length-1)},previousInitiative(){let n=this.getPreviousInitiativeIndex(),s=t.get();s.currentInitiativeIndex=n,n===this.get().length-1&&s.initiativeRound--,e.refresh()},nextInitiative(){let n=this.getNextInitiativeIndex(),s=t.get();s.currentInitiativeIndex=n,0===n&&s.initiativeRound++,e.refresh()},addEntryToInitiative(t){this.get().push(t),e.refresh()},addManualEntry(){let e=nt();this.addEntryToInitiative(e)},addPartyMember(e){let t=nt();t.type="partyMember",t.name=e.name,t.data=e.id,this.addEntryToInitiative(t)},addPartyToInitiative(){let t=e.party.get();for(let e of t)this.addPartyMember(e)},addMonster(e){let t=nt();t.type="monster",t.name=e.name,t.data=xe(e),t.currentHealth=e.hp.average,t.maxHealth=e.hp.average,this.addEntryToInitiative(t)},removeEntry(n){let s=this.get().indexOf(n);if(s<0)return"noEntry";let a=t.get().currentInitiativeIndex;var r,l,c;t.get().currentInitiativeIndex=(r=0,l=a,c=this.get().length-1,l<r?r:l>c?c:l),this.get().splice(s,1),e.refresh()}}}(s),s.mainManager=function(e){const{campaignStore:t}=e;return{get(){let e=this.getCurrentId();return is[e]||is.default},getCurrentId:()=>t.get().currentManager,getList:()=>Object.values(is),setManager(e){t.get().currentManager=e,t.refresh()},showSourcePage(e,t){this.setManager("bookView"),this.get().openSource=e,this.get().openPage=t}}}(s),s}function us(e,t,n){const s=e.slice();return s[10]=t[n],s}function hs(e){let t,n,s,a,r=e[2],l=[];for(let c=0;c<r.length;c+=1)l[c]=fs(us(e,r,c));return{c(){t=f("div");for(let e=0;e<l.length;e+=1)l[e].c();this.h()},l(e){t=g(e,"DIV",{class:!0});var n=$(t);for(let t=0;t<l.length;t+=1)l[t].l(n);n.forEach(y),this.h()},h(){b(t,"class","menu svelte-wqlf6z")},m(r,c){w(r,t,c);for(let e=0;e<l.length;e+=1)l[e].m(t,null);s||(a=le(n=we.call(null,t,e[5])),s=!0)},p(e,n){if(76&n){let s;for(r=e[2],s=0;s<r.length;s+=1){const a=us(e,r,s);l[s]?l[s].p(a,n):(l[s]=fs(a),l[s].c(),l[s].m(t,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=r.length}},d(e){e&&y(t),N(l,e),s=!1,a()}}}function fs(e){let t,n,s,a,r,l,c,i,o,u,h=e[10].title+"";function m(){return e[9](e[10])}return{c(){t=f("div"),n=f("p"),s=f("span"),r=d(),l=p(h),c=d(),this.h()},l(e){t=g(e,"DIV",{class:!0});var a=$(t);n=g(a,"P",{class:!0});var i=$(n);s=g(i,"SPAN",{class:!0}),$(s).forEach(y),r=E(i),l=v(i,h),i.forEach(y),c=E(a),a.forEach(y),this.h()},h(){b(s,"class",a="mdi mdi-"+e[10].icon+" svelte-wqlf6z"),b(n,"class","svelte-wqlf6z"),b(t,"class",i="menuItem "+(e[10].id===e[3]&&"current")+" svelte-wqlf6z")},m(e,a){w(e,t,a),I(t,n),I(n,s),I(n,r),I(n,l),I(t,c),o||(u=x(t,"click",m),o=!0)},p(n,r){e=n,4&r&&a!==(a="mdi mdi-"+e[10].icon+" svelte-wqlf6z")&&b(s,"class",a),4&r&&h!==(h=e[10].title+"")&&T(l,h),12&r&&i!==(i="menuItem "+(e[10].id===e[3]&&"current")+" svelte-wqlf6z")&&b(t,"class",i)},d(e){e&&y(t),o=!1,u()}}}function ps(e){let t,n,s,a,r,l,c=e[0]&&hs(e);return{c(){t=f("button"),n=f("span"),s=d(),c&&c.c(),a=m(),this.h()},l(e){t=g(e,"BUTTON",{class:!0});var r=$(t);n=g(r,"SPAN",{class:!0}),$(n).forEach(y),r.forEach(y),s=E(e),c&&c.l(e),a=m(),this.h()},h(){b(n,"class","mdi mdi-menu svelte-wqlf6z"),b(t,"class","navButton svelte-wqlf6z")},m(i,o){w(i,t,o),I(t,n),w(i,s,o),c&&c.m(i,o),w(i,a,o),r||(l=x(t,"click",e[4]),r=!0)},p(e,[t]){e[0]?c?c.p(e,t):(c=hs(e),c.c(),c.m(a.parentNode,a)):c&&(c.d(1),c=null)},i:M,o:M,d(e){e&&y(t),e&&y(s),c&&c.d(e),e&&y(a),r=!1,l()}}}function ds(e,t,n){let s,a,r,l,c=M;e.$$.on_destroy.push((()=>c()));var{campaign:i}=t,o=!1;function u(e){i.mainManager.setManager(e)}return e.$$set=e=>{"campaign"in e&&n(7,i=e.campaign)},e.$$.update=()=>{128&e.$$.dirty&&(n(1,s=i.campaignStore),c(),c=q(s,(e=>n(8,l=e)))),384&e.$$.dirty&&n(2,a=i.mainManager.getList(l)),384&e.$$.dirty&&n(3,r=i.mainManager.getCurrentId(l))},[o,s,a,r,function(){setTimeout((()=>{n(0,o=!0)}),0)},function(){n(0,o=!1)},u,i,l,e=>u(e.id)]}class ms extends o{constructor(e){super(),u(this,e,ds,ps,h,{campaign:7})}}function gs(e){let t,n,s,a,r,l,c,i,o,u,h,m,N;return{c(){t=f("h1"),n=p(e[1]),a=d(),r=f("p"),l=p(e[2]),c=d(),i=f("input"),o=d(),u=f("button"),h=p("roll"),this.h()},l(s){t=g(s,"H1",{class:!0});var f=$(t);n=v(f,e[1]),f.forEach(y),a=E(s),r=g(s,"P",{class:!0});var p=$(r);l=v(p,e[2]),p.forEach(y),c=E(s),i=g(s,"INPUT",{class:!0}),o=E(s),u=g(s,"BUTTON",{class:!0});var d=$(u);h=v(d,"roll"),d.forEach(y),this.h()},h(){b(t,"class",s=Q(e[4])+" svelte-16axwwy"),b(r,"class","svelte-16axwwy"),b(i,"class","svelte-16axwwy"),b(u,"class","svelte-16axwwy")},m(s,f){w(s,t,f),I(t,n),w(s,a,f),w(s,r,f),I(r,l),w(s,c,f),w(s,i,f),e[13](i),A(i,e[0]),w(s,o,f),w(s,u,f),I(u,h),m||(N=[x(i,"input",e[14]),x(i,"keydown",e[6]),x(u,"click",e[5])],m=!0)},p(e,[a]){2&a&&T(n,e[1]),16&a&&s!==(s=Q(e[4])+" svelte-16axwwy")&&b(t,"class",s),4&a&&T(l,e[2]),1&a&&i.value!==e[0]&&A(i,e[0])},i:M,o:M,d(n){n&&y(t),n&&y(a),n&&y(r),n&&y(c),n&&y(i),e[13](null),n&&y(o),n&&y(u),m=!1,R(N)}}}function $s(e,t,n){let s,a,r;var l,c,i,{expression:o=""}=t,{doRoll:u=!1}=t,{doFocus:h=!1}=t,f="?",p="";function d(){let e=Ce(o);e?(n(1,f=String(e.result)),n(2,p=e.resultExpression),n(9,c=e.minResult),n(10,i=e.maxResult)):(n(1,f="?"),n(2,p=""))}return ce((()=>{h&&l.focus()})),d(),e.$$set=e=>{"expression"in e&&n(0,o=e.expression),"doRoll"in e&&n(7,u=e.doRoll),"doFocus"in e&&n(8,h=e.doFocus)},e.$$.update=()=>{514&e.$$.dirty&&n(11,s=f===c),1026&e.$$.dirty&&n(12,a=f===i),6144&e.$$.dirty&&n(4,r=`${s?"natOne":""} ${a?"natTwenty":""}`),128&e.$$.dirty&&u&&(d(),n(7,u=!1))},[o,f,p,l,r,d,function(e){let t=["d","+","-","/","*","^","Backspace","a"];"Enter"===e.key?d():isNaN(e.key)&&!t.includes(e.key)&&e.preventDefault()},u,h,c,i,s,a,function(e){B[e?"unshift":"push"]((()=>{n(3,l=e)}))},function(){o=this.value,n(0,o)}]}class vs extends o{constructor(e){super(),u(this,e,$s,gs,h,{expression:0,doRoll:7,doFocus:8})}}function ys(e){let t,n,s,a,r,l;return n=new vs({props:{doFocus:!0}}),{c(){t=f("div"),S(n.$$.fragment),this.h()},l(e){t=g(e,"DIV",{class:!0});var s=$(t);k(n.$$.fragment,s),s.forEach(y),this.h()},h(){b(t,"class","diceDrawer svelte-lxlzgl")},m(c,i){w(c,t,i),P(n,t,null),a=!0,r||(l=le(s=we.call(null,t,e[2])),r=!0)},p:M,i(e){a||(O(n.$$.fragment,e),a=!0)},o(e){V(n.$$.fragment,e),a=!1},d(e){e&&y(t),C(n),r=!1,l()}}}function Es(e){let t,n,s,a,r,l,c,i=e[0]&&ys(e);return{c(){t=f("button"),n=f("span"),s=d(),i&&i.c(),a=m(),this.h()},l(e){t=g(e,"BUTTON",{class:!0});var r=$(t);n=g(r,"SPAN",{class:!0}),$(n).forEach(y),r.forEach(y),s=E(e),i&&i.l(e),a=m(),this.h()},h(){b(n,"class","mdi mdi-dice-d20 svelte-lxlzgl"),b(t,"class","svelte-lxlzgl")},m(o,u){w(o,t,u),I(t,n),w(o,s,u),i&&i.m(o,u),w(o,a,u),r=!0,l||(c=x(t,"click",e[1]),l=!0)},p(e,[t]){e[0]?i?(i.p(e,t),1&t&&O(i,1)):(i=ys(e),i.c(),O(i,1),i.m(a.parentNode,a)):i&&(j(),V(i,1,1,(()=>{i=null})),H())},i(e){r||(O(i),r=!0)},o(e){V(i),r=!1},d(e){e&&y(t),e&&y(s),i&&i.d(e),e&&y(a),l=!1,c()}}}function bs(e,t,n){var s=!1,a=!0;return[s,function(){n(0,s=!0),a=!0},function(){a?a=!1:n(0,s=!1)}]}class ws extends o{constructor(e){super(),u(this,e,bs,Es,h,{})}}function Is(e,t,n){const s=e.slice();return s[12]=t[n],s[13]=t,s[14]=n,s}function xs(e){let t,n,s,a,r,l,c,i,o,u,h,p,m,v,T,N;function S(){e[8].call(s,e[13],e[14])}function k(){e[9].call(l,e[13],e[14])}function D(){e[10].call(o,e[13],e[14])}function P(){return e[11](e[12])}return{c(){t=f("tr"),n=f("td"),s=f("input"),a=d(),r=f("td"),l=f("input"),c=d(),i=f("td"),o=f("input"),u=d(),h=f("td"),p=f("button"),m=f("span"),v=d(),this.h()},l(e){t=g(e,"TR",{});var f=$(t);n=g(f,"TD",{class:!0});var d=$(n);s=g(d,"INPUT",{type:!0,spellcheck:!0,class:!0}),d.forEach(y),a=E(f),r=g(f,"TD",{class:!0});var b=$(r);l=g(b,"INPUT",{type:!0,min:!0,max:!0,class:!0}),b.forEach(y),c=E(f),i=g(f,"TD",{class:!0});var w=$(i);o=g(w,"INPUT",{type:!0,min:!0,class:!0}),w.forEach(y),u=E(f),h=g(f,"TD",{class:!0});var I=$(h);p=g(I,"BUTTON",{class:!0});var x=$(p);m=g(x,"SPAN",{class:!0}),$(m).forEach(y),x.forEach(y),I.forEach(y),v=E(f),f.forEach(y),this.h()},h(){b(s,"type","text"),b(s,"spellcheck","false"),b(s,"class","svelte-57itb8"),b(n,"class","name svelte-57itb8"),b(l,"type","number"),b(l,"min","1"),b(l,"max","20"),b(l,"class","svelte-57itb8"),b(r,"class","level svelte-57itb8"),b(o,"type","number"),b(o,"min","0"),b(o,"class","svelte-57itb8"),b(i,"class","pp svelte-57itb8"),b(m,"class","mdi mdi-close"),b(p,"class","svelte-57itb8"),b(h,"class","action svelte-57itb8")},m(f,d){w(f,t,d),I(t,n),I(n,s),A(s,e[12].name),I(t,a),I(t,r),I(r,l),A(l,e[12].level),I(t,c),I(t,i),I(i,o),A(o,e[12].pp),I(t,u),I(t,h),I(h,p),I(p,m),I(t,v),T||(N=[x(s,"input",S),x(s,"blur",e[5]),x(l,"input",k),x(l,"blur",e[5]),x(o,"input",D),x(o,"blur",e[5]),x(p,"click",P)],T=!0)},p(t,n){e=t,1&n&&s.value!==e[12].name&&A(s,e[12].name),1&n&&ie(l.value)!==e[12].level&&A(l,e[12].level),1&n&&ie(o.value)!==e[12].pp&&A(o,e[12].pp)},d(e){e&&y(t),T=!1,R(N)}}}function Ts(e){let t,n,s,a,r,l,c,i,o,u,h,m,S,k,P,O,V,C,B,j,H,A,R,U,L,_,z,q,X,F,W,G,Y,K,J,Q,Z,ee,te,ne,se,ae,re,le,ce,ie,oe,ue,he,fe,pe,de,me=e[1].easy+"",ge=e[1].medium+"",$e=e[1].hard+"",ve=e[1].deadly+"",ye=e[0],Ee=[];for(let f=0;f<ye.length;f+=1)Ee[f]=xs(Is(e,ye,f));return{c(){t=f("table"),n=f("tr"),s=f("th"),a=p("Easy"),r=d(),l=f("th"),c=p("Medium"),i=d(),o=f("th"),u=p("Hard"),h=d(),m=f("th"),S=p("Deadly"),k=d(),P=f("tr"),O=f("td"),V=p(me),C=d(),B=f("td"),j=p(ge),H=d(),A=f("td"),R=p($e),U=d(),L=f("td"),_=p(ve),z=d(),q=f("table"),X=f("colgroup"),F=f("col"),W=d(),G=f("col"),Y=d(),K=f("col"),J=d(),Q=f("tr"),Z=f("th"),ee=p("Name"),te=d(),ne=f("th"),se=p("LvL"),ae=d(),re=f("th"),le=p("PP"),ce=d(),ie=f("th"),oe=d();for(let e=0;e<Ee.length;e+=1)Ee[e].c();ue=d(),he=f("button"),fe=p("Add Member"),this.h()},l(e){t=g(e,"TABLE",{class:!0});var f=$(t);n=g(f,"TR",{});var p=$(n);s=g(p,"TH",{class:!0});var d=$(s);a=v(d,"Easy"),d.forEach(y),r=E(p),l=g(p,"TH",{class:!0});var b=$(l);c=v(b,"Medium"),b.forEach(y),i=E(p),o=g(p,"TH",{class:!0});var w=$(o);u=v(w,"Hard"),w.forEach(y),h=E(p),m=g(p,"TH",{class:!0});var I=$(m);S=v(I,"Deadly"),I.forEach(y),p.forEach(y),k=E(f),P=g(f,"TR",{});var x=$(P);O=g(x,"TD",{class:!0});var T=$(O);V=v(T,me),T.forEach(y),C=E(x),B=g(x,"TD",{class:!0});var N=$(B);j=v(N,ge),N.forEach(y),H=E(x),A=g(x,"TD",{class:!0});var D=$(A);R=v(D,$e),D.forEach(y),U=E(x),L=g(x,"TD",{class:!0});var M=$(L);_=v(M,ve),M.forEach(y),x.forEach(y),f.forEach(y),z=E(e),q=g(e,"TABLE",{class:!0});var pe=$(q);X=g(pe,"COLGROUP",{});var de=$(X);F=g(de,"COL",{span:!0,style:!0}),W=E(de),G=g(de,"COL",{span:!0,style:!0}),Y=E(de),K=g(de,"COL",{span:!0,style:!0}),de.forEach(y),J=E(pe),Q=g(pe,"TR",{});var ye=$(Q);Z=g(ye,"TH",{class:!0});var be=$(Z);ee=v(be,"Name"),be.forEach(y),te=E(ye),ne=g(ye,"TH",{class:!0});var we=$(ne);se=v(we,"LvL"),we.forEach(y),ae=E(ye),re=g(ye,"TH",{class:!0});var Ie=$(re);le=v(Ie,"PP"),Ie.forEach(y),ce=E(ye),ie=g(ye,"TH",{class:!0}),$(ie).forEach(y),ye.forEach(y),oe=E(pe);for(let t=0;t<Ee.length;t+=1)Ee[t].l(pe);pe.forEach(y),ue=E(e),he=g(e,"BUTTON",{class:!0});var xe=$(he);fe=v(xe,"Add Member"),xe.forEach(y),this.h()},h(){b(s,"class","svelte-57itb8"),b(l,"class","svelte-57itb8"),b(o,"class","svelte-57itb8"),b(m,"class","svelte-57itb8"),b(O,"class","svelte-57itb8"),b(B,"class","svelte-57itb8"),b(A,"class","svelte-57itb8"),b(L,"class","svelte-57itb8"),b(t,"class","xpThresholds svelte-57itb8"),b(F,"span","1"),D(F,"width","60%"),b(G,"span","1"),D(G,"width","20%"),b(K,"span","1"),D(K,"width","20%"),b(Z,"class","name svelte-57itb8"),b(ne,"class","level svelte-57itb8"),b(re,"class","pp svelte-57itb8"),b(ie,"class","action svelte-57itb8"),b(q,"class","svelte-57itb8"),b(he,"class","svelte-57itb8")},m(f,p){w(f,t,p),I(t,n),I(n,s),I(s,a),I(n,r),I(n,l),I(l,c),I(n,i),I(n,o),I(o,u),I(n,h),I(n,m),I(m,S),I(t,k),I(t,P),I(P,O),I(O,V),I(P,C),I(P,B),I(B,j),I(P,H),I(P,A),I(A,R),I(P,U),I(P,L),I(L,_),w(f,z,p),w(f,q,p),I(q,X),I(X,F),I(X,W),I(X,G),I(X,Y),I(X,K),I(q,J),I(q,Q),I(Q,Z),I(Z,ee),I(Q,te),I(Q,ne),I(ne,se),I(Q,ae),I(Q,re),I(re,le),I(Q,ce),I(Q,ie),I(q,oe);for(let e=0;e<Ee.length;e+=1)Ee[e].m(q,null);w(f,ue,p),w(f,he,p),I(he,fe),pe||(de=x(he,"click",e[3]),pe=!0)},p(e,[t]){if(2&t&&me!==(me=e[1].easy+"")&&T(V,me),2&t&&ge!==(ge=e[1].medium+"")&&T(j,ge),2&t&&$e!==($e=e[1].hard+"")&&T(R,$e),2&t&&ve!==(ve=e[1].deadly+"")&&T(_,ve),49&t){let n;for(ye=e[0],n=0;n<ye.length;n+=1){const s=Is(e,ye,n);Ee[n]?Ee[n].p(s,t):(Ee[n]=xs(s),Ee[n].c(),Ee[n].m(q,null))}for(;n<Ee.length;n+=1)Ee[n].d(1);Ee.length=ye.length}},i:M,o:M,d(e){e&&y(t),e&&y(z),e&&y(q),N(Ee,e),e&&y(ue),e&&y(he),pe=!1,de()}}}function Ns(e,t,n){let s,a,r;var{campaign:l}=t;const{campaignStore:c}=l;function i(e){l.party.removeMember(e)}re(e,c,(e=>n(7,r=e)));return e.$$set=e=>{"campaign"in e&&n(6,l=e.campaign)},e.$$.update=()=>{192&e.$$.dirty&&n(0,s=l.party.get(r)),192&e.$$.dirty&&n(1,a=l.party.getXPThreshHolds(r))},[s,a,c,function(){l.party.addMember()},i,function(){l.refresh()},l,r,function(e,t){e[t].name=this.value,n(0,s),n(6,l),n(7,r)},function(e,t){e[t].level=ie(this.value),n(0,s),n(6,l),n(7,r)},function(e,t){e[t].pp=ie(this.value),n(0,s),n(6,l),n(7,r)},e=>i(e)]}class Ss extends o{constructor(e){super(),u(this,e,Ns,Ts,h,{campaign:6})}}function ks(e){let t,n,s,a,r,l;return n=new Ss({props:{campaign:e[0]}}),{c(){t=f("div"),S(n.$$.fragment),this.h()},l(e){t=g(e,"DIV",{class:!0});var s=$(t);k(n.$$.fragment,s),s.forEach(y),this.h()},h(){b(t,"class","svelte-1m41ok8")},m(c,i){w(c,t,i),P(n,t,null),a=!0,r||(l=le(s=we.call(null,t,e[3])),r=!0)},p(e,t){const s={};1&t&&(s.campaign=e[0]),n.$set(s)},i(e){a||(O(n.$$.fragment,e),a=!0)},o(e){V(n.$$.fragment,e),a=!1},d(e){e&&y(t),C(n),r=!1,l()}}}function Ds(e){let t,n,s,a,r,l,c,i=e[1]&&ks(e);return{c(){t=f("button"),n=p("Party Members"),s=d(),i&&i.c(),a=m(),this.h()},l(e){t=g(e,"BUTTON",{class:!0});var r=$(t);n=v(r,"Party Members"),r.forEach(y),s=E(e),i&&i.l(e),a=m(),this.h()},h(){b(t,"class","toolbarButton svelte-1m41ok8")},m(o,u){w(o,t,u),I(t,n),w(o,s,u),i&&i.m(o,u),w(o,a,u),r=!0,l||(c=x(t,"click",e[2]),l=!0)},p(e,[t]){e[1]?i?(i.p(e,t),2&t&&O(i,1)):(i=ks(e),i.c(),O(i,1),i.m(a.parentNode,a)):i&&(j(),V(i,1,1,(()=>{i=null})),H())},i(e){r||(O(i),r=!0)},o(e){V(i),r=!1},d(e){e&&y(t),e&&y(s),i&&i.d(e),e&&y(a),l=!1,c()}}}function Ps(e,t,n){var{campaign:s}=t,a=!1,r=!0;return e.$$set=e=>{"campaign"in e&&n(0,s=e.campaign)},[s,a,function(){n(1,a=!a),a&&(r=!0)},function(){r?r=!1:n(1,a=!1)}]}class Os extends o{constructor(e){super(),u(this,e,Ps,Ds,h,{campaign:0})}}function Vs(e){let t,n,s,a,r=e[1]&&Cs(),l=e[2]&&Bs(),c=e[3]&&js(),i=e[4]&&Hs();return{c(){t=f("div"),r&&r.c(),n=d(),l&&l.c(),s=d(),c&&c.c(),a=d(),i&&i.c(),this.h()},l(e){t=g(e,"DIV",{class:!0});var o=$(t);r&&r.l(o),n=E(o),l&&l.l(o),s=E(o),c&&c.l(o),a=E(o),i&&i.l(o),o.forEach(y),this.h()},h(){b(t,"class","itemsHeader svelte-1po2pdb")},m(e,o){w(e,t,o),r&&r.m(t,null),I(t,n),l&&l.m(t,null),I(t,s),c&&c.m(t,null),I(t,a),i&&i.m(t,null)},p(e,o){e[1]?r||(r=Cs(),r.c(),r.m(t,n)):r&&(r.d(1),r=null),e[2]?l||(l=Bs(),l.c(),l.m(t,s)):l&&(l.d(1),l=null),e[3]?c||(c=js(),c.c(),c.m(t,a)):c&&(c.d(1),c=null),e[4]?i||(i=Hs(),i.c(),i.m(t,null)):i&&(i.d(1),i=null)},d(e){e&&y(t),r&&r.d(),l&&l.d(),c&&c.d(),i&&i.d()}}}function Cs(e){let t,n;return{c(){t=f("div"),n=p("Feature"),this.h()},l(e){t=g(e,"DIV",{class:!0});var s=$(t);n=v(s,"Feature"),s.forEach(y),this.h()},h(){b(t,"class","nameWrapper")},m(e,s){w(e,t,s),I(t,n)},d(e){e&&y(t)}}}function Bs(e){let t;return{c(){t=f("div"),this.h()},l(e){t=g(e,"DIV",{class:!0}),$(t).forEach(y),this.h()},h(){b(t,"class","wrapper centerText svelte-1po2pdb")},m(e,n){w(e,t,n)},d(e){e&&y(t)}}}function js(e){let t;return{c(){t=f("div"),this.h()},l(e){t=g(e,"DIV",{class:!0}),$(t).forEach(y),this.h()},h(){b(t,"class","wrapper centerText svelte-1po2pdb")},m(e,n){w(e,t,n)},d(e){e&&y(t)}}}function Hs(e){let t;return{c(){t=f("div"),this.h()},l(e){t=g(e,"DIV",{class:!0}),$(t).forEach(y),this.h()},h(){b(t,"class","wrapper dropdownIndicatorWrapper")},m(e,n){w(e,t,n)},d(e){e&&y(t)}}}function As(e){let t,n,s,a,r,l,c,i=e[0].name+"";return{c(){t=f("div"),n=f("div"),s=f("p"),a=p(i),r=d(),l=f("p"),c=p(e[7]),this.h()},l(o){t=g(o,"DIV",{class:!0});var u=$(t);n=g(u,"DIV",{class:!0});var h=$(n);s=g(h,"P",{class:!0});var f=$(s);a=v(f,i),f.forEach(y),r=E(h),l=g(h,"P",{class:!0});var p=$(l);c=v(p,e[7]),p.forEach(y),h.forEach(y),u.forEach(y),this.h()},h(){b(s,"class","spellName svelte-1po2pdb"),b(l,"class","spellDescription svelte-1po2pdb"),b(n,"class","overflowWrapper svelte-1po2pdb"),b(t,"class","nameWrapper svelte-1po2pdb")},m(e,i){w(e,t,i),I(t,n),I(n,s),I(s,a),I(n,r),I(n,l),I(l,c)},p(e,t){1&t&&i!==(i=e[0].name+"")&&T(a,i),128&t&&T(c,e[7])},d(e){e&&y(t)}}}function Ms(e){let t,n,s,a,r,l,c,i,o;return{c(){t=f("div"),n=f("div"),s=f("input"),a=d(),r=f("div"),l=d(),c=f("input"),this.h()},l(e){t=g(e,"DIV",{class:!0});var i=$(t);n=g(i,"DIV",{class:!0});var o=$(n);s=g(o,"INPUT",{type:!0,tabindex:!0,class:!0}),a=E(o),r=g(o,"DIV",{class:!0}),$(r).forEach(y),l=E(o),c=g(o,"INPUT",{type:!0,tabindex:!0,class:!0}),o.forEach(y),i.forEach(y),this.h()},h(){b(s,"type","text"),b(s,"tabindex","-1"),b(s,"class","svelte-1po2pdb"),b(r,"class","divider svelte-1po2pdb"),b(c,"type","text"),b(c,"tabindex","-1"),b(c,"class","svelte-1po2pdb"),b(n,"class","centerWrapper"),b(t,"class","healthManager svelte-1po2pdb")},m(u,h){w(u,t,h),I(t,n),I(n,s),A(s,e[0].currentHealth),I(n,a),I(n,r),I(n,l),I(n,c),A(c,e[0].maxHealth),i||(o=[x(s,"keydown",_s),x(s,"input",e[18]),x(c,"keydown",_s),x(c,"input",e[19])],i=!0)},p(e,t){1&t&&s.value!==e[0].currentHealth&&A(s,e[0].currentHealth),1&t&&c.value!==e[0].maxHealth&&A(c,e[0].maxHealth)},d(e){e&&y(t),i=!1,R(o)}}}function Rs(e){let t;return{c(){t=f("div"),this.h()},l(e){t=g(e,"DIV",{class:!0}),$(t).forEach(y),this.h()},h(){b(t,"class","deathSavesManager svelte-1po2pdb")},m(e,n){w(e,t,n)},p:M,d(e){e&&y(t)}}}function Us(e){let t,n,s,a,r,l,c,i,o,u,h,p,m,v,T=e[6]&&Vs(e),N=e[1]&&As(e);function S(e,t){return"partyMember"===e[0].type?Rs:"monster"===e[0].type?Ms:void 0}let k=S(e),D=k&&k(e);return{c(){T&&T.c(),t=d(),n=f("div"),s=f("div"),a=f("input"),l=d(),N&&N.c(),c=d(),i=f("div"),D&&D.c(),o=d(),u=f("div"),h=f("button"),p=f("span"),this.h()},l(e){T&&T.l(e),t=E(e),n=g(e,"DIV",{class:!0});var r=$(n);s=g(r,"DIV",{class:!0});var f=$(s);a=g(f,"INPUT",{class:!0,type:!0,tabindex:!0}),f.forEach(y),l=E(r),N&&N.l(r),c=E(r),i=g(r,"DIV",{class:!0});var d=$(i);D&&D.l(d),d.forEach(y),o=E(r),u=g(r,"DIV",{class:!0});var m=$(u);h=g(m,"BUTTON",{class:!0});var v=$(h);p=g(v,"SPAN",{class:!0}),$(p).forEach(y),v.forEach(y),m.forEach(y),r.forEach(y),this.h()},h(){b(a,"class",r=Q(e[8]&&"isCurrent")+" svelte-1po2pdb"),b(a,"type","text"),b(a,"tabindex","0"),b(s,"class","initiative wrapper svelte-1po2pdb"),b(i,"class","wrapper controlls svelte-1po2pdb"),b(p,"class","mdi mdi-close svelte-1po2pdb"),b(h,"class","svelte-1po2pdb"),b(u,"class","wrapper controlls buttons svelte-1po2pdb"),b(n,"class","initiativeItem svelte-1po2pdb")},m(r,f){T&&T.m(r,f),w(r,t,f),w(r,n,f),I(n,s),I(s,a),A(a,e[0].initiative),I(n,l),N&&N.m(n,null),I(n,c),I(n,i),D&&D.m(i,null),I(n,o),I(n,u),I(u,h),I(h,p),m||(v=[x(a,"input",e[17]),x(a,"keydown",_s),x(a,"focus",Ls),x(a,"blur",e[10]),x(h,"click",e[9])],m=!0)},p(e,[s]){e[6]?T?T.p(e,s):(T=Vs(e),T.c(),T.m(t.parentNode,t)):T&&(T.d(1),T=null),256&s&&r!==(r=Q(e[8]&&"isCurrent")+" svelte-1po2pdb")&&b(a,"class",r),1&s&&a.value!==e[0].initiative&&A(a,e[0].initiative),e[1]?N?N.p(e,s):(N=As(e),N.c(),N.m(n,c)):N&&(N.d(1),N=null),k===(k=S(e))&&D?D.p(e,s):(D&&D.d(1),D=k&&k(e),D&&(D.c(),D.m(i,null)))},i:M,o:M,d(e){T&&T.d(e),e&&y(t),e&&y(n),N&&N.d(),D&&D.d(),m=!1,R(v)}}}function Ls({target:e}){e.select()}function _s(e){let{key:t}=e;isNaN(t)&&!["Backspace","ArrowRight","ArrowLeft","Tab"].includes(t)&&e.preventDefault()}function zs(e,t,n){let s,a,r,l,c,i=M;e.$$.on_destroy.push((()=>i()));var{campaign:o=null}=t,{initiativeEntry:u=null}=t,{showName:h=!0}=t,{showHeader:f=!1}=t,{showAddButton:p=!1}=t,{showRemoveButton:d=!1}=t,{showDetails:m=!1}=t,{showPopup:g=!0}=t,{index:$=null}=t,{firstItem:v=!1}=t;return e.$$set=e=>{"campaign"in e&&n(11,o=e.campaign),"initiativeEntry"in e&&n(0,u=e.initiativeEntry),"showName"in e&&n(1,h=e.showName),"showHeader"in e&&n(12,f=e.showHeader),"showAddButton"in e&&n(2,p=e.showAddButton),"showRemoveButton"in e&&n(3,d=e.showRemoveButton),"showDetails"in e&&n(4,m=e.showDetails),"showPopup"in e&&n(13,g=e.showPopup),"index"in e&&n(14,$=e.index),"firstItem"in e&&n(15,v=e.firstItem)},e.$$.update=()=>{2048&e.$$.dirty&&(n(5,s=o.campaignStore),i(),i=q(s,(e=>n(16,c=e)))),53248&e.$$.dirty&&n(6,a=f&&(0===$||v)),65537&e.$$.dirty&&n(7,r=function(e){let t=[];if("partyMember"===e.type){let n=o.party.getById(e.data);t.push(`Level: ${n.level}`),t.push(`Passive Perception: ${n.pp}`)}return t.join(" • ")}(u)),2049&e.$$.dirty&&n(8,l=u===o.initiative.getCurrentEntry())},[u,h,p,d,m,s,a,r,l,function(){o.initiative.removeEntry(u)},function(){queueMicrotask((()=>{o.refresh()}))},o,f,g,$,v,c,function(){u.initiative=this.value,n(0,u)},function(){u.currentHealth=this.value,n(0,u)},function(){u.maxHealth=this.value,n(0,u)}]}class qs extends o{constructor(e){super(),u(this,e,zs,Us,h,{campaign:11,initiativeEntry:0,showName:1,showHeader:12,showAddButton:2,showRemoveButton:3,showDetails:4,showPopup:13,index:14,firstItem:15})}}function Xs(e,t,n){const s=e.slice();return s[6]=t[n],s[8]=n,s}function Fs(e){let t,n;return t=new qs({props:{campaign:e[0],initiativeEntry:e[6],index:e[8]}}),{c(){S(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,s){P(t,e,s),n=!0},p(e,n){const s={};1&n&&(s.campaign=e[0]),4&n&&(s.initiativeEntry=e[6]),t.$set(s)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Ws(e){let t,n,s,a,r,l,c,i,o,u,h,m,T,S,k,D=e[2],P=[];for(let f=0;f<D.length;f+=1)P[f]=Fs(Xs(e,D,f));const C=e=>V(P[e],1,1,(()=>{P[e]=null}));return{c(){t=f("div"),n=f("header"),s=f("section"),a=f("p"),r=p("Rounds"),l=d(),c=f("input"),i=d();for(let e=0;e<P.length;e+=1)P[e].c();o=d(),u=f("button"),h=f("span"),m=p(" Add party to initiative"),this.h()},l(e){t=g(e,"DIV",{class:!0});var f=$(t);n=g(f,"HEADER",{class:!0});var p=$(n);s=g(p,"SECTION",{class:!0});var d=$(s);a=g(d,"P",{class:!0});var b=$(a);r=v(b,"Rounds"),b.forEach(y),l=E(d),c=g(d,"INPUT",{type:!0,min:!0,class:!0}),d.forEach(y),p.forEach(y),i=E(f);for(let t=0;t<P.length;t+=1)P[t].l(f);o=E(f),u=g(f,"BUTTON",{class:!0});var w=$(u);h=g(w,"SPAN",{class:!0}),$(h).forEach(y),m=v(w," Add party to initiative"),w.forEach(y),f.forEach(y),this.h()},h(){b(a,"class","svelte-1g5lxic"),b(c,"type","number"),b(c,"min","1"),b(c,"class","svelte-1g5lxic"),b(s,"class","svelte-1g5lxic"),b(n,"class","svelte-1g5lxic"),b(h,"class","mdi mdi-account-multiple-plus"),b(u,"class","svelte-1g5lxic"),b(t,"class","initiativeManager")},m(f,p){w(f,t,p),I(t,n),I(n,s),I(s,a),I(a,r),I(s,l),I(s,c),A(c,e[1].initiativeRound),I(t,i);for(let e=0;e<P.length;e+=1)P[e].m(t,null);I(t,o),I(t,u),I(u,h),I(u,m),T=!0,S||(k=[x(c,"input",e[5]),x(c,"blur",(function(){oe(e[0].refresh)&&e[0].refresh.apply(this,arguments)})),x(u,"click",e[4])],S=!0)},p(n,[s]){if(e=n,2&s&&ie(c.value)!==e[1].initiativeRound&&A(c,e[1].initiativeRound),5&s){let n;for(D=e[2],n=0;n<D.length;n+=1){const a=Xs(e,D,n);P[n]?(P[n].p(a,s),O(P[n],1)):(P[n]=Fs(a),P[n].c(),O(P[n],1),P[n].m(t,o))}for(j(),n=D.length;n<P.length;n+=1)C(n);H()}},i(e){if(!T){for(let e=0;e<D.length;e+=1)O(P[e]);T=!0}},o(e){P=P.filter(Boolean);for(let t=0;t<P.length;t+=1)V(P[t]);T=!1},d(e){e&&y(t),N(P,e),S=!1,R(k)}}}function Gs(e,t,n){let s,a;var{campaign:r}=t;const{campaignStore:l}=r;return re(e,l,(e=>n(1,a=e))),e.$$set=e=>{"campaign"in e&&n(0,r=e.campaign)},e.$$.update=()=>{3&e.$$.dirty&&n(2,s=r.initiative.getSortedInitiative(a))},[r,a,s,l,function(){r.initiative.addPartyToInitiative()},function(){a.initiativeRound=ie(this.value),l.set(a)}]}class Ys extends o{constructor(e){super(),u(this,e,Gs,Ws,h,{campaign:0})}}function Ks(e){let t,n,s,a,r,l,c,i=e[3].name+"";return{c(){t=f("button"),n=f("span"),a=d(),r=p(i),this.h()},l(e){t=g(e,"BUTTON",{class:!0});var s=$(t);n=g(s,"SPAN",{class:!0}),$(n).forEach(y),a=E(s),r=v(s,i),s.forEach(y),this.h()},h(){b(n,"class",s="mdi mdi-"+e[8](e[3])+" svelte-k5027j"),b(t,"class","svelte-k5027j")},m(s,i){w(s,t,i),I(t,n),I(t,a),I(t,r),l||(c=x(t,"click",e[9]),l=!0)},p(e,t){8&t&&s!==(s="mdi mdi-"+e[8](e[3])+" svelte-k5027j")&&b(n,"class",s),8&t&&i!==(i=e[3].name+"")&&T(r,i)},d(e){e&&y(t),l=!1,c()}}}function Js(e){let t,n;return{c(){t=f("span"),n=p(" Initiative"),this.h()},l(e){t=g(e,"SPAN",{class:!0}),$(t).forEach(y),n=v(e," Initiative"),this.h()},h(){b(t,"class","mdi mdi-sword-cross")},m(e,s){w(e,t,s),w(e,n,s)},p:M,d(e){e&&y(t),e&&y(n)}}}function Qs(e){let t,n,s,a,r=e[4].name+"";return{c(){t=f("span"),s=d(),a=p(r),this.h()},l(e){t=g(e,"SPAN",{class:!0}),$(t).forEach(y),s=E(e),a=v(e,r),this.h()},h(){b(t,"class",n="mdi mdi-"+e[8](e[4])+" svelte-k5027j")},m(e,n){w(e,t,n),w(e,s,n),w(e,a,n)},p(e,s){16&s&&n!==(n="mdi mdi-"+e[8](e[4])+" svelte-k5027j")&&b(t,"class",n),16&s&&r!==(r=e[4].name+"")&&T(a,r)},d(e){e&&y(t),e&&y(s),e&&y(a)}}}function Zs(e){let t,n,s,a,r,l,c,i=e[5].name+"";return{c(){t=f("button"),n=f("span"),a=d(),r=p(i),this.h()},l(e){t=g(e,"BUTTON",{class:!0});var s=$(t);n=g(s,"SPAN",{class:!0}),$(n).forEach(y),a=E(s),r=v(s,i),s.forEach(y),this.h()},h(){b(n,"class",s="mdi mdi-"+e[8](e[5])+" svelte-k5027j"),b(t,"class","svelte-k5027j")},m(s,i){w(s,t,i),I(t,n),I(t,a),I(t,r),l||(c=x(t,"click",e[10]),l=!0)},p(e,t){32&t&&s!==(s="mdi mdi-"+e[8](e[5])+" svelte-k5027j")&&b(n,"class",s),32&t&&i!==(i=e[5].name+"")&&T(r,i)},d(e){e&&y(t),l=!1,c()}}}function ea(e){let t,n,s;return n=new Ys({props:{campaign:e[0]}}),{c(){t=f("div"),S(n.$$.fragment),this.h()},l(e){t=g(e,"DIV",{class:!0});var s=$(t);k(n.$$.fragment,s),s.forEach(y),this.h()},h(){b(t,"class","floating svelte-k5027j")},m(e,a){w(e,t,a),P(n,t,null),s=!0},p(e,t){const s={};1&t&&(s.campaign=e[0]),n.$set(s)},i(e){s||(O(n.$$.fragment,e),s=!0)},o(e){V(n.$$.fragment,e),s=!1},d(e){e&&y(t),C(n)}}}function ta(e){let t,n,s,a,r,l,c,i,o,u,h,p=e[2]&&Ks(e);function v(e,t){return e[2]?Qs:Js}let T=v(e),N=T(e),S=e[2]&&Zs(e),k=e[1]&&ea(e);return{c(){t=f("section"),p&&p.c(),n=d(),s=f("button"),N.c(),r=d(),S&&S.c(),c=d(),k&&k.c(),i=m(),this.h()},l(e){t=g(e,"SECTION",{class:!0});var a=$(t);p&&p.l(a),n=E(a),s=g(a,"BUTTON",{class:!0});var l=$(s);N.l(l),l.forEach(y),r=E(a),S&&S.l(a),a.forEach(y),c=E(e),k&&k.l(e),i=m(),this.h()},h(){b(s,"class",a="current "+(e[1]&&"open")+" svelte-k5027j"),b(t,"class",l="initiativeBar "+(e[2]&&"active")+" svelte-k5027j")},m(a,l){w(a,t,l),p&&p.m(t,null),I(t,n),I(t,s),N.m(s,null),I(t,r),S&&S.m(t,null),w(a,c,l),k&&k.m(a,l),w(a,i,l),o=!0,u||(h=x(s,"click",e[7]),u=!0)},p(e,[r]){e[2]?p?p.p(e,r):(p=Ks(e),p.c(),p.m(t,n)):p&&(p.d(1),p=null),T===(T=v(e))&&N?N.p(e,r):(N.d(1),N=T(e),N&&(N.c(),N.m(s,null))),(!o||2&r&&a!==(a="current "+(e[1]&&"open")+" svelte-k5027j"))&&b(s,"class",a),e[2]?S?S.p(e,r):(S=Zs(e),S.c(),S.m(t,null)):S&&(S.d(1),S=null),(!o||4&r&&l!==(l="initiativeBar "+(e[2]&&"active")+" svelte-k5027j"))&&b(t,"class",l),e[1]?k?(k.p(e,r),2&r&&O(k,1)):(k=ea(e),k.c(),O(k,1),k.m(i.parentNode,i)):k&&(j(),V(k,1,1,(()=>{k=null})),H())},i(e){o||(O(k),o=!0)},o(e){V(k),o=!1},d(e){e&&y(t),p&&p.d(),N.d(),S&&S.d(),e&&y(c),k&&k.d(e),e&&y(i),u=!1,h()}}}function na(e,t,n){let s,a,r,l,c;var{campaign:i}=t;const{campaignStore:o}=i;re(e,o,(e=>n(11,c=e)));var u=!1;return e.$$set=e=>{"campaign"in e&&n(0,i=e.campaign)},e.$$.update=()=>{2049&e.$$.dirty&&n(2,s=i.initiative.getCombatStarted(c)),2049&e.$$.dirty&&n(3,[a,r,l]=i.initiative.getInitiativeOverview(c),a,(n(4,r),n(0,i),n(11,c)),(n(5,l),n(0,i),n(11,c)))},[i,u,s,a,r,l,o,function(){n(1,u=!u)},function(e){return e&&"monster"===e.type?"sword-cross":"account"},function(){i.initiative.previousInitiative()},function(){i.initiative.nextInitiative()},c]}class sa extends o{constructor(e){super(),u(this,e,na,ta,h,{campaign:0})}}function aa(e){let t,n,s,a,r=e[2]&&ra(),l=e[3]&&la(),c=e[4]&&ca(),i=e[5]&&ia();return{c(){t=f("div"),r&&r.c(),n=d(),l&&l.c(),s=d(),c&&c.c(),a=d(),i&&i.c(),this.h()},l(e){t=g(e,"DIV",{class:!0});var o=$(t);r&&r.l(o),n=E(o),l&&l.l(o),s=E(o),c&&c.l(o),a=E(o),i&&i.l(o),o.forEach(y),this.h()},h(){b(t,"class","itemsHeader svelte-1g3j8w3")},m(e,o){w(e,t,o),r&&r.m(t,null),I(t,n),l&&l.m(t,null),I(t,s),c&&c.m(t,null),I(t,a),i&&i.m(t,null)},p(e,o){e[2]?r||(r=ra(),r.c(),r.m(t,n)):r&&(r.d(1),r=null),e[3]?l||(l=la(),l.c(),l.m(t,s)):l&&(l.d(1),l=null),e[4]?c||(c=ca(),c.c(),c.m(t,a)):c&&(c.d(1),c=null),e[5]?i||(i=ia(),i.c(),i.m(t,null)):i&&(i.d(1),i=null)},d(e){e&&y(t),r&&r.d(),l&&l.d(),c&&c.d(),i&&i.d()}}}function ra(e){let t,n;return{c(){t=f("div"),n=p("Feature"),this.h()},l(e){t=g(e,"DIV",{class:!0});var s=$(t);n=v(s,"Feature"),s.forEach(y),this.h()},h(){b(t,"class","nameWrapper")},m(e,s){w(e,t,s),I(t,n)},d(e){e&&y(t)}}}function la(e){let t;return{c(){t=f("div"),this.h()},l(e){t=g(e,"DIV",{class:!0}),$(t).forEach(y),this.h()},h(){b(t,"class","wrapper centerText svelte-1g3j8w3")},m(e,n){w(e,t,n)},d(e){e&&y(t)}}}function ca(e){let t;return{c(){t=f("div"),this.h()},l(e){t=g(e,"DIV",{class:!0}),$(t).forEach(y),this.h()},h(){b(t,"class","wrapper centerText svelte-1g3j8w3")},m(e,n){w(e,t,n)},d(e){e&&y(t)}}}function ia(e){let t;return{c(){t=f("div"),this.h()},l(e){t=g(e,"DIV",{class:!0}),$(t).forEach(y),this.h()},h(){b(t,"class","wrapper dropdownIndicatorWrapper")},m(e,n){w(e,t,n)},d(e){e&&y(t)}}}function oa(e){let t,n,s,a,r,l,c,i,o,u,h,m,N=e[0].name+"";return{c(){t=f("div"),n=f("div"),s=f("p"),a=f("span"),l=d(),c=p(N),i=d(),o=f("p"),u=p(e[9]),this.h()},l(r){t=g(r,"DIV",{class:!0});var h=$(t);n=g(h,"DIV",{class:!0});var f=$(n);s=g(f,"P",{class:!0});var p=$(s);a=g(p,"SPAN",{class:!0}),$(a).forEach(y),l=E(p),c=v(p,N),p.forEach(y),i=E(f),o=g(f,"P",{class:!0});var d=$(o);u=v(d,e[9]),d.forEach(y),f.forEach(y),h.forEach(y),this.h()},h(){b(a,"class",r="mdi mdi-"+e[10]+" svelte-1g3j8w3"),b(s,"class","spellName svelte-1g3j8w3"),b(o,"class","spellDescription svelte-1g3j8w3"),b(n,"class","overflowWrapper"),b(t,"class","nameWrapper svelte-1g3j8w3")},m(r,f){w(r,t,f),I(t,n),I(n,s),I(s,a),I(s,l),I(s,c),I(n,i),I(n,o),I(o,u),h||(m=x(t,"click",e[12]),h=!0)},p(e,t){1024&t&&r!==(r="mdi mdi-"+e[10]+" svelte-1g3j8w3")&&b(a,"class",r),1&t&&N!==(N=e[0].name+"")&&T(c,N),512&t&&T(u,e[9])},d(e){e&&y(t),h=!1,m()}}}function ua(e){let t,n,s,a,r,l,c,i=e[11]&&ha(e),o="monster"===e[0].dataType&&fa(e);return{c(){t=f("div"),n=f("button"),s=f("span"),a=d(),i&&i.c(),r=d(),o&&o.c(),this.h()},l(e){t=g(e,"DIV",{class:!0});var l=$(t);n=g(l,"BUTTON",{class:!0});var c=$(n);s=g(c,"SPAN",{class:!0}),$(s).forEach(y),c.forEach(y),a=E(l),i&&i.l(l),r=E(l),o&&o.l(l),l.forEach(y),this.h()},h(){b(s,"class","mdi mdi-pin-outline svelte-1g3j8w3"),b(n,"class","svelte-1g3j8w3"),b(t,"class","buttonWrapper svelte-1g3j8w3")},m(u,h){w(u,t,h),I(t,n),I(n,s),I(t,a),i&&i.m(t,null),I(t,r),o&&o.m(t,null),l||(c=x(n,"click",e[15]),l=!0)},p(e,n){e[11]?i?i.p(e,n):(i=ha(e),i.c(),i.m(t,r)):i&&(i.d(1),i=null),"monster"===e[0].dataType?o?o.p(e,n):(o=fa(e),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},d(e){e&&y(t),i&&i.d(),o&&o.d(),l=!1,c()}}}function ha(e){let t,n,s,a;return{c(){t=f("button"),n=f("span"),this.h()},l(e){t=g(e,"BUTTON",{class:!0});var s=$(t);n=g(s,"SPAN",{class:!0}),$(n).forEach(y),s.forEach(y),this.h()},h(){b(n,"class","mdi mdi-book-open-page-variant svelte-1g3j8w3"),b(t,"class","svelte-1g3j8w3")},m(r,l){w(r,t,l),I(t,n),s||(a=x(t,"click",e[13]),s=!0)},p:M,d(e){e&&y(t),s=!1,a()}}}function fa(e){let t,n,s,a;return{c(){t=f("button"),n=f("span"),this.h()},l(e){t=g(e,"BUTTON",{class:!0});var s=$(t);n=g(s,"SPAN",{class:!0}),$(n).forEach(y),s.forEach(y),this.h()},h(){b(n,"class","mdi mdi-sword svelte-1g3j8w3"),b(t,"class","svelte-1g3j8w3")},m(r,l){w(r,t,l),I(t,n),s||(a=x(t,"click",e[14]),s=!0)},p:M,d(e){e&&y(t),s=!1,a()}}}function pa(e){let t,n,s,a,r,l,c,i=e[8]&&aa(e),o=e[2]&&oa(e),u=e[7]&&ua(e);function h(t){e[19](t)}let p={entry:e[0],campaign:e[1]};return void 0!==e[6]&&(p.open=e[6]),r=new Le({props:p}),B.push((()=>L(r,"open",h))),{c(){i&&i.c(),t=d(),n=f("div"),o&&o.c(),s=d(),u&&u.c(),a=d(),S(r.$$.fragment),this.h()},l(e){i&&i.l(e),t=E(e),n=g(e,"DIV",{class:!0});var l=$(n);o&&o.l(l),s=E(l),u&&u.l(l),l.forEach(y),a=E(e),k(r.$$.fragment,e),this.h()},h(){b(n,"class","searchResult svelte-1g3j8w3")},m(e,l){i&&i.m(e,l),w(e,t,l),w(e,n,l),o&&o.m(n,null),I(n,s),u&&u.m(n,null),w(e,a,l),P(r,e,l),c=!0},p(e,[a]){e[8]?i?i.p(e,a):(i=aa(e),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),e[2]?o?o.p(e,a):(o=oa(e),o.c(),o.m(n,s)):o&&(o.d(1),o=null),e[7]?u?u.p(e,a):(u=ua(e),u.c(),u.m(n,null)):u&&(u.d(1),u=null);const c={};1&a&&(c.entry=e[0]),2&a&&(c.campaign=e[1]),!l&&64&a&&(l=!0,c.open=e[6],_((()=>l=!1))),r.$set(c)},i(e){c||(O(r.$$.fragment,e),c=!0)},o(e){V(r.$$.fragment,e),c=!1},d(e){i&&i.d(e),e&&y(t),e&&y(n),o&&o.d(),u&&u.d(),e&&y(a),C(r,e)}}}function da(e,t,n){let s,a,r,l,c;var{entry:i}=t,{campaign:o=U("campaign")}=t,{showName:u=!0}=t,{showHeader:h=!1}=t,{showAddButton:f=!1}=t,{showRemoveButton:p=!1}=t,{showDetails:d=!1}=t,{index:m=null}=t,{firstItem:g=!1}=t,$=!1,v={class:"bag-personal",spell:"auto-fix",monster:"sword-cross",item:"treasure-chest",race:"account",condition:"chart-bubble",language:"translate",background:"bookshelf"};return e.$$set=e=>{"entry"in e&&n(0,i=e.entry),"campaign"in e&&n(1,o=e.campaign),"showName"in e&&n(2,u=e.showName),"showHeader"in e&&n(16,h=e.showHeader),"showAddButton"in e&&n(3,f=e.showAddButton),"showRemoveButton"in e&&n(4,p=e.showRemoveButton),"showDetails"in e&&n(5,d=e.showDetails),"index"in e&&n(17,m=e.index),"firstItem"in e&&n(18,g=e.firstItem)},e.$$.update=()=>{var t;2&e.$$.dirty&&n(7,s=!!o),458752&e.$$.dirty&&n(8,a=h&&(0===m||g)),1&e.$$.dirty&&n(9,r=i.getDescription(i)),1&e.$$.dirty&&n(10,(t=i.dataType,l=v[t])),1&e.$$.dirty&&n(11,c=void 0!==i.source&&void 0!==De[i.source.toLowerCase()]),64&e.$$.dirty&&console.log({popupOpen:$})},[i,o,u,f,p,d,$,s,a,r,l,c,function(){n(6,$=!0),console.log($)},function(){o.mainManager.showSourcePage(i.source,i.page)},function(){o.initiative.addMonster(i)},function(){o.screens.addItemToCurrentScreen(i.name,"hashRef",i.hash)},h,m,g,function(e){n(6,$=e)}]}class ma extends o{constructor(e){super(),u(this,e,da,pa,h,{entry:0,campaign:1,showName:2,showHeader:16,showAddButton:3,showRemoveButton:4,showDetails:5,index:17,firstItem:18})}}function ga(e,t,n){const s=e.slice();return s[10]=t[n],s}function $a(e){let t,n,s,a;const r=[ya,va],l=[];function c(e,t){return e[5]?0:1}return n=c(e),s=l[n]=r[n](e),{c(){t=f("div"),s.c(),this.h()},l(e){t=g(e,"DIV",{class:!0});var n=$(t);s.l(n),n.forEach(y),this.h()},h(){b(t,"class","results svelte-56b6y6")},m(e,s){w(e,t,s),l[n].m(t,null),a=!0},p(e,a){let i=n;n=c(e),n===i?l[n].p(e,a):(j(),V(l[i],1,1,(()=>{l[i]=null})),H(),s=l[n],s?s.p(e,a):(s=l[n]=r[n](e),s.c()),O(s,1),s.m(t,null))},i(e){a||(O(s),a=!0)},o(e){V(s),a=!1},d(e){e&&y(t),l[n].d()}}}function va(e){let t,n;return{c(){t=f("p"),n=p("No results")},l(e){t=g(e,"P",{});var s=$(t);n=v(s,"No results"),s.forEach(y)},m(e,s){w(e,t,s),I(t,n)},p:M,i:M,o:M,d(e){e&&y(t)}}}function ya(e){let t,n,s=e[2],a=[];for(let l=0;l<s.length;l+=1)a[l]=Ea(ga(e,s,l));const r=e=>V(a[e],1,1,(()=>{a[e]=null}));return{c(){for(let e=0;e<a.length;e+=1)a[e].c();t=m()},l(e){for(let t=0;t<a.length;t+=1)a[t].l(e);t=m()},m(e,s){for(let t=0;t<a.length;t+=1)a[t].m(e,s);w(e,t,s),n=!0},p(e,n){if(5&n){let l;for(s=e[2],l=0;l<s.length;l+=1){const r=ga(e,s,l);a[l]?(a[l].p(r,n),O(a[l],1)):(a[l]=Ea(r),a[l].c(),O(a[l],1),a[l].m(t.parentNode,t))}for(j(),l=s.length;l<a.length;l+=1)r(l);H()}},i(e){if(!n){for(let e=0;e<s.length;e+=1)O(a[e]);n=!0}},o(e){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)V(a[t]);n=!1},d(e){N(a,e),e&&y(t)}}}function Ea(e){let t,n;return t=new ma({props:{entry:e[10],campaign:e[0]}}),{c(){S(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,s){P(t,e,s),n=!0},p(e,n){const s={};4&n&&(s.entry=e[10]),1&n&&(s.campaign=e[0]),t.$set(s)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function ba(e){let t,n,s,a,r,l,c=!e[4]&&e[3]&&$a(e);return{c(){t=f("section"),n=f("input"),s=d(),c&&c.c(),this.h()},l(e){t=g(e,"SECTION",{class:!0});var a=$(t);n=g(a,"INPUT",{class:!0,placeholder:!0}),s=E(a),c&&c.l(a),a.forEach(y),this.h()},h(){b(n,"class","searchBar svelte-56b6y6"),b(n,"placeholder","Search"),b(t,"class","svelte-56b6y6")},m(i,o){w(i,t,o),I(t,n),A(n,e[1]),I(t,s),c&&c.m(t,null),a=!0,r||(l=[x(n,"input",e[8]),x(n,"focus",e[7]),le(we.call(null,t,e[6]))],r=!0)},p(e,[s]){2&s&&n.value!==e[1]&&A(n,e[1]),!e[4]&&e[3]?c?(c.p(e,s),24&s&&O(c,1)):(c=$a(e),c.c(),O(c,1),c.m(t,null)):c&&(j(),V(c,1,1,(()=>{c=null})),H())},i(e){a||(O(c),a=!0)},o(e){V(c),a=!1},d(e){e&&y(t),c&&c.d(),r=!1,R(l)}}}function wa(e,t,n){let s,a,r;var{campaign:l}=t,c=!1;var i="",o=Object.values(Be);return e.$$set=e=>{"campaign"in e&&n(0,l=e.campaign)},e.$$.update=()=>{2&e.$$.dirty&&n(4,s=""===i),2&e.$$.dirty&&n(2,r=_e(o,i).filter((e=>e.score>0)).sort(((e,t)=>t.score-e.score)).slice(0,15).reverse()),4&e.$$.dirty&&n(5,a=0!==r.length),4&e.$$.dirty&&console.log(r)},[l,i,r,c,s,a,function(){n(3,c=!1)},function(){n(3,c=!0)},function(){i=this.value,n(1,i)}]}class Ia extends o{constructor(e){super(),u(this,e,wa,ba,h,{campaign:0})}}const xa=Ie+"/f/dmHeroes";function Ta(e){return{c:M,l:M,m:M,p:M,i:M,o:M,d:M}}function Na(e){let t,n,s=e[0]&&Sa(e);return{c(){s&&s.c(),t=m()},l(e){s&&s.l(e),t=m()},m(e,a){s&&s.m(e,a),w(e,t,a),n=!0},p(e,n){e[0]?s?(s.p(e,n),1&n&&O(s,1)):(s=Sa(e),s.c(),O(s,1),s.m(t.parentNode,t)):s&&(j(),V(s,1,1,(()=>{s=null})),H())},i(e){n||(O(s),n=!0)},o(e){V(s),n=!1},d(e){s&&s.d(e),e&&y(t)}}}function Sa(e){let t,n;return t=new It({props:{data:e[0]}}),{c(){S(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,s){P(t,e,s),n=!0},p(e,n){const s={};1&n&&(s.data=e[0]),t.$set(s)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function ka(e){let t;return{c(){t=p("Generating...")},l(e){t=v(e,"Generating...")},m(e,n){w(e,t,n)},p:M,i:M,o:M,d(e){e&&y(t)}}}function Da(e){let t,n,s,a,r,l,c,i,o,u,h,m,T,N={ctx:e,current:null,token:null,hasCatch:!1,pending:ka,then:Na,catch:Ta,blocks:[,,,]};return ue(e[1],N),{c(){N.block.c(),t=d(),n=f("div"),s=f("button"),a=p("Generate"),r=d(),l=f("button"),c=f("span"),i=d(),o=f("button"),u=f("span"),this.h()},l(e){N.block.l(e),t=E(e),n=g(e,"DIV",{class:!0});var h=$(n);s=g(h,"BUTTON",{class:!0});var f=$(s);a=v(f,"Generate"),f.forEach(y),r=E(h),l=g(h,"BUTTON",{class:!0});var p=$(l);c=g(p,"SPAN",{class:!0}),$(c).forEach(y),p.forEach(y),i=E(h),o=g(h,"BUTTON",{class:!0});var d=$(o);u=g(d,"SPAN",{class:!0}),$(u).forEach(y),d.forEach(y),h.forEach(y),this.h()},h(){b(s,"class","purple svelte-1y9fwvr"),b(c,"class","mdi mdi-pencil"),b(l,"class","svelte-1y9fwvr"),b(u,"class","mdi mdi-pin"),b(o,"class","svelte-1y9fwvr"),b(n,"class","buttons svelte-1y9fwvr")},m(f,p){N.block.m(f,N.anchor=p),N.mount=()=>t.parentNode,N.anchor=t,w(f,t,p),w(f,n,p),I(n,s),I(s,a),I(n,r),I(n,l),I(l,c),I(n,i),I(n,o),I(o,u),h=!0,m||(T=[x(s,"click",e[2]),x(o,"click",e[3])],m=!0)},p(t,[n]){he(N,e=t,n)},i(e){h||(O(N.block),h=!0)},o(e){for(let t=0;t<3;t+=1){const e=N.blocks[t];V(e)}h=!1},d(e){N.block.d(e),N.token=null,N=null,e&&y(t),e&&y(n),m=!1,R(T)}}}function Pa(e,t,n){var s,{campaign:a=U("campaign")}=t;function r(){(async function(e={}){return e=i(c({},e),{race:"random",sex:"random"}),await fetch(xa+`?race=${e.race}&sex=${e.sex}`).then((e=>e.json()))})().then((e=>{n(0,s=e)}))}return r(),e.$$set=e=>{"campaign"in e&&n(4,a=e.campaign)},[s,undefined,r,function(){a.screens.addItemToCurrentScreen(s.fullName,"npc",s)},a]}class Oa extends o{constructor(e){super(),u(this,e,Pa,Da,h,{campaign:4})}}function Va(e){let t,n,s,a,r,l;return n=new Oa({}),{c(){t=f("div"),S(n.$$.fragment),this.h()},l(e){t=g(e,"DIV",{class:!0});var s=$(t);k(n.$$.fragment,s),s.forEach(y),this.h()},h(){b(t,"class","npcDrawer svelte-lsmgev")},m(c,i){w(c,t,i),P(n,t,null),a=!0,r||(l=le(s=we.call(null,t,e[2])),r=!0)},p:M,i(e){a||(O(n.$$.fragment,e),a=!0)},o(e){V(n.$$.fragment,e),a=!1},d(e){e&&y(t),C(n),r=!1,l()}}}function Ca(e){let t,n,s,a,r,l,c,i=e[0]&&Va(e);return{c(){t=f("button"),n=f("span"),s=d(),i&&i.c(),a=m(),this.h()},l(e){t=g(e,"BUTTON",{class:!0});var r=$(t);n=g(r,"SPAN",{class:!0}),$(n).forEach(y),r.forEach(y),s=E(e),i&&i.l(e),a=m(),this.h()},h(){b(n,"class","mdi mdi-account svelte-lsmgev"),b(t,"class","svelte-lsmgev")},m(o,u){w(o,t,u),I(t,n),w(o,s,u),i&&i.m(o,u),w(o,a,u),r=!0,l||(c=x(t,"click",e[1]),l=!0)},p(e,[t]){e[0]?i?(i.p(e,t),1&t&&O(i,1)):(i=Va(e),i.c(),O(i,1),i.m(a.parentNode,a)):i&&(j(),V(i,1,1,(()=>{i=null})),H())},i(e){r||(O(i),r=!0)},o(e){V(i),r=!1},d(e){e&&y(t),e&&y(s),i&&i.d(e),e&&y(a),l=!1,c()}}}function Ba(e,t,n){var s=!1,a=!0;return[s,function(){n(0,s=!0),a=!0},function(){a?a=!1:n(0,s=!1)}]}class ja extends o{constructor(e){super(),u(this,e,Ba,Ca,h,{})}}function Ha(e){let t,n,s,a;return{c(){t=f("button"),n=f("span"),this.h()},l(e){t=g(e,"BUTTON",{class:!0});var s=$(t);n=g(s,"SPAN",{class:!0}),$(n).forEach(y),s.forEach(y),this.h()},h(){b(n,"class","mdi mdi-note-outline svelte-dzovid"),b(t,"class","svelte-dzovid")},m(r,l){w(r,t,l),I(t,n),s||(a=x(t,"click",e[0]),s=!0)},p:M,i:M,o:M,d(e){e&&y(t),s=!1,a()}}}function Aa(e,t,n){var{campaign:s=U("campaign")}=t;return e.$$set=e=>{"campaign"in e&&n(1,s=e.campaign)},[function(){s.screens.addItemToCurrentScreen("New note","note",{content:""})},s]}class Ma extends o{constructor(e){super(),u(this,e,Aa,Ha,h,{campaign:1})}}function Ra(e){let t,n,s,a,r,l,c,i,o,u,h,p,m,v,x,T,N,D,B,A,M;n=new Re({props:{store:e[0].campaignStore}});var R=e[3];function U(e){return{props:{campaign:e[0]}}}return R&&(r=new R(U(e))),i=new ms({props:{campaign:e[0]}}),u=new ws({}),p=new sa({props:{campaign:e[0]}}),v=new Os({props:{campaign:e[0]}}),T=new Ia({props:{campaign:e[0]}}),D=new ja({}),A=new Ma({}),{c(){t=f("main"),S(n.$$.fragment),s=d(),a=f("section"),r&&S(r.$$.fragment),l=d(),c=f("nav"),S(i.$$.fragment),o=d(),S(u.$$.fragment),h=d(),S(p.$$.fragment),m=d(),S(v.$$.fragment),x=d(),S(T.$$.fragment),N=d(),S(D.$$.fragment),B=d(),S(A.$$.fragment),this.h()},l(e){t=g(e,"MAIN",{class:!0});var f=$(t);k(n.$$.fragment,f),s=E(f),a=g(f,"SECTION",{class:!0});var d=$(a);r&&k(r.$$.fragment,d),d.forEach(y),l=E(f),c=g(f,"NAV",{class:!0});var b=$(c);k(i.$$.fragment,b),o=E(b),k(u.$$.fragment,b),h=E(b),k(p.$$.fragment,b),m=E(b),k(v.$$.fragment,b),x=E(b),k(T.$$.fragment,b),N=E(b),k(D.$$.fragment,b),B=E(b),k(A.$$.fragment,b),b.forEach(y),f.forEach(y),this.h()},h(){b(a,"class","mainArea svelte-wmyv5q"),b(c,"class","toolBar svelte-wmyv5q"),b(t,"class","svelte-wmyv5q")},m(e,f){w(e,t,f),P(n,t,null),I(t,s),I(t,a),r&&P(r,a,null),I(t,l),I(t,c),P(i,c,null),I(c,o),P(u,c,null),I(c,h),P(p,c,null),I(c,m),P(v,c,null),I(c,x),P(T,c,null),I(c,N),P(D,c,null),I(c,B),P(A,c,null),M=!0},p(e,t){const s={};1&t&&(s.store=e[0].campaignStore),n.$set(s);const l={};if(1&t&&(l.campaign=e[0]),R!==(R=e[3])){if(r){j();const e=r;V(e.$$.fragment,1,0,(()=>{C(e,1)})),H()}R?(r=new R(U(e)),S(r.$$.fragment),O(r.$$.fragment,1),P(r,a,null)):r=null}else R&&r.$set(l);const c={};1&t&&(c.campaign=e[0]),i.$set(c);const o={};1&t&&(o.campaign=e[0]),p.$set(o);const u={};1&t&&(u.campaign=e[0]),v.$set(u);const h={};1&t&&(h.campaign=e[0]),T.$set(h)},i(e){M||(O(n.$$.fragment,e),r&&O(r.$$.fragment,e),O(i.$$.fragment,e),O(u.$$.fragment,e),O(p.$$.fragment,e),O(v.$$.fragment,e),O(T.$$.fragment,e),O(D.$$.fragment,e),O(A.$$.fragment,e),M=!0)},o(e){V(n.$$.fragment,e),r&&V(r.$$.fragment,e),V(i.$$.fragment,e),V(u.$$.fragment,e),V(p.$$.fragment,e),V(v.$$.fragment,e),V(T.$$.fragment,e),V(D.$$.fragment,e),V(A.$$.fragment,e),M=!1},d(e){e&&y(t),C(n),r&&C(r),C(i),C(u),C(p),C(v),C(T),C(D),C(A)}}}function Ua(e){let t,n,s,a,r,l;function c(t){e[7](t)}let i={datasetHash:e[2],$$slots:{default:[Ra]},$$scope:{ctx:e}};return void 0!==e[4].dataset&&(i.changeDataset=e[4].dataset),t=new Me({props:i}),B.push((()=>L(t,"changeDataset",c))),{c(){S(t.$$.fragment),s=d()},l(e){k(t.$$.fragment,e),s=E(e)},m(e,n){P(t,e,n),w(e,s,n),a=!0,r||(l=x(document.body,"keydown",La),r=!0)},p(e,[s]){const a={};4&s&&(a.datasetHash=e[2]),521&s&&(a.$$scope={dirty:s,ctx:e}),!n&&16&s&&(n=!0,a.changeDataset=e[4].dataset,_((()=>n=!1))),t.$set(a)},i(e){a||(O(t.$$.fragment,e),a=!0)},o(e){V(t.$$.fragment,e),a=!1},d(e){C(t,e),e&&y(s),r=!1,l()}}}function La(e){if(e.ctrlKey){var{code:t}=e;const n={KeyU:()=>playStoredPlaylist("peaceful"),KeyI:()=>playStoredPlaylist("inn"),KeyO:()=>playStoredPlaylist("combat"),Backslash:()=>manualStopPlaylist()};n[t]&&(e.preventDefault(),n[t]())}}function _a(e,t,n){let s,a,r,l,c,i,o=M,u=M;e.$$.on_destroy.push((()=>o())),e.$$.on_destroy.push((()=>u()));var{params:h}=t;return e.$$set=e=>{"params"in e&&n(5,h=e.params)},e.$$.update=()=>{32&e.$$.dirty&&(n(0,s=os(h.campaignId)),o(),o=q(s,(e=>n(6,c=e)))),64&e.$$.dirty&&(n(1,a=c.campaignStore),u(),u=q(a,(e=>n(4,i=e)))),64&e.$$.dirty&&n(2,r=c.campaignStore.get().dataset),64&e.$$.dirty&&n(3,l=c.mainManager.get().component),1&e.$$.dirty&&(window.campaign=s),1&e.$$.dirty&&J("campaign",s)},[s,a,r,l,i,h,c,function(t){e.$$.not_equal(i.dataset,t)&&(i.dataset=t,a.set(i))}]}export default class extends o{constructor(e){super(),u(this,e,_a,Ua,h,{params:5})}}
