var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,l=(t,n,s)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s,i=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&l(e,n,t[n]);if(s)for(var n of s(t))r.call(t,n)&&l(e,n,t[n]);return e},c=(e,s)=>t(e,n(s));import{S as o,i as u,s as h,e as f,t as p,f as d,J as m,g,h as $,c as v,d as y,j as E,k as w,a as b,l as I,u as x,b as T,W as S,L as N,M as P,X as D,N as k,H as O,I as V,O as C,Y as H,C as j,G as B,_ as A,n as M,$ as R,a0 as U,a1 as _,a2 as L,z,a3 as X,a4 as q,a5 as F,v as W,a6 as G,a7 as K,a8 as Y,T as J,a9 as Q,E as Z,F as ee,aa as te,ab as ne,ac as se,Q as ae,ad as re,ae as le,af as ie,ag as ce}from"./vendor.js";import{g as oe,E as ue,C as he,I as fe,M as pe,S as de,a as me,b as ge,P as $e,c as ve,d as ye}from"./SpellPopup.js";import{d as Ee,t as we,m as be,c as Ie,g as xe,a as Te,b as Se,e as Ne,f as Pe,i as De,s as ke}from"./index.js";import{B as Oe,R as Ve,F as Ce,D as He,S as je}from"./DatasetGuard.js";import{L as Be,D as Ae,s as Me}from"./searchResultScores.js";import{G as Re,C as Ue,A as _e,T as Le}from"./GenericTable.js";const ze={id:"root",name:"DM Screen",items:[]};var Xe,qe;(qe=Xe||(Xe={})).HASH_REF="hashRef",qe.NPC="npc",qe.NOTE="note";const Fe={id:null,type:null,data:null,top:32,left:32,width:300,height:300,index:1,pinned:!1};const We={version:1,name:"New Campaign",id:null,dataset:null,currentManager:"default",initiative:[],currentScreenId:"root",screens:[ze],partyMembers:[],currentInitiativeIndex:0,initiativeRound:1,savedEncounters:[],encounters:[]},Ge={id:null,name:"New party member",level:1,pp:10,conditions:[]},Ke=[[25,50,75,100],[50,100,150,200],[75,150,225,400],[125,250,375,500],[250,500,750,1100],[300,600,900,1400],[250,750,1100,1700],[450,900,1400,2100],[550,1100,1600,2400],[600,1200,1900,2800],[800,1600,2400,3600],[1e3,2e3,3e3,4500],[1100,2200,3400,5100],[1250,2500,3800,5700],[1400,2800,4300,6400],[1600,3200,4800,7200],[2e3,3900,5900,8800],[2100,4200,6300,9500],[2400,4900,7300,10900],[2800,5700,8500,127e3]],Ye={1:300,2:600,3:1200,4:1700,5:3500,6:4e3,7:5e3,8:6e3,9:7500,10:9e3,11:10500,12:11500,13:13500,14:15e3,15:18e3,16:2e4,17:25e3,18:27e3,19:3e4,20:4e4};const Je={initiative:0,type:"manual",name:"New initiative entry",deathSaves:{fails:0,successes:0},currentHealth:0,maxHealth:0,data:null};function Qe(){return Ee(Je)}function Ze(e,t,n){const s=e.slice();return s[13]=t[n],s[15]=n,s}function et(e,t,n){const s=e.slice();return s[16]=t[n],s}function tt(e){let t,n=e[13].subsections,s=[];for(let a=0;a<n.length;a+=1)s[a]=nt(et(e,n,a));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=m()},l(e){for(let t=0;t<s.length;t+=1)s[t].l(e);t=m()},m(e,n){for(let t=0;t<s.length;t+=1)s[t].m(e,n);b(e,t,n)},p(e,a){if(80&a){let r;for(n=e[13].subsections,r=0;r<n.length;r+=1){const l=et(e,n,r);s[r]?s[r].p(l,a):(s[r]=nt(l),s[r].c(),s[r].m(t.parentNode,t))}for(;r<s.length;r+=1)s[r].d(1);s.length=n.length}},d(e){S(s,e),e&&y(t)}}}function nt(e){let t,n,s,a,r=e[16].name+"";function l(){return e[10](e[16])}return{c(){t=f("div"),n=p(r),this.h()},l(e){t=g(e,"DIV",{class:!0});var s=$(t);n=v(s,r),s.forEach(y),this.h()},h(){w(t,"class","subsection svelte-1ekbfpl")},m(e,r){b(e,t,r),I(t,n),s||(a=x(t,"click",l),s=!0)},p(t,s){e=t,16&s&&r!==(r=e[16].name+"")&&T(n,r)},d(e){e&&y(t),s=!1,a()}}}function st(e){let t,n,s,a,r,l,i,c=e[13].name+"";function o(){return e[9](e[15])}let u=e[15]===e[0]&&tt(e);return{c(){t=f("div"),n=p(c),a=d(),u&&u.c(),r=m(),this.h()},l(e){t=g(e,"DIV",{class:!0});var s=$(t);n=v(s,c),s.forEach(y),a=E(e),u&&u.l(e),r=m(),this.h()},h(){w(t,"class",s="section "+(e[15]===e[0]&&"current")+" svelte-1ekbfpl")},m(e,s){b(e,t,s),I(t,n),b(e,a,s),u&&u.m(e,s),b(e,r,s),l||(i=x(t,"click",o),l=!0)},p(a,l){e=a,16&l&&c!==(c=e[13].name+"")&&T(n,c),1&l&&s!==(s="section "+(e[15]===e[0]&&"current")+" svelte-1ekbfpl")&&w(t,"class",s),e[15]===e[0]?u?u.p(e,l):(u=tt(e),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},d(e){e&&y(t),e&&y(a),u&&u.d(e),e&&y(r),l=!1,i()}}}function at(e){let t,n,s,a,r,l,i,c,o=e[4],u=[];for(let h=0;h<o.length;h+=1)u[h]=st(Ze(e,o,h));return r=new ue({props:{entries:e[5].entries}}),{c(){t=f("section"),n=f("div");for(let e=0;e<u.length;e+=1)u[e].c();s=d(),a=f("div"),N(r.$$.fragment),this.h()},l(e){t=g(e,"SECTION",{class:!0});var l=$(t);n=g(l,"DIV",{class:!0,style:!0});var i=$(n);for(let t=0;t<u.length;t+=1)u[t].l(i);i.forEach(y),s=E(l),a=g(l,"DIV",{class:!0});var c=$(a);P(r.$$.fragment,c),c.forEach(y),l.forEach(y),this.h()},h(){w(n,"class","sectionOverview svelte-1ekbfpl"),D(n,"margin-top",e[3]+"px"),w(a,"class","entries svelte-1ekbfpl"),w(t,"class","svelte-1ekbfpl")},m(o,h){b(o,t,h),I(t,n);for(let e=0;e<u.length;e+=1)u[e].m(n,null);e[11](n),I(t,s),I(t,a),k(r,a,null),e[12](t),l=!0,i||(c=x(t,"scroll",e[7]),i=!0)},p(e,[t]){if(81&t){let s;for(o=e[4],s=0;s<o.length;s+=1){const a=Ze(e,o,s);u[s]?u[s].p(a,t):(u[s]=st(a),u[s].c(),u[s].m(n,null))}for(;s<u.length;s+=1)u[s].d(1);u.length=o.length}(!l||8&t)&&D(n,"margin-top",e[3]+"px");const s={};32&t&&(s.entries=e[5].entries),r.$set(s)},i(e){l||(O(r.$$.fragment,e),l=!0)},o(e){V(r.$$.fragment,e),l=!1},d(n){n&&y(t),S(u,n),e[11](null),C(r),e[12](null),i=!1,c()}}}function rt(e,t,n){let s,a;var r,l,{adventure:i}=t,c=0,o=0;function u(e){let t=document.getElementById(e);t&&n(1,r.scrollTop=t.offsetTop,r)}return e.$$set=e=>{"adventure"in e&&n(8,i=e.adventure)},e.$$.update=()=>{256&e.$$.dirty&&n(4,s=function(e){return e.data,e.data.map((e=>{let t={name:e.name,subsections:[]};for(const n of e.entries)"object"==typeof n&&"entries"===n.type&&t.subsections.push({name:n.name,id:n.id});return t}))}(i)),257&e.$$.dirty&&n(5,a=i.data[c])},[c,r,l,o,s,a,u,function(){n(3,o=r.scrollTop)},i,e=>n(0,c=e),e=>u(e.id),function(e){H[e?"unshift":"push"]((()=>{n(2,l=e)}))},function(e){H[e?"unshift":"push"]((()=>{n(1,r=e)}))}]}class lt extends o{constructor(e){super(),u(this,e,rt,at,h,{adventure:8})}}class it extends o{constructor(e){super(),u(this,e,null,null,h,{})}}function ct(e){let t,n,s;var a=e[1];function r(e){return{props:{data:e[0]}}}return a&&(t=new a(r(e))),{c(){t&&N(t.$$.fragment),n=m()},l(e){t&&P(t.$$.fragment,e),n=m()},m(e,a){t&&k(t,e,a),b(e,n,a),s=!0},p(e,[s]){const l={};if(1&s&&(l.data=e[0]),a!==(a=e[1])){if(t){j();const e=t;V(e.$$.fragment,1,0,(()=>{C(e,1)})),B()}a?(t=new a(r(e)),N(t.$$.fragment),O(t.$$.fragment,1),k(t,n.parentNode,n)):t=null}else a&&t.$set(l)},i(e){s||(t&&O(t.$$.fragment,e),s=!0)},o(e){t&&V(t.$$.fragment,e),s=!1},d(e){e&&y(n),t&&C(t,e)}}}function ot(e,t,n){let s,a;var{data:r}=t,{hash:l}=t;const i={background:Oe,class:he,item:fe,monster:pe,race:Ve,spell:de,adventure:lt,language:Be};return e.$$set=e=>{"data"in e&&n(2,r=e.data),"hash"in e&&n(3,l=e.hash)},e.$$.update=()=>{var t,c;12&e.$$.dirty&&n(0,(t=l,s=r||we[t])),1&e.$$.dirty&&n(1,(c=s.dataType,a=i[c]||it))},[s,a,r,l]}class ut extends o{constructor(e){super(),u(this,e,ot,ct,h,{data:2,hash:3})}}function ht(e,t,n){const s=e.slice();return s[1]=t[n],s}function ft(e,t,n){const s=e.slice();return s[4]=t[n],s}function pt(e,t,n){const s=e.slice();return s[7]=t[n],s}function dt(e){let t,n,s;return{c(){t=f("img"),this.h()},l(e){t=g(e,"IMG",{src:!0,style:!0,alt:!0,class:!0}),this.h()},h(){t.src!==(n=e[7].src)&&w(t,"src",n),w(t,"style",s=e[7].transformStyle),w(t,"alt",""),w(t,"class","svelte-54hkii")},m(e,n){b(e,t,n)},p(e,a){1&a&&t.src!==(n=e[7].src)&&w(t,"src",n),1&a&&s!==(s=e[7].transformStyle)&&w(t,"style",s)},d(e){e&&y(t)}}}function mt(e){let t,n,s,a;return n=new me({props:{line:e[4]}}),{c(){t=f("li"),N(n.$$.fragment),s=d()},l(e){t=g(e,"LI",{});var a=$(t);P(n.$$.fragment,a),s=E(a),a.forEach(y)},m(e,r){b(e,t,r),k(n,t,null),I(t,s),a=!0},p(e,t){const s={};1&t&&(s.line=e[4]),n.$set(s)},i(e){a||(O(n.$$.fragment,e),a=!0)},o(e){V(n.$$.fragment,e),a=!1},d(e){e&&y(t),C(n)}}}function gt(e){let t,n,s,a;return n=new me({props:{line:e[1]}}),{c(){t=f("li"),N(n.$$.fragment),s=d()},l(e){t=g(e,"LI",{});var a=$(t);P(n.$$.fragment,a),s=E(a),a.forEach(y)},m(e,r){b(e,t,r),k(n,t,null),I(t,s),a=!0},p(e,t){const s={};1&t&&(s.line=e[1]),n.$set(s)},i(e){a||(O(n.$$.fragment,e),a=!0)},o(e){V(n.$$.fragment,e),a=!1},d(e){e&&y(t),C(n)}}}function $t(e){let t,n,s,a,r,l,i,c,o,u,h,m,x,N,P,D,k,C,H,A,M,R,U,_,L,z,X,q,F,W,G,K,Y,J,Q,Z,ee,te,ne,se,ae,re,le,ie,ce,oe,ue,he,fe,pe,de,me,ge,$e,ve=e[0].fullName+"",ye=e[0].sex+"",Ee=e[0].race+"",we=e[0].voice+"",be=e[0].voiceTrait+"",Ie=e[0].age+"",xe=e[0].stageOfLife+"",Te=e[0].profession+"",Se=e[0].imageLayers,Ne=[];for(let f=0;f<Se.length;f+=1)Ne[f]=dt(pt(e,Se,f));let Pe=e[0].traits,De=[];for(let f=0;f<Pe.length;f+=1)De[f]=mt(ft(e,Pe,f));const ke=e=>V(De[e],1,1,(()=>{De[e]=null}));let Oe=e[0].story,Ve=[];for(let f=0;f<Oe.length;f+=1)Ve[f]=gt(ht(e,Oe,f));const Ce=e=>V(Ve[e],1,1,(()=>{Ve[e]=null}));return{c(){t=f("section"),n=f("header"),s=f("div");for(let e=0;e<Ne.length;e+=1)Ne[e].c();a=d(),r=f("div"),l=f("h2"),i=p(ve),c=d(),o=f("h4"),u=p(ye),h=d(),m=p(Ee),x=d(),N=f("div"),P=f("p"),D=f("b"),k=p("Voice"),C=p(": "),H=p(we),A=d(),M=f("p"),R=f("b"),U=p("Trait"),_=p(": "),L=p(be),z=d(),X=f("p"),q=f("b"),F=p("Age"),W=p(": "),G=p(Ie),K=p(" ("),Y=p(xe),J=p(")"),Q=d(),Z=f("p"),ee=f("b"),te=p("Profession"),ne=p(": "),se=p(Te),ae=d(),re=f("div"),le=f("div"),ie=f("h6"),ce=p("Traits"),oe=d(),ue=f("ol");for(let e=0;e<De.length;e+=1)De[e].c();he=d(),fe=f("div"),pe=f("h6"),de=p("Story"),me=d(),ge=f("ol");for(let e=0;e<Ve.length;e+=1)Ve[e].c();this.h()},l(e){t=g(e,"SECTION",{});var f=$(t);n=g(f,"HEADER",{class:!0});var p=$(n);s=g(p,"DIV",{class:!0});var d=$(s);for(let t=0;t<Ne.length;t+=1)Ne[t].l(d);d.forEach(y),a=E(p),r=g(p,"DIV",{class:!0});var w=$(r);l=g(w,"H2",{class:!0});var b=$(l);i=v(b,ve),b.forEach(y),c=E(w),o=g(w,"H4",{class:!0});var I=$(o);u=v(I,ye),h=E(I),m=v(I,Ee),I.forEach(y),x=E(w),N=g(w,"DIV",{class:!0});var T=$(N);P=g(T,"P",{class:!0});var S=$(P);D=g(S,"B",{});var O=$(D);k=v(O,"Voice"),O.forEach(y),C=v(S,": "),H=v(S,we),S.forEach(y),A=E(T),M=g(T,"P",{class:!0});var V=$(M);R=g(V,"B",{});var j=$(R);U=v(j,"Trait"),j.forEach(y),_=v(V,": "),L=v(V,be),V.forEach(y),z=E(T),X=g(T,"P",{class:!0});var B=$(X);q=g(B,"B",{});var $e=$(q);F=v($e,"Age"),$e.forEach(y),W=v(B,": "),G=v(B,Ie),K=v(B," ("),Y=v(B,xe),J=v(B,")"),B.forEach(y),Q=E(T),Z=g(T,"P",{class:!0});var Se=$(Z);ee=g(Se,"B",{});var Pe=$(ee);te=v(Pe,"Profession"),Pe.forEach(y),ne=v(Se,": "),se=v(Se,Te),Se.forEach(y),T.forEach(y),w.forEach(y),p.forEach(y),ae=E(f),re=g(f,"DIV",{class:!0});var ke=$(re);le=g(ke,"DIV",{class:!0});var Oe=$(le);ie=g(Oe,"H6",{class:!0});var Ce=$(ie);ce=v(Ce,"Traits"),Ce.forEach(y),oe=E(Oe),ue=g(Oe,"OL",{});var He=$(ue);for(let t=0;t<De.length;t+=1)De[t].l(He);He.forEach(y),Oe.forEach(y),he=E(ke),fe=g(ke,"DIV",{class:!0});var je=$(fe);pe=g(je,"H6",{class:!0});var Be=$(pe);de=v(Be,"Story"),Be.forEach(y),me=E(je),ge=g(je,"OL",{});var Ae=$(ge);for(let t=0;t<Ve.length;t+=1)Ve[t].l(Ae);Ae.forEach(y),je.forEach(y),ke.forEach(y),f.forEach(y),this.h()},h(){w(s,"class","imageWrapper svelte-54hkii"),w(l,"class","svelte-54hkii"),w(o,"class","svelte-54hkii"),w(P,"class","svelte-54hkii"),w(M,"class","svelte-54hkii"),w(X,"class","svelte-54hkii"),w(Z,"class","svelte-54hkii"),w(N,"class","details svelte-54hkii"),w(r,"class","generalWrapper svelte-54hkii"),w(n,"class","svelte-54hkii"),w(ie,"class","svelte-54hkii"),w(le,"class","svelte-54hkii"),w(pe,"class","svelte-54hkii"),w(fe,"class","svelte-54hkii"),w(re,"class","content svelte-54hkii")},m(e,f){b(e,t,f),I(t,n),I(n,s);for(let t=0;t<Ne.length;t+=1)Ne[t].m(s,null);I(n,a),I(n,r),I(r,l),I(l,i),I(r,c),I(r,o),I(o,u),I(o,h),I(o,m),I(r,x),I(r,N),I(N,P),I(P,D),I(D,k),I(P,C),I(P,H),I(N,A),I(N,M),I(M,R),I(R,U),I(M,_),I(M,L),I(N,z),I(N,X),I(X,q),I(q,F),I(X,W),I(X,G),I(X,K),I(X,Y),I(X,J),I(N,Q),I(N,Z),I(Z,ee),I(ee,te),I(Z,ne),I(Z,se),I(t,ae),I(t,re),I(re,le),I(le,ie),I(ie,ce),I(le,oe),I(le,ue);for(let t=0;t<De.length;t+=1)De[t].m(ue,null);I(re,he),I(re,fe),I(fe,pe),I(pe,de),I(fe,me),I(fe,ge);for(let t=0;t<Ve.length;t+=1)Ve[t].m(ge,null);$e=!0},p(e,[t]){if(1&t){let n;for(Se=e[0].imageLayers,n=0;n<Se.length;n+=1){const a=pt(e,Se,n);Ne[n]?Ne[n].p(a,t):(Ne[n]=dt(a),Ne[n].c(),Ne[n].m(s,null))}for(;n<Ne.length;n+=1)Ne[n].d(1);Ne.length=Se.length}if((!$e||1&t)&&ve!==(ve=e[0].fullName+"")&&T(i,ve),(!$e||1&t)&&ye!==(ye=e[0].sex+"")&&T(u,ye),(!$e||1&t)&&Ee!==(Ee=e[0].race+"")&&T(m,Ee),(!$e||1&t)&&we!==(we=e[0].voice+"")&&T(H,we),(!$e||1&t)&&be!==(be=e[0].voiceTrait+"")&&T(L,be),(!$e||1&t)&&Ie!==(Ie=e[0].age+"")&&T(G,Ie),(!$e||1&t)&&xe!==(xe=e[0].stageOfLife+"")&&T(Y,xe),(!$e||1&t)&&Te!==(Te=e[0].profession+"")&&T(se,Te),1&t){let n;for(Pe=e[0].traits,n=0;n<Pe.length;n+=1){const s=ft(e,Pe,n);De[n]?(De[n].p(s,t),O(De[n],1)):(De[n]=mt(s),De[n].c(),O(De[n],1),De[n].m(ue,null))}for(j(),n=Pe.length;n<De.length;n+=1)ke(n);B()}if(1&t){let n;for(Oe=e[0].story,n=0;n<Oe.length;n+=1){const s=ht(e,Oe,n);Ve[n]?(Ve[n].p(s,t),O(Ve[n],1)):(Ve[n]=gt(s),Ve[n].c(),O(Ve[n],1),Ve[n].m(ge,null))}for(j(),n=Oe.length;n<Ve.length;n+=1)Ce(n);B()}},i(e){if(!$e){for(let e=0;e<Pe.length;e+=1)O(De[e]);for(let e=0;e<Oe.length;e+=1)O(Ve[e]);$e=!0}},o(e){De=De.filter(Boolean);for(let t=0;t<De.length;t+=1)V(De[t]);Ve=Ve.filter(Boolean);for(let t=0;t<Ve.length;t+=1)V(Ve[t]);$e=!1},d(e){e&&y(t),S(Ne,e),S(De,e),S(Ve,e)}}}function vt(e,t,n){let{data:s}=t;return e.$$set=e=>{"data"in e&&n(0,s=e.data)},[s]}class yt extends o{constructor(e){super(),u(this,e,vt,$t,h,{data:0})}}function Et(e){let t,n,s,a,r,l;return{c(){t=f("div"),n=f("input"),s=d(),a=f("textarea"),this.h()},l(e){t=g(e,"DIV",{class:!0});var r=$(t);n=g(r,"INPUT",{type:!0,class:!0}),s=E(r),a=g(r,"TEXTAREA",{placeholder:!0,class:!0}),$(a).forEach(y),r.forEach(y),this.h()},h(){w(n,"type","text"),w(n,"class","svelte-1nxkfg0"),w(a,"placeholder","Write a note"),w(a,"class","svelte-1nxkfg0"),w(t,"class","note svelte-1nxkfg0")},m(i,c){b(i,t,c),I(t,n),A(n,e[1].title),I(t,s),I(t,a),A(a,e[0].content),r||(l=[x(n,"input",e[4]),x(n,"blur",e[2]),x(a,"input",e[5]),x(a,"blur",e[2])],r=!0)},p(e,[t]){2&t&&n.value!==e[1].title&&A(n,e[1].title),1&t&&A(a,e[0].content)},i:M,o:M,d(e){e&&y(t),r=!1,R(l)}}}function wt(e,t,n){let{data:s}=t;var{item:a=U("screenItem")}=t,{campaign:r=U("campaign")}=t;return e.$$set=e=>{"data"in e&&n(0,s=e.data),"item"in e&&n(1,a=e.item),"campaign"in e&&n(3,r=e.campaign)},[s,a,function(){r&&r.refresh()},r,function(){a.title=this.value,n(1,a)},function(){s.content=this.value,n(0,s)}]}class bt extends o{constructor(e){super(),u(this,e,wt,Et,h,{data:0,item:1,campaign:3})}}function It(e={}){return c(i({name:"New encounter",monsters:[]},e),{getMonsters(){return this.monsters.map((e=>be[e]))},getTotalXP(){return this.getMonsters().reduce(((e,t)=>e+t.getXPValue()),0)},getEncounterXP(){let e=this.getTotalXP(),t=1,n=this.monsters.length;return n>=2?t=1.5:n>=3?t=2:n>=7?t=2.5:n>=11?t=3:n>=15&&(t=4),e*t},getEncounterDifficulty(e){let t=this.getEncounterXP(),n="super easy";for(let[s,a]of Object.entries(e))t>=a&&(n=s);return n},addMonster(e){"object"==typeof e&&(e=e.hash),this.monsters.push(e)},removeMonster(e){"object"==typeof e&&(e=e.hash);let t=this.monsters.indexOf(e);-1!==t&&this.monsters.splice(t,1)}})}function xt(e){let t,n,s,a,r;function l(t){e[14](t)}t=new Re({props:{headers:e[4],items:e[0],clickable:e[1],tiny:e[2],limit:e[3]}}),t.$on("click",e[7]);let i={entry:e[5]};return void 0!==e[6]&&(i.open=e[6]),s=new ge({props:i}),H.push((()=>_(s,"open",l))),{c(){N(t.$$.fragment),n=d(),N(s.$$.fragment)},l(e){P(t.$$.fragment,e),n=E(e),P(s.$$.fragment,e)},m(e,a){k(t,e,a),b(e,n,a),k(s,e,a),r=!0},p(e,[n]){const r={};16&n&&(r.headers=e[4]),1&n&&(r.items=e[0]),2&n&&(r.clickable=e[1]),4&n&&(r.tiny=e[2]),8&n&&(r.limit=e[3]),t.$set(r);const l={};32&n&&(l.entry=e[5]),!a&&64&n&&(a=!0,l.open=e[6],L((()=>a=!1))),s.$set(l)},i(e){r||(O(t.$$.fragment,e),O(s.$$.fragment,e),r=!0)},o(e){V(t.$$.fragment,e),V(s.$$.fragment,e),r=!1},d(e){C(t,e),e&&y(n),C(s,e)}}}function Tt(e,t,n){const s=z();var a,{encounter:r=null}=t,{items:l}=t,{alignment:i=!1}=t,{cr:c=!1}=t,{environments:o=!1}=t,{popup:u=!1}=t,{hidePopupIndicator:h=!1}=t,{remove:f=!1}=t,{tiny:p=!1}=t,{limit:d=null}=t,m=!1,g=[];const $={unaligned:{color:"#ffffff",backgroundColor:"#814e4e"},"lawful evil":{color:"#ffffff",backgroundColor:"#850707"},"neutral evil":{color:"#ffffff",backgroundColor:"#c3510e"},"chaotic evil":{color:"#ffffff",backgroundColor:"#ff0000"},"lawful neutral":{color:"#ffffff",backgroundColor:"#17cdab"},"lawful good":{color:"#ffffff",backgroundColor:"#00cb35"},"chaotic good":{color:"#ffffff",backgroundColor:"#0e7c30"}};return e.$$set=e=>{"encounter"in e&&n(8,r=e.encounter),"items"in e&&n(0,l=e.items),"alignment"in e&&n(9,i=e.alignment),"cr"in e&&n(10,c=e.cr),"environments"in e&&n(11,o=e.environments),"popup"in e&&n(1,u=e.popup),"hidePopupIndicator"in e&&n(12,h=e.hidePopupIndicator),"remove"in e&&n(13,f=e.remove),"tiny"in e&&n(2,p=e.tiny),"limit"in e&&n(3,d=e.limit)},e.$$.update=()=>{16146&e.$$.dirty&&(n(4,g=[]),g.push({header:"Monster",type:Ue.SUBTEXT,alignment:_e.LEFT,sortable:!0,wide:!0,text:e=>e.name,subtext:e=>e.getDescription(),sort:(e,t)=>e.name<t.name?1:-1}),c&&g.push({header:"CR",type:Ue.TEXT,sortable:!0,text:e=>e.getCRStringWithoutXP(),sort:(e,t)=>e.getCRValue()-t.getCRValue()}),i&&g.push({header:"Aligmnent",type:Ue.TEXT,text:()=>"",textDecorations:e=>{let t="#ffffff",n="#7a7a7a",s=e.getAlignmentString();if(s in $){let e=$[s];t=e.color,n=e.backgroundColor}return[{color:t,backgroundColor:n,text:s}]}}),o&&g.push({header:"Environments",type:Ue.TEXT,alignment:_e.CENTER,maxWidth:150,text:e=>e.environment?e.environment.map(Ie).join(", "):"—"}),r&&g.push({type:Ue.BUTTON,text:()=>"Add to encounter",onClick:e=>{r.addMonster(e),n(8,r),n(4,g),n(10,c),n(9,i),n(11,o),n(1,u),n(12,h),n(13,f)}}),u&&!h&&g.push({type:Ue.ICON_BUTTON,icon:()=>"arrow-expand-all"}),f&&g.push({type:Ue.ICON_BUTTON,icon:()=>"close",onClick:e=>s("remove",e)}))},[l,u,p,d,g,a,m,function({detail:e}){u&&(n(5,a=e),n(6,m=!0))},r,i,c,o,h,f,function(e){n(6,m=e)}]}class St extends o{constructor(e){super(),u(this,e,Tt,xt,h,{encounter:8,items:0,alignment:9,cr:10,environments:11,popup:1,hidePopupIndicator:12,remove:13,tiny:2,limit:3})}}function Nt(e){let t;return{c(){t=p("Add to initiative")},l(e){t=v(e,"Add to initiative")},m(e,n){b(e,t,n)},d(e){e&&y(t)}}}function Pt(e){let t,n,s,a,r,l,i,c,o,u,h,m,x,S,D,H,j,B,A,M,R,U,_,L,z,X;return _=new Le({props:{$$slots:{default:[Nt]},$$scope:{ctx:e}}}),_.$on("click",e[5]),z=new St({props:{items:e[2],popup:!0}}),{c(){t=f("div"),n=f("header"),s=f("h1"),a=p(e[1]),l=d(),i=f("div"),c=f("section"),o=f("h4"),u=p(e[3]),h=d(),m=f("h6"),x=p("XP Reward"),S=d(),D=f("section"),H=f("h4"),j=p(e[4]),B=d(),A=f("h6"),M=p("Adjusted XP"),R=d(),U=f("div"),N(_.$$.fragment),L=d(),N(z.$$.fragment),this.h()},l(r){t=g(r,"DIV",{class:!0});var f=$(t);n=g(f,"HEADER",{class:!0});var p=$(n);s=g(p,"H1",{class:!0});var d=$(s);a=v(d,e[1]),d.forEach(y),l=E(p),i=g(p,"DIV",{class:!0});var w=$(i);c=g(w,"SECTION",{});var b=$(c);o=g(b,"H4",{class:!0});var I=$(o);u=v(I,e[3]),I.forEach(y),h=E(b),m=g(b,"H6",{class:!0});var T=$(m);x=v(T,"XP Reward"),T.forEach(y),b.forEach(y),S=E(w),D=g(w,"SECTION",{});var N=$(D);H=g(N,"H4",{class:!0});var k=$(H);j=v(k,e[4]),k.forEach(y),B=E(N),A=g(N,"H6",{class:!0});var O=$(A);M=v(O,"Adjusted XP"),O.forEach(y),N.forEach(y),w.forEach(y),R=E(p),U=g(p,"DIV",{class:!0});var V=$(U);P(_.$$.fragment,V),V.forEach(y),p.forEach(y),L=E(f),P(z.$$.fragment,f),f.forEach(y),this.h()},h(){w(s,"class",r="difficulty "+e[1]+" svelte-gp5lg1"),w(o,"class","xp svelte-gp5lg1"),w(m,"class","svelte-gp5lg1"),w(H,"class","xp svelte-gp5lg1"),w(A,"class","svelte-gp5lg1"),w(i,"class","svelte-gp5lg1"),w(U,"class","svelte-gp5lg1"),w(n,"class","svelte-gp5lg1"),w(t,"class","encounter")},m(e,r){b(e,t,r),I(t,n),I(n,s),I(s,a),I(n,l),I(n,i),I(i,c),I(c,o),I(o,u),I(c,h),I(c,m),I(m,x),I(i,S),I(i,D),I(D,H),I(H,j),I(D,B),I(D,A),I(A,M),I(n,R),I(n,U),k(_,U,null),I(t,L),k(z,t,null),X=!0},p(e,[t]){(!X||2&t)&&T(a,e[1]),(!X||2&t&&r!==(r="difficulty "+e[1]+" svelte-gp5lg1"))&&w(s,"class",r),(!X||8&t)&&T(u,e[3]),(!X||16&t)&&T(j,e[4]);const n={};1024&t&&(n.$$scope={dirty:t,ctx:e}),_.$set(n);const l={};4&t&&(l.items=e[2]),z.$set(l)},i(e){X||(O(_.$$.fragment,e),O(z.$$.fragment,e),X=!0)},o(e){V(_.$$.fragment,e),V(z.$$.fragment,e),X=!1},d(e){e&&y(t),C(_),C(z)}}}function Dt(e,t,n){let s,a,r,l,i,c,o,u=M,h=()=>(u(),u=X(p,(e=>n(9,o=e))),p);e.$$.on_destroy.push((()=>u()));var{data:f}=t,{campaign:p=U("campaign")}=t;return h(),e.$$set=e=>{"data"in e&&n(6,f=e.data),"campaign"in e&&h(n(0,p=e.campaign))},e.$$.update=()=>{64&e.$$.dirty&&n(7,s=It(f)),512&e.$$.dirty&&n(8,a=o.party.getXPThreshHolds()),384&e.$$.dirty&&n(1,r=s.getEncounterDifficulty(a)),128&e.$$.dirty&&n(2,l=s.getMonsters()),128&e.$$.dirty&&n(3,i=s.getTotalXP()),128&e.$$.dirty&&n(4,c=s.getEncounterXP())},[p,r,l,i,c,function(){l.forEach((e=>o.initiative.addMonster(e)))},f,s,a,o]}class kt extends o{constructor(e){super(),u(this,e,Dt,Pt,h,{data:6,campaign:0})}}function Ot(e){let t,n,s;var a=e[1];function r(e){return{props:{data:e[2],item:e[0]}}}return a&&(t=new a(r(e))),{c(){t&&N(t.$$.fragment),n=m()},l(e){t&&P(t.$$.fragment,e),n=m()},m(e,a){t&&k(t,e,a),b(e,n,a),s=!0},p(e,[s]){const l={};if(4&s&&(l.data=e[2]),1&s&&(l.item=e[0]),a!==(a=e[1])){if(t){j();const e=t;V(e.$$.fragment,1,0,(()=>{C(e,1)})),B()}a?(t=new a(r(e)),N(t.$$.fragment),O(t.$$.fragment,1),k(t,n.parentNode,n)):t=null}else a&&t.$set(l)},i(e){s||(t&&O(t.$$.fragment,e),s=!0)},o(e){t&&V(t.$$.fragment,e),s=!1},d(e){e&&y(n),t&&C(t,e)}}}function Vt(e,t,n){let s,a;var{item:r}=t;const l={hashRef:ut,npc:yt,note:bt,encounter:kt};return e.$$set=e=>{"item"in e&&n(0,r=e.item)},e.$$.update=()=>{var t;1&e.$$.dirty&&n(1,(t=r.type,s=l[t])),1&e.$$.dirty&&n(2,a=function(e,t){return e===Xe.HASH_REF?we[t]:t}(r.type,r.data))},[r,s,a]}class Ct extends o{constructor(e){super(),u(this,e,Vt,Ot,h,{item:0})}}function Ht(e){let t,n,s;t=new ve({props:{text:e[1].fullName,background:"./img/header/tree.jpg"}});const a=e[2].default,r=q(a,e,e[4],null),l=r||function(e){let t,n;return t=new yt({props:{data:e[1]}}),{c(){N(t.$$.fragment)},l(e){P(t.$$.fragment,e)},m(e,s){k(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.data=e[1]),t.$set(s)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}(e);return{c(){N(t.$$.fragment),n=d(),l&&l.c()},l(e){P(t.$$.fragment,e),n=E(e),l&&l.l(e)},m(e,a){k(t,e,a),b(e,n,a),l&&l.m(e,a),s=!0},p(e,n){const i={};2&n&&(i.text=e[1].fullName),t.$set(i),r?r.p&&(!s||16&n)&&F(r,a,e,e[4],n,null,null):l&&l.p&&2&n&&l.p(e,n)},i(e){s||(O(t.$$.fragment,e),O(l,e),s=!0)},o(e){V(t.$$.fragment,e),V(l,e),s=!1},d(e){C(t,e),e&&y(n),l&&l.d(e)}}}function jt(e){let t,n,s;function a(t){e[3](t)}let r={$$slots:{default:[Ht]},$$scope:{ctx:e}};return void 0!==e[0]&&(r.open=e[0]),t=new $e({props:r}),H.push((()=>_(t,"open",a))),{c(){N(t.$$.fragment)},l(e){P(t.$$.fragment,e)},m(e,n){k(t,e,n),s=!0},p(e,[s]){const a={};18&s&&(a.$$scope={dirty:s,ctx:e}),!n&&1&s&&(n=!0,a.open=e[0],L((()=>n=!1))),t.$set(a)},i(e){s||(O(t.$$.fragment,e),s=!0)},o(e){V(t.$$.fragment,e),s=!1},d(e){C(t,e)}}}function Bt(e,t,n){let{$$slots:s={},$$scope:a}=t;var{open:r=!1}=t,{entry:l}=t;return e.$$set=e=>{"open"in e&&n(0,r=e.open),"entry"in e&&n(1,l=e.entry),"$$scope"in e&&n(4,a=e.$$scope)},[r,l,s,function(e){n(0,r=e)},a]}class At extends o{constructor(e){super(),u(this,e,Bt,jt,h,{open:0,entry:1})}}function Mt(e){let t,n,s;t=new ve({props:{text:e[1].title,background:"./img/header/planet.jpg"}});const a=e[2].default,r=q(a,e,e[4],null),l=r||function(e){let t,n;return t=new bt({props:{data:e[1]}}),{c(){N(t.$$.fragment)},l(e){P(t.$$.fragment,e)},m(e,s){k(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.data=e[1]),t.$set(s)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}(e);return{c(){N(t.$$.fragment),n=d(),l&&l.c()},l(e){P(t.$$.fragment,e),n=E(e),l&&l.l(e)},m(e,a){k(t,e,a),b(e,n,a),l&&l.m(e,a),s=!0},p(e,n){const i={};2&n&&(i.text=e[1].title),t.$set(i),r?r.p&&(!s||16&n)&&F(r,a,e,e[4],n,null,null):l&&l.p&&2&n&&l.p(e,n)},i(e){s||(O(t.$$.fragment,e),O(l,e),s=!0)},o(e){V(t.$$.fragment,e),V(l,e),s=!1},d(e){C(t,e),e&&y(n),l&&l.d(e)}}}function Rt(e){let t,n,s;function a(t){e[3](t)}let r={$$slots:{default:[Mt]},$$scope:{ctx:e}};return void 0!==e[0]&&(r.open=e[0]),t=new $e({props:r}),H.push((()=>_(t,"open",a))),{c(){N(t.$$.fragment)},l(e){P(t.$$.fragment,e)},m(e,n){k(t,e,n),s=!0},p(e,[s]){const a={};18&s&&(a.$$scope={dirty:s,ctx:e}),!n&&1&s&&(n=!0,a.open=e[0],L((()=>n=!1))),t.$set(a)},i(e){s||(O(t.$$.fragment,e),s=!0)},o(e){V(t.$$.fragment,e),s=!1},d(e){C(t,e)}}}function Ut(e,t,n){let{$$slots:s={},$$scope:a}=t;var{open:r=!1}=t,{entry:l}=t;return e.$$set=e=>{"open"in e&&n(0,r=e.open),"entry"in e&&n(1,l=e.entry),"$$scope"in e&&n(4,a=e.$$scope)},[r,l,s,function(e){n(0,r=e)},a]}class _t extends o{constructor(e){super(),u(this,e,Ut,Rt,h,{open:0,entry:1})}}function Lt(e){let t,n,s,a;function r(t){e[4](t)}var l=e[1];function i(e){let t={entry:e[2]};return void 0!==e[0]&&(t.open=e[0]),{props:t}}return l&&(t=new l(i(e)),H.push((()=>_(t,"open",r)))),{c(){t&&N(t.$$.fragment),s=m()},l(e){t&&P(t.$$.fragment,e),s=m()},m(e,n){t&&k(t,e,n),b(e,s,n),a=!0},p(e,[a]){const c={};if(4&a&&(c.entry=e[2]),!n&&1&a&&(n=!0,c.open=e[0],L((()=>n=!1))),l!==(l=e[1])){if(t){j();const e=t;V(e.$$.fragment,1,0,(()=>{C(e,1)})),B()}l?(t=new l(i(e)),H.push((()=>_(t,"open",r))),N(t.$$.fragment),O(t.$$.fragment,1),k(t,s.parentNode,s)):t=null}else l&&t.$set(c)},i(e){a||(t&&O(t.$$.fragment,e),a=!0)},o(e){t&&V(t.$$.fragment,e),a=!1},d(e){e&&y(s),t&&C(t,e)}}}function zt(e,t,n){let s,a;var{entry:r}=t,{open:l=!1}=t;const i={hashRef:Ae,npc:At,note:_t};return e.$$set=e=>{"entry"in e&&n(3,r=e.entry),"open"in e&&n(0,l=e.open)},e.$$.update=()=>{var t;8&e.$$.dirty&&n(1,(t=r.type,s=i[t])),8&e.$$.dirty&&n(2,a=function(e,t){return"hashRef"===e?we[t]:t}(r.type,r.data))},[l,s,a,r,function(e){n(0,l=e)}]}class Xt extends o{constructor(e){super(),u(this,e,zt,Lt,h,{entry:3,open:0})}}function qt(){return{start(){document.addEventListener("mousemove",this.onChange)},stop(){document.removeEventListener("mousemove",this.onChange)},onChange:e=>{}}}const Ft=e=>({open:64&e[0]}),Wt=e=>({open:e[6]});function Gt(e,t,n){const s=e.slice();return s[3]=t[n],s}function Kt(e){let t,n,s,a=e[3].name+"";return{c(){t=f("option"),n=p(a),this.h()},l(e){t=g(e,"OPTION",{value:!0});var s=$(t);n=v(s,a),s.forEach(y),this.h()},h(){t.__value=s=e[3].id,t.value=t.__value},m(e,s){b(e,t,s),I(t,n)},p(e,r){4096&r[0]&&a!==(a=e[3].name+"")&&T(n,a),4096&r[0]&&s!==(s=e[3].id)&&(t.__value=s,t.value=t.__value)},d(e){e&&y(t)}}}function Yt(e){let t,n,s,a,r,l,i,c,o,u,h,p,m,v,I,T,S;return{c(){t=f("div"),n=d(),s=f("div"),a=d(),r=f("div"),l=d(),i=f("div"),c=d(),o=f("div"),u=d(),h=f("div"),p=d(),m=f("div"),v=d(),I=f("div"),this.h()},l(e){t=g(e,"DIV",{class:!0}),$(t).forEach(y),n=E(e),s=g(e,"DIV",{class:!0}),$(s).forEach(y),a=E(e),r=g(e,"DIV",{class:!0}),$(r).forEach(y),l=E(e),i=g(e,"DIV",{class:!0}),$(i).forEach(y),c=E(e),o=g(e,"DIV",{class:!0}),$(o).forEach(y),u=E(e),h=g(e,"DIV",{class:!0}),$(h).forEach(y),p=E(e),m=g(e,"DIV",{class:!0}),$(m).forEach(y),v=E(e),I=g(e,"DIV",{class:!0}),$(I).forEach(y),this.h()},h(){w(t,"class","leftHold svelte-bz66p5"),w(s,"class","rightHold svelte-bz66p5"),w(r,"class","topHold svelte-bz66p5"),w(i,"class","bottomHold svelte-bz66p5"),w(o,"class","topLeftHold svelte-bz66p5"),w(h,"class","topRightHold svelte-bz66p5"),w(m,"class","bottomLeftHold svelte-bz66p5"),w(I,"class","bottomRightHold svelte-bz66p5")},m(f,d){b(f,t,d),b(f,n,d),b(f,s,d),b(f,a,d),b(f,r,d),b(f,l,d),b(f,i,d),b(f,c,d),b(f,o,d),b(f,u,d),b(f,h,d),b(f,p,d),b(f,m,d),b(f,v,d),b(f,I,d),T||(S=[x(t,"mousedown",e[27]),x(s,"mousedown",e[28]),x(r,"mousedown",e[29]),x(i,"mousedown",e[30]),x(o,"mousedown",e[19]),x(h,"mousedown",e[20]),x(m,"mousedown",e[21]),x(I,"mousedown",e[22])],T=!0)},p:M,d(e){e&&y(t),e&&y(n),e&&y(s),e&&y(a),e&&y(r),e&&y(l),e&&y(i),e&&y(c),e&&y(o),e&&y(u),e&&y(h),e&&y(p),e&&y(m),e&&y(v),e&&y(I),T=!1,R(S)}}}function Jt(e){let t;const n=e[25].popup,s=q(n,e,e[33],Wt);return{c(){s&&s.c()},l(e){s&&s.l(e)},m(e,n){s&&s.m(e,n),t=!0},p(e,a){s&&s.p&&(!t||64&a[0]|4&a[1])&&F(s,n,e,e[33],a,Ft,Wt)},i(e){t||(O(s,e),t=!0)},o(e){V(s,e),t=!1},d(e){s&&s.d(e)}}}function Qt(e){let t,n,s;function a(t){e[32](t)}let r={$$slots:{default:[Zt]},$$scope:{ctx:e}};return void 0!==e[6]&&(r.open=e[6]),t=new $e({props:r}),H.push((()=>_(t,"open",a))),{c(){N(t.$$.fragment)},l(e){P(t.$$.fragment,e)},m(e,n){k(t,e,n),s=!0},p(e,s){const a={};4&s[1]&&(a.$$scope={dirty:s,ctx:e}),!n&&64&s[0]&&(n=!0,a.open=e[6],L((()=>n=!1))),t.$set(a)},i(e){s||(O(t.$$.fragment,e),s=!0)},o(e){V(t.$$.fragment,e),s=!1},d(e){C(t,e)}}}function Zt(e){let t;const n=e[25].default,s=q(n,e,e[33],null);return{c(){s&&s.c()},l(e){s&&s.l(e)},m(e,n){s&&s.m(e,n),t=!0},p(e,a){s&&s.p&&(!t||4&a[1])&&F(s,n,e,e[33],a,null,null)},i(e){t||(O(s,e),t=!0)},o(e){V(s,e),t=!1},d(e){s&&s.d(e)}}}function en(e){let t,n,s,a,r,l,i,c,o,u,h,m,N,P,D,k,C,H,A,M,U,_,L,z,X,K;const Y=e[25].default,J=q(Y,e,e[33],null);let Q=e[12],Z=[];for(let f=0;f<Q.length;f+=1)Z[f]=Kt(Gt(e,Q,f));let ee=!e[0].pinned&&Yt(e);const te=[Qt,Jt],ne=[];function se(e,t){return void 0===e[23].popup?0:1}return U=se(e),_=ne[U]=te[U](e),{c(){t=f("section"),n=f("div"),J&&J.c(),s=d(),a=f("div"),r=f("button"),l=f("span"),i=d(),c=f("button"),o=f("span"),h=d(),m=f("button"),N=f("span"),P=d(),D=f("span"),k=p(e[1]),C=d(),H=f("select");for(let e=0;e<Z.length;e+=1)Z[e].c();A=d(),ee&&ee.c(),M=d(),_.c(),L=d(),this.h()},l(u){t=g(u,"SECTION",{class:!0,style:!0});var f=$(t);n=g(f,"DIV",{class:!0});var p=$(n);J&&J.l(p),p.forEach(y),s=E(f),a=g(f,"DIV",{class:!0});var d=$(a);r=g(d,"BUTTON",{class:!0});var w=$(r);l=g(w,"SPAN",{class:!0}),$(l).forEach(y),w.forEach(y),i=E(d),c=g(d,"BUTTON",{class:!0});var b=$(c);o=g(b,"SPAN",{class:!0}),$(o).forEach(y),b.forEach(y),h=E(d),m=g(d,"BUTTON",{class:!0});var I=$(m);N=g(I,"SPAN",{class:!0}),$(N).forEach(y),I.forEach(y),P=E(d),D=g(d,"SPAN",{class:!0});var x=$(D);k=v(x,e[1]),x.forEach(y),C=E(d),H=g(d,"SELECT",{class:!0});var T=$(H);for(let e=0;e<Z.length;e+=1)Z[e].l(T);T.forEach(y),d.forEach(y),A=E(f),ee&&ee.l(f),f.forEach(y),M=E(u),_.l(u),L=E(u),this.h()},h(){w(n,"class","display svelte-bz66p5"),w(l,"class","mdi mdi-arrow-expand-all"),w(r,"class","svelte-bz66p5"),w(o,"class",u="mdi mdi-"+(e[0].pinned?"pin-off":"pin-outline")),w(c,"class","svelte-bz66p5"),w(N,"class","mdi mdi-delete-outline"),w(m,"class","svelte-bz66p5"),w(D,"class","svelte-bz66p5"),w(H,"class","svelte-bz66p5"),void 0===e[5]&&W((()=>e[26].call(H))),w(a,"class","controlls svelte-bz66p5"),w(t,"class","item svelte-bz66p5"),w(t,"style",e[11])},m(u,f){b(u,t,f),I(t,n),J&&J.m(n,null),I(t,s),I(t,a),I(a,r),I(r,l),I(a,i),I(a,c),I(c,o),I(a,h),I(a,m),I(m,N),I(a,P),I(a,D),I(D,k),I(a,C),I(a,H);for(let e=0;e<Z.length;e+=1)Z[e].m(H,null);G(H,e[5]),I(t,A),ee&&ee.m(t,null),e[31](t),b(u,M,f),ne[U].m(u,f),b(u,L,f),z=!0,X||(K=[x(n,"mousedown",e[17]),x(r,"click",e[15]),x(c,"click",e[14]),x(m,"click",e[16]),x(H,"change",e[26]),x(H,"change",e[13]),x(document.body,"mouseup",e[18])],X=!0)},p(e,n){if(J&&J.p&&(!z||4&n[1])&&F(J,Y,e,e[33],n,null,null),(!z||1&n[0]&&u!==(u="mdi mdi-"+(e[0].pinned?"pin-off":"pin-outline")))&&w(o,"class",u),(!z||2&n[0])&&T(k,e[1]),4096&n[0]){let t;for(Q=e[12],t=0;t<Q.length;t+=1){const s=Gt(e,Q,t);Z[t]?Z[t].p(s,n):(Z[t]=Kt(s),Z[t].c(),Z[t].m(H,null))}for(;t<Z.length;t+=1)Z[t].d(1);Z.length=Q.length}4128&n[0]&&G(H,e[5]),e[0].pinned?ee&&(ee.d(1),ee=null):ee?ee.p(e,n):(ee=Yt(e),ee.c(),ee.m(t,null)),(!z||2048&n[0])&&w(t,"style",e[11]);let s=U;U=se(e),U===s?ne[U].p(e,n):(j(),V(ne[s],1,1,(()=>{ne[s]=null})),B(),_=ne[U],_?_.p(e,n):(_=ne[U]=te[U](e),_.c()),O(_,1),_.m(L.parentNode,L))},i(e){z||(O(J,e),O(_),z=!0)},o(e){V(J,e),V(_),z=!1},d(n){n&&y(t),J&&J.d(n),S(Z,n),ee&&ee.d(),e[31](null),n&&y(M),ne[U].d(n),n&&y(L),X=!1,R(K)}}}function tn(e,t,n){let s,a,r,l,i=M,c=()=>(i(),i=X(g,(e=>n(24,l=e))),g);e.$$.on_destroy.push((()=>i()));let{$$slots:o={},$$scope:u}=t;const h=K(o);var f,{label:p}=t,{item:d}=t,{screen:m=U("dmScreen")}=t,{campaign:g=U("campaign")}=t;c();var $=m.id,v=!1,y=qt(),E=qt(),w=qt(),b=qt(),I=qt();I.onChange=e=>{if(!d.pinned){e.preventDefault();let{movementX:t,movementY:s}=e;n(0,d.left+=t,d),n(0,d.top+=s,d)}},y.onChange=e=>{e.preventDefault();let{movementX:t}=e;d.width+t<100?n(0,d.width=100,d):n(0,d.width+=t,d)},E.onChange=e=>{e.preventDefault();let{movementX:t}=e;d.width-t<100?n(0,d.width=100,d):(n(0,d.width-=t,d),n(0,d.left+=t,d))},w.onChange=e=>{e.preventDefault();let{movementY:t}=e;d.height-t<100?n(0,d.height=100,d):(n(0,d.height-=t,d),n(0,d.top+=t,d))},b.onChange=e=>{e.preventDefault();let{movementY:t}=e;d.height+t<100?n(0,d.height=100,d):n(0,d.height+=t,d)};return e.$$set=e=>{"label"in e&&n(1,p=e.label),"item"in e&&n(0,d=e.item),"screen"in e&&n(3,m=e.screen),"campaign"in e&&c(n(2,g=e.campaign)),"$$scope"in e&&n(33,u=e.$$scope)},e.$$.update=()=>{4&e.$$.dirty[0]&&(s=g.campaignStore),1&e.$$.dirty[0]&&n(11,a=function({top:e,left:t,height:n,width:s,index:a}){return`top: ${e}px; left: ${t}px; height: ${n}px; width: ${s}px; z-index: ${a};`}(d)),16777216&e.$$.dirty[0]&&n(12,r=l.screens.get())},[d,p,g,m,f,$,v,y,E,w,b,a,r,function(){g.screens.moveItemTo(d,$)},function(){g.screens.togglePin(d),n(0,d)},function(){n(6,v=!0)},function(){g.screens.removeItemFromScreen(m,d)},function(){g.screens.moveUp(d),I.start()},function(){y.stop(),E.stop(),w.stop(),b.stop(),I.stop(),s.refresh()},function(){w.start(),E.start()},function(){w.start(),y.start()},function(){b.start(),E.start()},function(){b.start(),y.start()},h,l,o,function(){$=Y(this),n(5,$),n(12,r),n(24,l)},()=>E.start(),()=>y.start(),()=>w.start(),()=>b.start(),function(e){H[e?"unshift":"push"]((()=>{n(4,f=e)}))},function(e){n(6,v=e)},u]}class nn extends o{constructor(e){super(),u(this,e,tn,en,h,{label:1,item:0,screen:3,campaign:2},[-1,-1])}}function sn(e){let t,n;return t=new Ct({props:{item:e[1]}}),{c(){N(t.$$.fragment)},l(e){P(t.$$.fragment,e)},m(e,s){k(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.item=e[1]),t.$set(s)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function an(e){let t,n;return t=new Xt({props:{slot:"popup",entry:e[1],open:e[4]}}),{c(){N(t.$$.fragment)},l(e){P(t.$$.fragment,e)},m(e,s){k(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.entry=e[1]),16&n&&(s.open=e[4]),t.$set(s)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function rn(e){let t,n;return t=new nn({props:{label:e[2],screen:e[0],item:e[1],$$slots:{popup:[an,({open:e})=>({4:e}),({open:e})=>e?16:0],default:[sn,({open:e})=>({4:e}),({open:e})=>e?16:0]},$$scope:{ctx:e}}}),{c(){N(t.$$.fragment)},l(e){P(t.$$.fragment,e)},m(e,s){k(t,e,s),n=!0},p(e,[n]){const s={};4&n&&(s.label=e[2]),1&n&&(s.screen=e[0]),2&n&&(s.item=e[1]),50&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function ln(e,t,n){let s;var{screen:a}=t,{item:r}=t;return e.$$set=e=>{"screen"in e&&n(0,a=e.screen),"item"in e&&n(1,r=e.item)},e.$$.update=()=>{2&e.$$.dirty&&n(2,s=function(e){if(e.type===Xe.HASH_REF)return we[e.data].name;return e.title}(r)),2&e.$$.dirty&&J("screenItem",r)},[a,r,s]}class cn extends o{constructor(e){super(),u(this,e,ln,rn,h,{screen:0,item:1})}}function on(e,t,n){const s=e.slice();return s[11]=t[n],s}function un(e,t,n){const s=e.slice();return s[14]=t[n],s}function hn(e){let t,n,s,a,r,l=e[14].name+"";function i(){return e[10](e[14])}return{c(){t=f("button"),n=p(l),this.h()},l(e){t=g(e,"BUTTON",{class:!0});var s=$(t);n=v(s,l),s.forEach(y),this.h()},h(){w(t,"class",s=Q(e[14].id===e[1].id&&"current")+" svelte-1gt4vqn")},m(e,s){b(e,t,s),I(t,n),a||(r=x(t,"click",i),a=!0)},p(a,r){e=a,8&r&&l!==(l=e[14].name+"")&&T(n,l),10&r&&s!==(s=Q(e[14].id===e[1].id&&"current")+" svelte-1gt4vqn")&&w(t,"class",s)},d(e){e&&y(t),a=!1,r()}}}function fn(e,t){let n,s,a;return s=new cn({props:{campaign:t[0],item:t[11],screen:t[1]}}),{key:e,first:null,c(){n=m(),N(s.$$.fragment),this.h()},l(e){n=m(),P(s.$$.fragment,e),this.h()},h(){this.first=n},m(e,t){b(e,n,t),k(s,e,t),a=!0},p(e,n){t=e;const a={};1&n&&(a.campaign=t[0]),2&n&&(a.item=t[11]),2&n&&(a.screen=t[1]),s.$set(a)},i(e){a||(O(s.$$.fragment,e),a=!0)},o(e){V(s.$$.fragment,e),a=!1},d(e){e&&y(n),C(s,e)}}}function pn(e){let t,n,s,a,r,l,i,c,o,u,h,p,m,v,T,N,P=[],D=new Map,k=e[3],C=[];for(let f=0;f<k.length;f+=1)C[f]=hn(un(e,k,f));let H=e[1].items;const A=e=>e[11].id;for(let f=0;f<H.length;f+=1){let t=on(e,H,f),n=A(t);D.set(n,P[f]=fn(n,t))}return{c(){t=f("section"),n=f("div");for(let e=0;e<C.length;e+=1)C[e].c();s=d(),a=f("button"),r=f("span"),l=d(),i=f("button"),c=f("span"),o=d(),u=f("button"),h=f("span"),p=d(),m=f("div");for(let e=0;e<P.length;e+=1)P[e].c();this.h()},l(e){t=g(e,"SECTION",{class:!0});var f=$(t);n=g(f,"DIV",{class:!0});var d=$(n);for(let t=0;t<C.length;t+=1)C[t].l(d);s=E(d),a=g(d,"BUTTON",{disabled:!0,class:!0});var v=$(a);r=g(v,"SPAN",{class:!0}),$(r).forEach(y),v.forEach(y),l=E(d),i=g(d,"BUTTON",{disabled:!0,class:!0});var w=$(i);c=g(w,"SPAN",{class:!0}),$(c).forEach(y),w.forEach(y),o=E(d),u=g(d,"BUTTON",{class:!0});var b=$(u);h=g(b,"SPAN",{class:!0}),$(h).forEach(y),b.forEach(y),d.forEach(y),p=E(f),m=g(f,"DIV",{class:!0});var I=$(m);for(let t=0;t<P.length;t+=1)P[t].l(I);I.forEach(y),f.forEach(y),this.h()},h(){w(r,"class","mdi mdi-pencil"),a.disabled=e[4],w(a,"class","svelte-1gt4vqn"),w(c,"class","mdi mdi-delete-outline"),i.disabled=e[4],w(i,"class","svelte-1gt4vqn"),w(h,"class","mdi mdi-plus"),w(u,"class","svelte-1gt4vqn"),w(n,"class","tabs svelte-1gt4vqn"),w(m,"class","grid svelte-1gt4vqn"),w(t,"class","dmScreen svelte-1gt4vqn")},m(f,d){b(f,t,d),I(t,n);for(let e=0;e<C.length;e+=1)C[e].m(n,null);I(n,s),I(n,a),I(a,r),I(n,l),I(n,i),I(i,c),I(n,o),I(n,u),I(u,h),I(t,p),I(t,m);for(let e=0;e<P.length;e+=1)P[e].m(m,null);v=!0,T||(N=[x(a,"click",e[8]),x(i,"click",e[7]),x(u,"click",e[6])],T=!0)},p(e,[t]){if(42&t){let a;for(k=e[3],a=0;a<k.length;a+=1){const r=un(e,k,a);C[a]?C[a].p(r,t):(C[a]=hn(r),C[a].c(),C[a].m(n,s))}for(;a<C.length;a+=1)C[a].d(1);C.length=k.length}(!v||16&t)&&(a.disabled=e[4]),(!v||16&t)&&(i.disabled=e[4]),3&t&&(H=e[1].items,j(),P=Z(P,t,A,1,e,H,D,m,ee,fn,null,on),B())},i(e){if(!v){for(let e=0;e<H.length;e+=1)O(P[e]);v=!0}},o(e){for(let t=0;t<P.length;t+=1)V(P[t]);v=!1},d(e){e&&y(t),S(C,e);for(let t=0;t<P.length;t+=1)P[t].d();T=!1,R(N)}}}function dn(e,t,n){let s,a,r,l,i,c=M;e.$$.on_destroy.push((()=>c()));var{campaign:o}=t;function u(e){o.screens.openScreen(e)}return e.$$set=e=>{"campaign"in e&&n(0,o=e.campaign)},e.$$.update=()=>{1&e.$$.dirty&&(n(2,s=o.campaignStore),c(),c=X(s,(e=>n(9,i=e)))),513&e.$$.dirty&&n(3,a=o.screens.get(i)),513&e.$$.dirty&&n(1,r=o.screens.getOpenScreen(i)),2&e.$$.dirty&&n(4,l="root"===r.id)},[o,r,s,a,l,u,function(){o.screens.newScreen()},function(){confirm("Are you sure you want to delete this tab?")&&o.screens.deleteScreen(r)},function(){var e=prompt("Type a name");e&&o.screens.renameCurrentScreen(e)},i,e=>u(e)]}function mn(e){let t,n,s,a,r,l,i,c;return{c(){t=f("div"),n=f("h4"),s=p(e[0]),a=f("span"),r=p("xp"),l=d(),i=f("h6"),c=p(e[1]),this.h()},l(o){t=g(o,"DIV",{class:!0});var u=$(t);n=g(u,"H4",{class:!0});var h=$(n);s=v(h,e[0]),a=g(h,"SPAN",{class:!0});var f=$(a);r=v(f,"xp"),f.forEach(y),h.forEach(y),l=E(u),i=g(u,"H6",{class:!0});var p=$(i);c=v(p,e[1]),p.forEach(y),u.forEach(y),this.h()},h(){w(a,"class","svelte-8oh2jc"),w(n,"class","svelte-8oh2jc"),w(i,"class","svelte-8oh2jc"),w(t,"class","svelte-8oh2jc")},m(e,o){b(e,t,o),I(t,n),I(n,s),I(n,a),I(a,r),I(t,l),I(t,i),I(i,c)},p(e,[t]){1&t&&T(s,e[0]),2&t&&T(c,e[1])},i:M,o:M,d(e){e&&y(t)}}}function gn(e,t,n){var{xp:s}=t,{difficulty:a}=t;return e.$$set=e=>{"xp"in e&&n(0,s=e.xp),"difficulty"in e&&n(1,a=e.difficulty)},[s,a]}class $n extends o{constructor(e){super(),u(this,e,gn,mn,h,{xp:0,difficulty:1})}}function vn(e,t,n){const s=e.slice();return s[9]=t[n],s}function yn(e){let t,n;const s=[e[9]];let a={};for(let r=0;r<s.length;r+=1)a=se(a,s[r]);return t=new $n({props:a}),{c(){N(t.$$.fragment)},l(e){P(t.$$.fragment,e)},m(e,s){k(t,e,s),n=!0},p(e,n){const a=16&n?te(s,[ne(e[9])]):{};t.$set(a)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function En(e){let t;return{c(){t=p("Save encounter")},l(e){t=v(e,"Save encounter")},m(e,n){b(e,t,n)},d(e){e&&y(t)}}}function wn(e){let t,n,s,a,r,l,i,c,o,u,h,m,x,D,H,A,M,R,U,_,L,z=e[4],X=[];for(let f=0;f<z.length;f+=1)X[f]=yn(vn(e,z,f));const q=e=>V(X[e],1,1,(()=>{X[e]=null}));return H=new St({props:{items:e[1],remove:!0,tiny:!0,popup:!0,hidePopupIndicator:!0}}),H.$on("remove",e[5]),_=new Le({props:{$$slots:{default:[En]},$$scope:{ctx:e}}}),_.$on("click",e[6]),{c(){t=f("div"),n=f("header"),s=f("div");for(let e=0;e<X.length;e+=1)X[e].c();a=d(),r=f("div"),l=f("h1"),i=f("span"),c=p(e[3]),u=d(),h=f("span"),m=p(e[2]),x=p("xp"),D=d(),N(H.$$.fragment),A=d(),M=f("footer"),R=f("input"),U=d(),N(_.$$.fragment),this.h()},l(o){t=g(o,"DIV",{class:!0});var f=$(t);n=g(f,"HEADER",{});var p=$(n);s=g(p,"DIV",{class:!0});var d=$(s);for(let e=0;e<X.length;e+=1)X[e].l(d);d.forEach(y),a=E(p),r=g(p,"DIV",{});var w=$(r);l=g(w,"H1",{class:!0});var b=$(l);i=g(b,"SPAN",{class:!0});var I=$(i);c=v(I,e[3]),I.forEach(y),u=E(b),h=g(b,"SPAN",{class:!0});var T=$(h);m=v(T,e[2]),x=v(T,"xp"),T.forEach(y),b.forEach(y),w.forEach(y),p.forEach(y),D=E(f),P(H.$$.fragment,f),A=E(f),M=g(f,"FOOTER",{class:!0});var S=$(M);R=g(S,"INPUT",{}),U=E(S),P(_.$$.fragment,S),S.forEach(y),f.forEach(y),this.h()},h(){w(s,"class","challengeLevels svelte-i7tvej"),w(i,"class",o="difficulty "+e[3]+" svelte-i7tvej"),w(h,"class","xp svelte-i7tvej"),w(l,"class","svelte-i7tvej"),w(M,"class","svelte-i7tvej"),w(t,"class","sections")},m(e,o){b(e,t,o),I(t,n),I(n,s);for(let t=0;t<X.length;t+=1)X[t].m(s,null);I(n,a),I(n,r),I(r,l),I(l,i),I(i,c),I(l,u),I(l,h),I(h,m),I(h,x),I(t,D),k(H,t,null),I(t,A),I(t,M),I(M,R),I(M,U),k(_,M,null),L=!0},p(e,[t]){if(16&t){let n;for(z=e[4],n=0;n<z.length;n+=1){const a=vn(e,z,n);X[n]?(X[n].p(a,t),O(X[n],1)):(X[n]=yn(a),X[n].c(),O(X[n],1),X[n].m(s,null))}for(j(),n=z.length;n<X.length;n+=1)q(n);B()}(!L||8&t)&&T(c,e[3]),(!L||8&t&&o!==(o="difficulty "+e[3]+" svelte-i7tvej"))&&w(i,"class",o),(!L||4&t)&&T(m,e[2]);const n={};2&t&&(n.items=e[1]),H.$set(n);const a={};4096&t&&(a.$$scope={dirty:t,ctx:e}),_.$set(a)},i(e){if(!L){for(let e=0;e<z.length;e+=1)O(X[e]);O(H.$$.fragment,e),O(_.$$.fragment,e),L=!0}},o(e){X=X.filter(Boolean);for(let t=0;t<X.length;t+=1)V(X[t]);V(H.$$.fragment,e),V(_.$$.fragment,e),L=!1},d(e){e&&y(t),S(X,e),C(H),C(_)}}}function bn(e,t,n){let s,a,r,l,i,c=M,o=()=>(c(),c=X(u,(e=>n(8,i=e))),u);e.$$.on_destroy.push((()=>c()));var{campaign:u=U("campaign")}=t;o();var{encounter:h}=t;return e.$$set=e=>{"campaign"in e&&o(n(0,u=e.campaign)),"encounter"in e&&n(7,h=e.encounter)},e.$$.update=()=>{128&e.$$.dirty&&n(1,s=h.getMonsters()),128&e.$$.dirty&&n(2,a=h.getEncounterXP()),384&e.$$.dirty&&n(3,r=h.getEncounterDifficulty(i.party.getXPThreshHolds())),256&e.$$.dirty&&n(4,l=Object.entries(i.party.getXPThreshHolds()).map((([e,t])=>({xp:t,difficulty:Ie(e)}))))},[u,s,a,r,l,function({detail:e}){h.removeMonster(e),n(7,h)},function(){u.screens.addItemToCurrentScreen("New encounter","encounter",h)},h,i]}class In extends o{constructor(e){super(),u(this,e,bn,wn,h,{campaign:0,encounter:7})}}function xn(e,t,n){const s=e.slice();return s[3]=t[n],s}function Tn(e){let t,n,s,a=e[3].text+"";return{c(){t=f("option"),n=p(a),this.h()},l(e){t=g(e,"OPTION",{value:!0});var s=$(t);n=v(s,a),s.forEach(y),this.h()},h(){t.__value=s=e[3].value,t.value=t.__value},m(e,s){b(e,t,s),I(t,n)},p:M,d(e){e&&y(t)}}}function Sn(e){let t,n,s,a=e[1],r=[];for(let l=0;l<a.length;l+=1)r[l]=Tn(xn(e,a,l));return{c(){t=f("select");for(let e=0;e<r.length;e+=1)r[e].c();this.h()},l(e){t=g(e,"SELECT",{class:!0});var n=$(t);for(let t=0;t<r.length;t+=1)r[t].l(n);n.forEach(y),this.h()},h(){w(t,"class","svelte-17oxtdk"),void 0===e[0]&&W((()=>e[2].call(t)))},m(a,l){b(a,t,l);for(let e=0;e<r.length;e+=1)r[e].m(t,null);G(t,e[0]),n||(s=x(t,"change",e[2]),n=!0)},p(e,[n]){if(2&n){let s;for(a=e[1],s=0;s<a.length;s+=1){const l=xn(e,a,s);r[s]?r[s].p(l,n):(r[s]=Tn(l),r[s].c(),r[s].m(t,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=a.length}3&n&&G(t,e[0])},i:M,o:M,d(e){e&&y(t),S(r,e),n=!1,s()}}}function Nn(e){return 0===e?"0":1===e?"1/8":2===e?"1/4":3===e?"1/2":String(e-3)}function Pn(e,t,n){var s,{cr:a}=t,r=[];for(let l=0;l<=33;l++)r.push({value:(s=l,0===s?0:1===s?.125:2===s?.25:3===s?.5:s-3),text:Nn(l)});return e.$$set=e=>{"cr"in e&&n(0,a=e.cr)},[a,r,function(){a=Y(this),n(0,a),n(1,r)}]}class Dn extends o{constructor(e){super(),u(this,e,Pn,Sn,h,{cr:0})}}function kn(e){let t,n,s,a,r,l,i,c,o,u,h,m,x,T,S;function D(t){e[2](t)}let j={};function B(t){e[3](t)}void 0!==e[0]&&(j.cr=e[0]),l=new Dn({props:j}),H.push((()=>_(l,"cr",D)));let A={};return void 0!==e[1]&&(A.cr=e[1]),x=new Dn({props:A}),H.push((()=>_(x,"cr",B))),{c(){t=f("div"),n=f("div"),s=f("h6"),a=p("Min"),r=d(),N(l.$$.fragment),c=d(),o=f("div"),u=f("h6"),h=p("Max"),m=d(),N(x.$$.fragment),this.h()},l(e){t=g(e,"DIV",{class:!0});var i=$(t);n=g(i,"DIV",{class:!0});var f=$(n);s=g(f,"H6",{class:!0});var p=$(s);a=v(p,"Min"),p.forEach(y),r=E(f),P(l.$$.fragment,f),f.forEach(y),c=E(i),o=g(i,"DIV",{class:!0});var d=$(o);u=g(d,"H6",{class:!0});var w=$(u);h=v(w,"Max"),w.forEach(y),m=E(d),P(x.$$.fragment,d),d.forEach(y),i.forEach(y),this.h()},h(){w(s,"class","svelte-1l2sto3"),w(n,"class","svelte-1l2sto3"),w(u,"class","svelte-1l2sto3"),w(o,"class","svelte-1l2sto3"),w(t,"class","crRangeSelect svelte-1l2sto3")},m(e,i){b(e,t,i),I(t,n),I(n,s),I(s,a),I(n,r),k(l,n,null),I(t,c),I(t,o),I(o,u),I(u,h),I(o,m),k(x,o,null),S=!0},p(e,[t]){const n={};!i&&1&t&&(i=!0,n.cr=e[0],L((()=>i=!1))),l.$set(n);const s={};!T&&2&t&&(T=!0,s.cr=e[1],L((()=>T=!1))),x.$set(s)},i(e){S||(O(l.$$.fragment,e),O(x.$$.fragment,e),S=!0)},o(e){V(l.$$.fragment,e),V(x.$$.fragment,e),S=!1},d(e){e&&y(t),C(l),C(x)}}}function On(e,t,n){var{min:s=0}=t,{max:a=30}=t;return e.$$set=e=>{"min"in e&&n(0,s=e.min),"max"in e&&n(1,a=e.max)},[s,a,function(e){n(0,s=e)},function(e){n(1,a=e)}]}class Vn extends o{constructor(e){super(),u(this,e,On,kn,h,{min:0,max:1})}}function Cn(e){let t,n,s,a,r,l,i,c,o,u,h,m,T,S,D,j,B,M,R,U,z;function X(t){e[6](t)}function q(t){e[7](t)}let F={};function W(t){e[8](t)}void 0!==e[1]&&(F.min=e[1]),void 0!==e[2]&&(F.max=e[2]),u=new Vn({props:F}),H.push((()=>_(u,"min",X))),H.push((()=>_(u,"max",q)));let G={possibleValues:xe()};return void 0!==e[3]&&(G.selectedValues=e[3]),B=new Ce({props:G}),H.push((()=>_(B,"selectedValues",W))),{c(){t=f("div"),n=f("h3"),s=p("Search"),a=d(),r=f("input"),l=d(),i=f("h3"),c=p("Challenge rating"),o=d(),N(u.$$.fragment),T=d(),S=f("h3"),D=p("Environment"),j=d(),N(B.$$.fragment),this.h()},l(e){t=g(e,"DIV",{});var h=$(t);n=g(h,"H3",{class:!0});var f=$(n);s=v(f,"Search"),f.forEach(y),a=E(h),r=g(h,"INPUT",{class:!0}),l=E(h),i=g(h,"H3",{class:!0});var p=$(i);c=v(p,"Challenge rating"),p.forEach(y),o=E(h),P(u.$$.fragment,h),T=E(h),S=g(h,"H3",{class:!0});var d=$(S);D=v(d,"Environment"),d.forEach(y),j=E(h),P(B.$$.fragment,h),h.forEach(y),this.h()},h(){w(n,"class","svelte-1kicwjl"),w(r,"class","svelte-1kicwjl"),w(i,"class","svelte-1kicwjl"),w(S,"class","svelte-1kicwjl")},m(h,f){b(h,t,f),I(t,n),I(n,s),I(t,a),I(t,r),A(r,e[0]),I(t,l),I(t,i),I(i,c),I(t,o),k(u,t,null),I(t,T),I(t,S),I(S,D),I(t,j),k(B,t,null),R=!0,U||(z=x(r,"input",e[5]),U=!0)},p(e,[t]){1&t&&r.value!==e[0]&&A(r,e[0]);const n={};!h&&2&t&&(h=!0,n.min=e[1],L((()=>h=!1))),!m&&4&t&&(m=!0,n.max=e[2],L((()=>m=!1))),u.$set(n);const s={};!M&&8&t&&(M=!0,s.selectedValues=e[3],L((()=>M=!1))),B.$set(s)},i(e){R||(O(u.$$.fragment,e),O(B.$$.fragment,e),R=!0)},o(e){V(u.$$.fragment,e),V(B.$$.fragment,e),R=!1},d(e){e&&y(t),C(u),C(B),U=!1,z()}}}function Hn(e,t,n){var{filtering:s={query:a,cr:{min:0,max:30},environments:[]}}=t,a="",r=0,l=30,i=[];return e.$$set=e=>{"filtering"in e&&n(4,s=e.filtering)},e.$$.update=()=>{15&e.$$.dirty&&(n(4,s.query=a,s),n(4,s.cr.min=r,s),n(4,s.cr.max=l,s),n(4,s.environments=i,s))},[a,r,l,i,s,function(){a=this.value,n(0,a)},function(e){n(1,r=e)},function(e){n(2,l=e)},function(e){n(3,i=e)}]}class jn extends o{constructor(e){super(),u(this,e,Hn,Cn,h,{filtering:4})}}function Bn(e){let t,n,s,a,r,l,i,c,o,u,h,p;function m(t){e[4](t)}let v={};function x(t){e[5](t)}void 0!==e[0]&&(v.filtering=e[0]),s=new jn({props:v}),H.push((()=>_(s,"filtering",m)));let T={items:e[2],limit:100,cr:!0,environments:!0,popup:!0,alignment:!0};return void 0!==e[1]&&(T.encounter=e[1]),i=new St({props:T}),H.push((()=>_(i,"encounter",x))),h=new In({props:{encounter:e[1]}}),{c(){t=f("section"),n=f("div"),N(s.$$.fragment),r=d(),l=f("div"),N(i.$$.fragment),o=d(),u=f("div"),N(h.$$.fragment),this.h()},l(e){t=g(e,"SECTION",{class:!0});var a=$(t);n=g(a,"DIV",{class:!0});var c=$(n);P(s.$$.fragment,c),c.forEach(y),r=E(a),l=g(a,"DIV",{class:!0});var f=$(l);P(i.$$.fragment,f),f.forEach(y),o=E(a),u=g(a,"DIV",{class:!0});var p=$(u);P(h.$$.fragment,p),p.forEach(y),a.forEach(y),this.h()},h(){w(n,"class","filters svelte-1g5uj0e"),w(l,"class","monsters svelte-1g5uj0e"),w(u,"class","currentEncounter svelte-1g5uj0e"),w(t,"class","encounterBuilder svelte-1g5uj0e")},m(e,a){b(e,t,a),I(t,n),k(s,n,null),I(t,r),I(t,l),k(i,l,null),I(t,o),I(t,u),k(h,u,null),p=!0},p(e,[t]){const n={};!a&&1&t&&(a=!0,n.filtering=e[0],L((()=>a=!1))),s.$set(n);const r={};4&t&&(r.items=e[2]),!c&&2&t&&(c=!0,r.encounter=e[1],L((()=>c=!1))),i.$set(r);const l={};2&t&&(l.encounter=e[1]),h.$set(l)},i(e){p||(O(s.$$.fragment,e),O(i.$$.fragment,e),O(h.$$.fragment,e),p=!0)},o(e){V(s.$$.fragment,e),V(i.$$.fragment,e),V(h.$$.fragment,e),p=!1},d(e){e&&y(t),C(s),C(i),C(h)}}}function An(e,t,n){let s;var{campaign:a=U("campaign")}=t,r=It(),l=Object.values(be),i={query:"",cr:{min:0,max:30},environments:[]};return e.$$set=e=>{"campaign"in e&&n(3,a=e.campaign)},e.$$.update=()=>{1&e.$$.dirty&&n(2,s=l.filter((e=>{let t=e.name.toLowerCase().includes(i.query.toLowerCase()),n=e.getCRValue()>=i.cr.min&&e.getCRValue()<=i.cr.max,s=0===i.environments.length||i.environments.some((t=>{var n;return null===(n=e.environment)||void 0===n?void 0:n.includes(t.toLowerCase())}));return t&&n&&s})))},[i,r,s,a,function(e){n(0,i=e)},function(e){n(1,r=e)}]}function Mn(e,t,n){const s=e.slice();return s[6]=t[n],s}function Rn(e){let t,n,s,a=e[6].name+"";return{c(){t=f("option"),n=p(a),this.h()},l(e){t=g(e,"OPTION",{value:!0});var s=$(t);n=v(s,a),s.forEach(y),this.h()},h(){t.__value=s=e[6].hash,t.value=t.__value},m(e,s){b(e,t,s),I(t,n)},p(e,r){8&r&&a!==(a=e[6].name+"")&&T(n,a),8&r&&s!==(s=e[6].hash)&&(t.__value=s,t.value=t.__value)},d(e){e&&y(t)}}}function Un(e){let t,n,s,a,r,l,i,c,o=e[3],u=[];for(let h=0;h<o.length;h+=1)u[h]=Rn(Mn(e,o,h));return{c(){t=f("section"),n=f("div"),s=f("p"),a=p("Only change the dataset for this campaign when updating an old dataset or you're absolutely sure the new dataset is compatible with the old one."),r=d(),l=f("select");for(let e=0;e<u.length;e+=1)u[e].c();this.h()},l(e){t=g(e,"SECTION",{class:!0});var i=$(t);n=g(i,"DIV",{class:!0});var c=$(n);s=g(c,"P",{});var o=$(s);a=v(o,"Only change the dataset for this campaign when updating an old dataset or you're absolutely sure the new dataset is compatible with the old one."),o.forEach(y),r=E(c),l=g(c,"SELECT",{});var h=$(l);for(let t=0;t<u.length;t+=1)u[t].l(h);h.forEach(y),c.forEach(y),i.forEach(y),this.h()},h(){void 0===e[2].dataset&&W((()=>e[5].call(l))),w(n,"class","generalSettings svelte-wd8nwp"),w(t,"class","settings svelte-wd8nwp")},m(o,h){b(o,t,h),I(t,n),I(n,s),I(s,a),I(n,r),I(n,l);for(let e=0;e<u.length;e+=1)u[e].m(l,null);G(l,e[2].dataset),i||(c=x(l,"change",e[5]),i=!0)},p(e,[t]){if(8&t){let n;for(o=e[3],n=0;n<o.length;n+=1){const s=Mn(e,o,n);u[n]?u[n].p(s,t):(u[n]=Rn(s),u[n].c(),u[n].m(l,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=o.length}12&t&&G(l,e[2].dataset)},i:M,o:M,d(e){e&&y(t),S(u,e),i=!1,c()}}}function _n(e,t,n){let s,a,r,l,i=M,c=()=>(i(),i=X(u,(e=>n(4,a=e))),u),o=M;ae(e,Te,(e=>n(3,l=e))),e.$$.on_destroy.push((()=>i())),e.$$.on_destroy.push((()=>o()));var{campaign:u=U("campaign")}=t;return c(),e.$$set=e=>{"campaign"in e&&c(n(0,u=e.campaign))},e.$$.update=()=>{16&e.$$.dirty&&(n(1,s=a.campaignStore),o(),o=X(s,(e=>n(2,r=e))))},[u,s,r,l,a,function(){r.dataset=Y(this),s.set(r)}]}const Ln={default:{id:"default",title:"DM Screen",icon:"view-dashboard-outline",component:class extends o{constructor(e){super(),u(this,e,dn,pn,h,{campaign:0})}}},encounterBuilder:{id:"encounterBuilder",title:"Encounter builder",icon:"sword-cross",component:class extends o{constructor(e){super(),u(this,e,An,Bn,h,{campaign:3})}}},settingsView:{id:"settingsView",title:"Settings",icon:"cog",component:class extends o{constructor(e){super(),u(this,e,_n,Un,h,{campaign:0})}}}};function zn(e){var t;const n=Se(`campaign_${e}`,We);n.update((e=>i(i({},We),e))),(null==(t=n.get())?void 0:t.dataset)||(n.get().dataset=Ne.get(),n.refresh());const s={campaignStore:n,refresh(){n.refresh()},subscribe(e){return n.subscribe((t=>{e(this)}))},update(e){n.update(e)}};return s.screens=function(e){const{campaignStore:t}=e;return{get:()=>t.get().screens,getScreenById(e){return this.get().find((t=>t.id===e))},getOpenScreenId:()=>t.get().currentScreenId,getOpenScreen(){return this.get().find((e=>e.id===this.getOpenScreenId()))},newScreen(){let e=i({},ze);e.id=oe(),e.name="New screen",this.get().push(e),t.refresh()},openScreen(e){"object"==typeof e&&(e=e.id),t.get().currentScreenId=e,t.refresh()},deleteScreen(e){let n=this.get(),s=n.indexOf(e);if(s<0)return"notAScreen";this.openScreen("root"),n.splice(s,1),t.refresh()},addItemToScreen(e,n="Pinned item",s,a=null){let r=c(i({},Fe),{id:oe(),title:n,type:s,data:a});e.items.push(r),t.refresh()},addItemToCurrentScreen(e="Pinned item",t,n=null){this.addItemToScreen(this.getOpenScreen(),e,t,n)},removeItemFromScreen(e,n){let s=e.items.indexOf(n);e.items.splice(s,1),t.refresh()},renameCurrentScreen(e){this.getOpenScreen().name=e,t.refresh()},moveUp(e){let n=this.getOpenScreen().items,s=n.sort((t=>t.id===e.id?-1:1)).map(((e,t)=>(e.index=n.length-t,e)));this.getOpenScreen().items=s,t.refresh()},togglePin(t){t.pinned=!t.pinned,e.refresh()},moveItemTo(e,n){"string"==typeof n&&(n=this.getScreenById(n)),this.removeItemFromScreen(this.getOpenScreen(),e),this.addItemToScreen(n,e.title,e.type,e.data),t.refresh()}}}(s),s.party=function(e){const{campaignStore:t}=e;return{get:()=>t.get().partyMembers,getById(e){return this.get().find((t=>t.id===e))||null},addMember(){let t=i({},Ge);t.id=oe(),this.get().push(t),e.refresh()},removeMember(t){let n=this.get().indexOf(t);if(n<0)return"noPartyMember";this.get().splice(n,1),e.refresh()},getXPThreshHolds(){let e=this.get(),t={easy:0,medium:0,hard:0,deadly:0};for(let{level:n}of e){if(n<1||n>20)continue;let e=n-1,[s,a,r,l]=Ke[e];t.easy+=s,t.medium+=a,t.hard+=r,t.deadly+=l}return t},getDailyXP(){return this.get().map((e=>Ye[e.level])).reduce(((e,t)=>e+t),0)}}}(s),s.initiative=function(e){const{campaignStore:t}=e;return{get:()=>t.get().initiative,getCombatStarted(){return this.get().length>0},getRound:()=>t.get().initiativeRound,getPreviousInitiativeIndex(){return this.getMappedIndex(this.getCurrentInitiativeIndex()-1)},getCurrentInitiativeIndex:()=>t.get().currentInitiativeIndex,getNextInitiativeIndex(){return this.getMappedIndex(this.getCurrentInitiativeIndex()+1)},getPreviousEntry(){let e=this.getPreviousInitiativeIndex();return this.getSortedInitiative()[e]},getCurrentEntry(){let e=this.getCurrentInitiativeIndex();return this.getSortedInitiative()[e]},getNextEntry(){let e=this.getNextInitiativeIndex();return this.getSortedInitiative()[e]},getInitiativeOverview(){return[this.getPreviousEntry(),this.getCurrentEntry(),this.getNextEntry()]},getSortedInitiative(){return this.get().sort(((e,t)=>t.initiative-e.initiative))},getMappedIndex(e){return function(e,t,n){let s=e%(n+1);return s<0&&(s=n+1+s),s+t}(e,0,this.get().length-1)},previousInitiative(){let n=this.getPreviousInitiativeIndex(),s=t.get();s.currentInitiativeIndex=n,n===this.get().length-1&&s.initiativeRound--,e.refresh()},nextInitiative(){let n=this.getNextInitiativeIndex(),s=t.get();s.currentInitiativeIndex=n,0===n&&s.initiativeRound++,e.refresh()},addEntryToInitiative(t){this.get().push(t),e.refresh()},addManualEntry(){let e=Qe();this.addEntryToInitiative(e)},addPartyMember(e){let t=Qe();t.type="partyMember",t.name=e.name,t.data=e.id,this.addEntryToInitiative(t)},addPartyToInitiative(){let t=e.party.get();for(let e of t)this.addPartyMember(e)},addMonster(e){let t=Qe();t.type="monster",t.name=e.name,t.data=Ee(e),t.currentHealth=e.hp.average,t.maxHealth=e.hp.average,this.addEntryToInitiative(t)},removeEntry(n){let s=this.get().indexOf(n);if(s<0)return"noEntry";let a=t.get().currentInitiativeIndex;var r,l,i;t.get().currentInitiativeIndex=(r=0,l=a,i=this.get().length-1,l<r?r:l>i?i:l),this.get().splice(s,1),e.refresh()}}}(s),s.mainManager=function(e){const{campaignStore:t}=e;return{get(){let e=this.getCurrentId();return Ln[e]||Ln.default},getCurrentId:()=>t.get().currentManager,getList:()=>Object.values(Ln),setManager(e){t.get().currentManager=e,t.refresh()},showSourcePage(e,t){this.setManager("bookView"),this.get().openSource=e,this.get().openPage=t}}}(s),s}function Xn(e,t,n){const s=e.slice();return s[10]=t[n],s}function qn(e){let t,n,s,a,r=e[2],l=[];for(let i=0;i<r.length;i+=1)l[i]=Fn(Xn(e,r,i));return{c(){t=f("div");for(let e=0;e<l.length;e+=1)l[e].c();this.h()},l(e){t=g(e,"DIV",{class:!0});var n=$(t);for(let t=0;t<l.length;t+=1)l[t].l(n);n.forEach(y),this.h()},h(){w(t,"class","menu svelte-wqlf6z")},m(r,i){b(r,t,i);for(let e=0;e<l.length;e+=1)l[e].m(t,null);s||(a=re(n=ye.call(null,t,e[5])),s=!0)},p(e,n){if(76&n){let s;for(r=e[2],s=0;s<r.length;s+=1){const a=Xn(e,r,s);l[s]?l[s].p(a,n):(l[s]=Fn(a),l[s].c(),l[s].m(t,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=r.length}},d(e){e&&y(t),S(l,e),s=!1,a()}}}function Fn(e){let t,n,s,a,r,l,i,c,o,u,h=e[10].title+"";function m(){return e[9](e[10])}return{c(){t=f("div"),n=f("p"),s=f("span"),r=d(),l=p(h),i=d(),this.h()},l(e){t=g(e,"DIV",{class:!0});var a=$(t);n=g(a,"P",{class:!0});var c=$(n);s=g(c,"SPAN",{class:!0}),$(s).forEach(y),r=E(c),l=v(c,h),c.forEach(y),i=E(a),a.forEach(y),this.h()},h(){w(s,"class",a="mdi mdi-"+e[10].icon+" svelte-wqlf6z"),w(n,"class","svelte-wqlf6z"),w(t,"class",c="menuItem "+(e[10].id===e[3]&&"current")+" svelte-wqlf6z")},m(e,a){b(e,t,a),I(t,n),I(n,s),I(n,r),I(n,l),I(t,i),o||(u=x(t,"click",m),o=!0)},p(n,r){e=n,4&r&&a!==(a="mdi mdi-"+e[10].icon+" svelte-wqlf6z")&&w(s,"class",a),4&r&&h!==(h=e[10].title+"")&&T(l,h),12&r&&c!==(c="menuItem "+(e[10].id===e[3]&&"current")+" svelte-wqlf6z")&&w(t,"class",c)},d(e){e&&y(t),o=!1,u()}}}function Wn(e){let t,n,s,a,r,l,i=e[0]&&qn(e);return{c(){t=f("button"),n=f("span"),s=d(),i&&i.c(),a=m(),this.h()},l(e){t=g(e,"BUTTON",{class:!0});var r=$(t);n=g(r,"SPAN",{class:!0}),$(n).forEach(y),r.forEach(y),s=E(e),i&&i.l(e),a=m(),this.h()},h(){w(n,"class","mdi mdi-menu svelte-wqlf6z"),w(t,"class","navButton svelte-wqlf6z")},m(c,o){b(c,t,o),I(t,n),b(c,s,o),i&&i.m(c,o),b(c,a,o),r||(l=x(t,"click",e[4]),r=!0)},p(e,[t]){e[0]?i?i.p(e,t):(i=qn(e),i.c(),i.m(a.parentNode,a)):i&&(i.d(1),i=null)},i:M,o:M,d(e){e&&y(t),e&&y(s),i&&i.d(e),e&&y(a),r=!1,l()}}}function Gn(e,t,n){let s,a,r,l,i=M;e.$$.on_destroy.push((()=>i()));var{campaign:c}=t,o=!1;function u(e){c.mainManager.setManager(e)}return e.$$set=e=>{"campaign"in e&&n(7,c=e.campaign)},e.$$.update=()=>{128&e.$$.dirty&&(n(1,s=c.campaignStore),i(),i=X(s,(e=>n(8,l=e)))),384&e.$$.dirty&&n(2,a=c.mainManager.getList(l)),384&e.$$.dirty&&n(3,r=c.mainManager.getCurrentId(l))},[o,s,a,r,function(){setTimeout((()=>{n(0,o=!0)}),0)},function(){n(0,o=!1)},u,c,l,e=>u(e.id)]}class Kn extends o{constructor(e){super(),u(this,e,Gn,Wn,h,{campaign:7})}}function Yn(e){let t,n,s,a,r,l,i,c,o,u,h,m,S;return{c(){t=f("h1"),n=p(e[1]),a=d(),r=f("p"),l=p(e[2]),i=d(),c=f("input"),o=d(),u=f("button"),h=p("roll"),this.h()},l(s){t=g(s,"H1",{class:!0});var f=$(t);n=v(f,e[1]),f.forEach(y),a=E(s),r=g(s,"P",{class:!0});var p=$(r);l=v(p,e[2]),p.forEach(y),i=E(s),c=g(s,"INPUT",{class:!0}),o=E(s),u=g(s,"BUTTON",{class:!0});var d=$(u);h=v(d,"roll"),d.forEach(y),this.h()},h(){w(t,"class",s=Q(e[4])+" svelte-16axwwy"),w(r,"class","svelte-16axwwy"),w(c,"class","svelte-16axwwy"),w(u,"class","svelte-16axwwy")},m(s,f){b(s,t,f),I(t,n),b(s,a,f),b(s,r,f),I(r,l),b(s,i,f),b(s,c,f),e[13](c),A(c,e[0]),b(s,o,f),b(s,u,f),I(u,h),m||(S=[x(c,"input",e[14]),x(c,"keydown",e[6]),x(u,"click",e[5])],m=!0)},p(e,[a]){2&a&&T(n,e[1]),16&a&&s!==(s=Q(e[4])+" svelte-16axwwy")&&w(t,"class",s),4&a&&T(l,e[2]),1&a&&c.value!==e[0]&&A(c,e[0])},i:M,o:M,d(n){n&&y(t),n&&y(a),n&&y(r),n&&y(i),n&&y(c),e[13](null),n&&y(o),n&&y(u),m=!1,R(S)}}}function Jn(e,t,n){let s,a,r;var l,i,c,{expression:o=""}=t,{doRoll:u=!1}=t,{doFocus:h=!1}=t,f="?",p="";function d(){let e=Pe(o);e?(n(1,f=String(e.result)),n(2,p=e.resultExpression),n(9,i=e.minResult),n(10,c=e.maxResult)):(n(1,f="?"),n(2,p=""))}return le((()=>{h&&l.focus()})),d(),e.$$set=e=>{"expression"in e&&n(0,o=e.expression),"doRoll"in e&&n(7,u=e.doRoll),"doFocus"in e&&n(8,h=e.doFocus)},e.$$.update=()=>{514&e.$$.dirty&&n(11,s=f===i),1026&e.$$.dirty&&n(12,a=f===c),6144&e.$$.dirty&&n(4,r=`${s?"natOne":""} ${a?"natTwenty":""}`),128&e.$$.dirty&&u&&(d(),n(7,u=!1))},[o,f,p,l,r,d,function(e){let t=["d","+","-","/","*","^","Backspace","a"];"Enter"===e.key?d():isNaN(e.key)&&!t.includes(e.key)&&e.preventDefault()},u,h,i,c,s,a,function(e){H[e?"unshift":"push"]((()=>{n(3,l=e)}))},function(){o=this.value,n(0,o)}]}class Qn extends o{constructor(e){super(),u(this,e,Jn,Yn,h,{expression:0,doRoll:7,doFocus:8})}}function Zn(e){let t,n,s,a,r,l;return n=new Qn({props:{doFocus:!0}}),{c(){t=f("div"),N(n.$$.fragment),this.h()},l(e){t=g(e,"DIV",{class:!0});var s=$(t);P(n.$$.fragment,s),s.forEach(y),this.h()},h(){w(t,"class","diceDrawer svelte-lxlzgl")},m(i,c){b(i,t,c),k(n,t,null),a=!0,r||(l=re(s=ye.call(null,t,e[2])),r=!0)},p:M,i(e){a||(O(n.$$.fragment,e),a=!0)},o(e){V(n.$$.fragment,e),a=!1},d(e){e&&y(t),C(n),r=!1,l()}}}function es(e){let t,n,s,a,r,l,i,c=e[0]&&Zn(e);return{c(){t=f("button"),n=f("span"),s=d(),c&&c.c(),a=m(),this.h()},l(e){t=g(e,"BUTTON",{class:!0});var r=$(t);n=g(r,"SPAN",{class:!0}),$(n).forEach(y),r.forEach(y),s=E(e),c&&c.l(e),a=m(),this.h()},h(){w(n,"class","mdi mdi-dice-d20 svelte-lxlzgl"),w(t,"class","svelte-lxlzgl")},m(o,u){b(o,t,u),I(t,n),b(o,s,u),c&&c.m(o,u),b(o,a,u),r=!0,l||(i=x(t,"click",e[1]),l=!0)},p(e,[t]){e[0]?c?(c.p(e,t),1&t&&O(c,1)):(c=Zn(e),c.c(),O(c,1),c.m(a.parentNode,a)):c&&(j(),V(c,1,1,(()=>{c=null})),B())},i(e){r||(O(c),r=!0)},o(e){V(c),r=!1},d(e){e&&y(t),e&&y(s),c&&c.d(e),e&&y(a),l=!1,i()}}}function ts(e,t,n){var s=!1,a=!0;return[s,function(){n(0,s=!0),a=!0},function(){a?a=!1:n(0,s=!1)}]}class ns extends o{constructor(e){super(),u(this,e,ts,es,h,{})}}function ss(e,t,n){const s=e.slice();return s[12]=t[n],s[13]=t,s[14]=n,s}function as(e){let t,n,s,a,r,l,i,c,o,u,h,p,m,v,T,S;function N(){e[8].call(s,e[13],e[14])}function P(){e[9].call(l,e[13],e[14])}function D(){e[10].call(o,e[13],e[14])}function k(){return e[11](e[12])}return{c(){t=f("tr"),n=f("td"),s=f("input"),a=d(),r=f("td"),l=f("input"),i=d(),c=f("td"),o=f("input"),u=d(),h=f("td"),p=f("button"),m=f("span"),v=d(),this.h()},l(e){t=g(e,"TR",{});var f=$(t);n=g(f,"TD",{class:!0});var d=$(n);s=g(d,"INPUT",{type:!0,spellcheck:!0,class:!0}),d.forEach(y),a=E(f),r=g(f,"TD",{class:!0});var w=$(r);l=g(w,"INPUT",{type:!0,min:!0,max:!0,class:!0}),w.forEach(y),i=E(f),c=g(f,"TD",{class:!0});var b=$(c);o=g(b,"INPUT",{type:!0,min:!0,class:!0}),b.forEach(y),u=E(f),h=g(f,"TD",{class:!0});var I=$(h);p=g(I,"BUTTON",{class:!0});var x=$(p);m=g(x,"SPAN",{class:!0}),$(m).forEach(y),x.forEach(y),I.forEach(y),v=E(f),f.forEach(y),this.h()},h(){w(s,"type","text"),w(s,"spellcheck","false"),w(s,"class","svelte-57itb8"),w(n,"class","name svelte-57itb8"),w(l,"type","number"),w(l,"min","1"),w(l,"max","20"),w(l,"class","svelte-57itb8"),w(r,"class","level svelte-57itb8"),w(o,"type","number"),w(o,"min","0"),w(o,"class","svelte-57itb8"),w(c,"class","pp svelte-57itb8"),w(m,"class","mdi mdi-close"),w(p,"class","svelte-57itb8"),w(h,"class","action svelte-57itb8")},m(f,d){b(f,t,d),I(t,n),I(n,s),A(s,e[12].name),I(t,a),I(t,r),I(r,l),A(l,e[12].level),I(t,i),I(t,c),I(c,o),A(o,e[12].pp),I(t,u),I(t,h),I(h,p),I(p,m),I(t,v),T||(S=[x(s,"input",N),x(s,"blur",e[5]),x(l,"input",P),x(l,"blur",e[5]),x(o,"input",D),x(o,"blur",e[5]),x(p,"click",k)],T=!0)},p(t,n){e=t,1&n&&s.value!==e[12].name&&A(s,e[12].name),1&n&&ie(l.value)!==e[12].level&&A(l,e[12].level),1&n&&ie(o.value)!==e[12].pp&&A(o,e[12].pp)},d(e){e&&y(t),T=!1,R(S)}}}function rs(e){let t,n,s,a,r,l,i,c,o,u,h,m,N,P,k,O,V,C,H,j,B,A,R,U,_,L,z,X,q,F,W,G,K,Y,J,Q,Z,ee,te,ne,se,ae,re,le,ie,ce,oe,ue,he,fe,pe,de,me=e[1].easy+"",ge=e[1].medium+"",$e=e[1].hard+"",ve=e[1].deadly+"",ye=e[0],Ee=[];for(let f=0;f<ye.length;f+=1)Ee[f]=as(ss(e,ye,f));return{c(){t=f("table"),n=f("tr"),s=f("th"),a=p("Easy"),r=d(),l=f("th"),i=p("Medium"),c=d(),o=f("th"),u=p("Hard"),h=d(),m=f("th"),N=p("Deadly"),P=d(),k=f("tr"),O=f("td"),V=p(me),C=d(),H=f("td"),j=p(ge),B=d(),A=f("td"),R=p($e),U=d(),_=f("td"),L=p(ve),z=d(),X=f("table"),q=f("colgroup"),F=f("col"),W=d(),G=f("col"),K=d(),Y=f("col"),J=d(),Q=f("tr"),Z=f("th"),ee=p("Name"),te=d(),ne=f("th"),se=p("LvL"),ae=d(),re=f("th"),le=p("PP"),ie=d(),ce=f("th"),oe=d();for(let e=0;e<Ee.length;e+=1)Ee[e].c();ue=d(),he=f("button"),fe=p("Add Member"),this.h()},l(e){t=g(e,"TABLE",{class:!0});var f=$(t);n=g(f,"TR",{});var p=$(n);s=g(p,"TH",{class:!0});var d=$(s);a=v(d,"Easy"),d.forEach(y),r=E(p),l=g(p,"TH",{class:!0});var w=$(l);i=v(w,"Medium"),w.forEach(y),c=E(p),o=g(p,"TH",{class:!0});var b=$(o);u=v(b,"Hard"),b.forEach(y),h=E(p),m=g(p,"TH",{class:!0});var I=$(m);N=v(I,"Deadly"),I.forEach(y),p.forEach(y),P=E(f),k=g(f,"TR",{});var x=$(k);O=g(x,"TD",{class:!0});var T=$(O);V=v(T,me),T.forEach(y),C=E(x),H=g(x,"TD",{class:!0});var S=$(H);j=v(S,ge),S.forEach(y),B=E(x),A=g(x,"TD",{class:!0});var D=$(A);R=v(D,$e),D.forEach(y),U=E(x),_=g(x,"TD",{class:!0});var M=$(_);L=v(M,ve),M.forEach(y),x.forEach(y),f.forEach(y),z=E(e),X=g(e,"TABLE",{class:!0});var pe=$(X);q=g(pe,"COLGROUP",{});var de=$(q);F=g(de,"COL",{span:!0,style:!0}),W=E(de),G=g(de,"COL",{span:!0,style:!0}),K=E(de),Y=g(de,"COL",{span:!0,style:!0}),de.forEach(y),J=E(pe),Q=g(pe,"TR",{});var ye=$(Q);Z=g(ye,"TH",{class:!0});var we=$(Z);ee=v(we,"Name"),we.forEach(y),te=E(ye),ne=g(ye,"TH",{class:!0});var be=$(ne);se=v(be,"LvL"),be.forEach(y),ae=E(ye),re=g(ye,"TH",{class:!0});var Ie=$(re);le=v(Ie,"PP"),Ie.forEach(y),ie=E(ye),ce=g(ye,"TH",{class:!0}),$(ce).forEach(y),ye.forEach(y),oe=E(pe);for(let t=0;t<Ee.length;t+=1)Ee[t].l(pe);pe.forEach(y),ue=E(e),he=g(e,"BUTTON",{class:!0});var xe=$(he);fe=v(xe,"Add Member"),xe.forEach(y),this.h()},h(){w(s,"class","svelte-57itb8"),w(l,"class","svelte-57itb8"),w(o,"class","svelte-57itb8"),w(m,"class","svelte-57itb8"),w(O,"class","svelte-57itb8"),w(H,"class","svelte-57itb8"),w(A,"class","svelte-57itb8"),w(_,"class","svelte-57itb8"),w(t,"class","xpThresholds svelte-57itb8"),w(F,"span","1"),D(F,"width","60%"),w(G,"span","1"),D(G,"width","20%"),w(Y,"span","1"),D(Y,"width","20%"),w(Z,"class","name svelte-57itb8"),w(ne,"class","level svelte-57itb8"),w(re,"class","pp svelte-57itb8"),w(ce,"class","action svelte-57itb8"),w(X,"class","svelte-57itb8"),w(he,"class","svelte-57itb8")},m(f,p){b(f,t,p),I(t,n),I(n,s),I(s,a),I(n,r),I(n,l),I(l,i),I(n,c),I(n,o),I(o,u),I(n,h),I(n,m),I(m,N),I(t,P),I(t,k),I(k,O),I(O,V),I(k,C),I(k,H),I(H,j),I(k,B),I(k,A),I(A,R),I(k,U),I(k,_),I(_,L),b(f,z,p),b(f,X,p),I(X,q),I(q,F),I(q,W),I(q,G),I(q,K),I(q,Y),I(X,J),I(X,Q),I(Q,Z),I(Z,ee),I(Q,te),I(Q,ne),I(ne,se),I(Q,ae),I(Q,re),I(re,le),I(Q,ie),I(Q,ce),I(X,oe);for(let e=0;e<Ee.length;e+=1)Ee[e].m(X,null);b(f,ue,p),b(f,he,p),I(he,fe),pe||(de=x(he,"click",e[3]),pe=!0)},p(e,[t]){if(2&t&&me!==(me=e[1].easy+"")&&T(V,me),2&t&&ge!==(ge=e[1].medium+"")&&T(j,ge),2&t&&$e!==($e=e[1].hard+"")&&T(R,$e),2&t&&ve!==(ve=e[1].deadly+"")&&T(L,ve),49&t){let n;for(ye=e[0],n=0;n<ye.length;n+=1){const s=ss(e,ye,n);Ee[n]?Ee[n].p(s,t):(Ee[n]=as(s),Ee[n].c(),Ee[n].m(X,null))}for(;n<Ee.length;n+=1)Ee[n].d(1);Ee.length=ye.length}},i:M,o:M,d(e){e&&y(t),e&&y(z),e&&y(X),S(Ee,e),e&&y(ue),e&&y(he),pe=!1,de()}}}function ls(e,t,n){let s,a,r;var{campaign:l}=t;const{campaignStore:i}=l;function c(e){l.party.removeMember(e)}ae(e,i,(e=>n(7,r=e)));return e.$$set=e=>{"campaign"in e&&n(6,l=e.campaign)},e.$$.update=()=>{192&e.$$.dirty&&n(0,s=l.party.get(r)),192&e.$$.dirty&&n(1,a=l.party.getXPThreshHolds(r))},[s,a,i,function(){l.party.addMember()},c,function(){l.refresh()},l,r,function(e,t){e[t].name=this.value,n(0,s),n(6,l),n(7,r)},function(e,t){e[t].level=ie(this.value),n(0,s),n(6,l),n(7,r)},function(e,t){e[t].pp=ie(this.value),n(0,s),n(6,l),n(7,r)},e=>c(e)]}class is extends o{constructor(e){super(),u(this,e,ls,rs,h,{campaign:6})}}function cs(e){let t,n,s,a,r,l;return n=new is({props:{campaign:e[0]}}),{c(){t=f("div"),N(n.$$.fragment),this.h()},l(e){t=g(e,"DIV",{class:!0});var s=$(t);P(n.$$.fragment,s),s.forEach(y),this.h()},h(){w(t,"class","svelte-1m41ok8")},m(i,c){b(i,t,c),k(n,t,null),a=!0,r||(l=re(s=ye.call(null,t,e[3])),r=!0)},p(e,t){const s={};1&t&&(s.campaign=e[0]),n.$set(s)},i(e){a||(O(n.$$.fragment,e),a=!0)},o(e){V(n.$$.fragment,e),a=!1},d(e){e&&y(t),C(n),r=!1,l()}}}function os(e){let t,n,s,a,r,l,i,c=e[1]&&cs(e);return{c(){t=f("button"),n=p("Party Members"),s=d(),c&&c.c(),a=m(),this.h()},l(e){t=g(e,"BUTTON",{class:!0});var r=$(t);n=v(r,"Party Members"),r.forEach(y),s=E(e),c&&c.l(e),a=m(),this.h()},h(){w(t,"class","toolbarButton svelte-1m41ok8")},m(o,u){b(o,t,u),I(t,n),b(o,s,u),c&&c.m(o,u),b(o,a,u),r=!0,l||(i=x(t,"click",e[2]),l=!0)},p(e,[t]){e[1]?c?(c.p(e,t),2&t&&O(c,1)):(c=cs(e),c.c(),O(c,1),c.m(a.parentNode,a)):c&&(j(),V(c,1,1,(()=>{c=null})),B())},i(e){r||(O(c),r=!0)},o(e){V(c),r=!1},d(e){e&&y(t),e&&y(s),c&&c.d(e),e&&y(a),l=!1,i()}}}function us(e,t,n){var{campaign:s}=t,a=!1,r=!0;return e.$$set=e=>{"campaign"in e&&n(0,s=e.campaign)},[s,a,function(){n(1,a=!a),a&&(r=!0)},function(){r?r=!1:n(1,a=!1)}]}class hs extends o{constructor(e){super(),u(this,e,us,os,h,{campaign:0})}}function fs(e){let t,n,s,a,r=e[1]&&ps(),l=e[2]&&ds(),i=e[3]&&ms(),c=e[4]&&gs();return{c(){t=f("div"),r&&r.c(),n=d(),l&&l.c(),s=d(),i&&i.c(),a=d(),c&&c.c(),this.h()},l(e){t=g(e,"DIV",{class:!0});var o=$(t);r&&r.l(o),n=E(o),l&&l.l(o),s=E(o),i&&i.l(o),a=E(o),c&&c.l(o),o.forEach(y),this.h()},h(){w(t,"class","itemsHeader svelte-1po2pdb")},m(e,o){b(e,t,o),r&&r.m(t,null),I(t,n),l&&l.m(t,null),I(t,s),i&&i.m(t,null),I(t,a),c&&c.m(t,null)},p(e,o){e[1]?r||(r=ps(),r.c(),r.m(t,n)):r&&(r.d(1),r=null),e[2]?l||(l=ds(),l.c(),l.m(t,s)):l&&(l.d(1),l=null),e[3]?i||(i=ms(),i.c(),i.m(t,a)):i&&(i.d(1),i=null),e[4]?c||(c=gs(),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},d(e){e&&y(t),r&&r.d(),l&&l.d(),i&&i.d(),c&&c.d()}}}function ps(e){let t,n;return{c(){t=f("div"),n=p("Feature"),this.h()},l(e){t=g(e,"DIV",{class:!0});var s=$(t);n=v(s,"Feature"),s.forEach(y),this.h()},h(){w(t,"class","nameWrapper")},m(e,s){b(e,t,s),I(t,n)},d(e){e&&y(t)}}}function ds(e){let t;return{c(){t=f("div"),this.h()},l(e){t=g(e,"DIV",{class:!0}),$(t).forEach(y),this.h()},h(){w(t,"class","wrapper centerText svelte-1po2pdb")},m(e,n){b(e,t,n)},d(e){e&&y(t)}}}function ms(e){let t;return{c(){t=f("div"),this.h()},l(e){t=g(e,"DIV",{class:!0}),$(t).forEach(y),this.h()},h(){w(t,"class","wrapper centerText svelte-1po2pdb")},m(e,n){b(e,t,n)},d(e){e&&y(t)}}}function gs(e){let t;return{c(){t=f("div"),this.h()},l(e){t=g(e,"DIV",{class:!0}),$(t).forEach(y),this.h()},h(){w(t,"class","wrapper dropdownIndicatorWrapper")},m(e,n){b(e,t,n)},d(e){e&&y(t)}}}function $s(e){let t,n,s,a,r,l,i,c=e[0].name+"";return{c(){t=f("div"),n=f("div"),s=f("p"),a=p(c),r=d(),l=f("p"),i=p(e[7]),this.h()},l(o){t=g(o,"DIV",{class:!0});var u=$(t);n=g(u,"DIV",{class:!0});var h=$(n);s=g(h,"P",{class:!0});var f=$(s);a=v(f,c),f.forEach(y),r=E(h),l=g(h,"P",{class:!0});var p=$(l);i=v(p,e[7]),p.forEach(y),h.forEach(y),u.forEach(y),this.h()},h(){w(s,"class","spellName svelte-1po2pdb"),w(l,"class","spellDescription svelte-1po2pdb"),w(n,"class","overflowWrapper svelte-1po2pdb"),w(t,"class","nameWrapper svelte-1po2pdb")},m(e,c){b(e,t,c),I(t,n),I(n,s),I(s,a),I(n,r),I(n,l),I(l,i)},p(e,t){1&t&&c!==(c=e[0].name+"")&&T(a,c),128&t&&T(i,e[7])},d(e){e&&y(t)}}}function vs(e){let t,n,s,a,r,l,i,c,o;return{c(){t=f("div"),n=f("div"),s=f("input"),a=d(),r=f("div"),l=d(),i=f("input"),this.h()},l(e){t=g(e,"DIV",{class:!0});var c=$(t);n=g(c,"DIV",{class:!0});var o=$(n);s=g(o,"INPUT",{type:!0,tabindex:!0,class:!0}),a=E(o),r=g(o,"DIV",{class:!0}),$(r).forEach(y),l=E(o),i=g(o,"INPUT",{type:!0,tabindex:!0,class:!0}),o.forEach(y),c.forEach(y),this.h()},h(){w(s,"type","text"),w(s,"tabindex","-1"),w(s,"class","svelte-1po2pdb"),w(r,"class","divider svelte-1po2pdb"),w(i,"type","text"),w(i,"tabindex","-1"),w(i,"class","svelte-1po2pdb"),w(n,"class","centerWrapper"),w(t,"class","healthManager svelte-1po2pdb")},m(u,h){b(u,t,h),I(t,n),I(n,s),A(s,e[0].currentHealth),I(n,a),I(n,r),I(n,l),I(n,i),A(i,e[0].maxHealth),c||(o=[x(s,"keydown",bs),x(s,"input",e[18]),x(i,"keydown",bs),x(i,"input",e[19])],c=!0)},p(e,t){1&t&&s.value!==e[0].currentHealth&&A(s,e[0].currentHealth),1&t&&i.value!==e[0].maxHealth&&A(i,e[0].maxHealth)},d(e){e&&y(t),c=!1,R(o)}}}function ys(e){let t;return{c(){t=f("div"),this.h()},l(e){t=g(e,"DIV",{class:!0}),$(t).forEach(y),this.h()},h(){w(t,"class","deathSavesManager svelte-1po2pdb")},m(e,n){b(e,t,n)},p:M,d(e){e&&y(t)}}}function Es(e){let t,n,s,a,r,l,i,c,o,u,h,p,m,v,T=e[6]&&fs(e),S=e[1]&&$s(e);function N(e,t){return"partyMember"===e[0].type?ys:"monster"===e[0].type?vs:void 0}let P=N(e),D=P&&P(e);return{c(){T&&T.c(),t=d(),n=f("div"),s=f("div"),a=f("input"),l=d(),S&&S.c(),i=d(),c=f("div"),D&&D.c(),o=d(),u=f("div"),h=f("button"),p=f("span"),this.h()},l(e){T&&T.l(e),t=E(e),n=g(e,"DIV",{class:!0});var r=$(n);s=g(r,"DIV",{class:!0});var f=$(s);a=g(f,"INPUT",{class:!0,type:!0,tabindex:!0}),f.forEach(y),l=E(r),S&&S.l(r),i=E(r),c=g(r,"DIV",{class:!0});var d=$(c);D&&D.l(d),d.forEach(y),o=E(r),u=g(r,"DIV",{class:!0});var m=$(u);h=g(m,"BUTTON",{class:!0});var v=$(h);p=g(v,"SPAN",{class:!0}),$(p).forEach(y),v.forEach(y),m.forEach(y),r.forEach(y),this.h()},h(){w(a,"class",r=Q(e[8]&&"isCurrent")+" svelte-1po2pdb"),w(a,"type","text"),w(a,"tabindex","0"),w(s,"class","initiative wrapper svelte-1po2pdb"),w(c,"class","wrapper controlls svelte-1po2pdb"),w(p,"class","mdi mdi-close svelte-1po2pdb"),w(h,"class","svelte-1po2pdb"),w(u,"class","wrapper controlls buttons svelte-1po2pdb"),w(n,"class","initiativeItem svelte-1po2pdb")},m(r,f){T&&T.m(r,f),b(r,t,f),b(r,n,f),I(n,s),I(s,a),A(a,e[0].initiative),I(n,l),S&&S.m(n,null),I(n,i),I(n,c),D&&D.m(c,null),I(n,o),I(n,u),I(u,h),I(h,p),m||(v=[x(a,"input",e[17]),x(a,"keydown",bs),x(a,"focus",ws),x(a,"blur",e[10]),x(h,"click",e[9])],m=!0)},p(e,[s]){e[6]?T?T.p(e,s):(T=fs(e),T.c(),T.m(t.parentNode,t)):T&&(T.d(1),T=null),256&s&&r!==(r=Q(e[8]&&"isCurrent")+" svelte-1po2pdb")&&w(a,"class",r),1&s&&a.value!==e[0].initiative&&A(a,e[0].initiative),e[1]?S?S.p(e,s):(S=$s(e),S.c(),S.m(n,i)):S&&(S.d(1),S=null),P===(P=N(e))&&D?D.p(e,s):(D&&D.d(1),D=P&&P(e),D&&(D.c(),D.m(c,null)))},i:M,o:M,d(e){T&&T.d(e),e&&y(t),e&&y(n),S&&S.d(),D&&D.d(),m=!1,R(v)}}}function ws({target:e}){e.select()}function bs(e){let{key:t}=e;isNaN(t)&&!["Backspace","ArrowRight","ArrowLeft","Tab"].includes(t)&&e.preventDefault()}function Is(e,t,n){let s,a,r,l,i,c=M;e.$$.on_destroy.push((()=>c()));var{campaign:o=null}=t,{initiativeEntry:u=null}=t,{showName:h=!0}=t,{showHeader:f=!1}=t,{showAddButton:p=!1}=t,{showRemoveButton:d=!1}=t,{showDetails:m=!1}=t,{showPopup:g=!0}=t,{index:$=null}=t,{firstItem:v=!1}=t;return e.$$set=e=>{"campaign"in e&&n(11,o=e.campaign),"initiativeEntry"in e&&n(0,u=e.initiativeEntry),"showName"in e&&n(1,h=e.showName),"showHeader"in e&&n(12,f=e.showHeader),"showAddButton"in e&&n(2,p=e.showAddButton),"showRemoveButton"in e&&n(3,d=e.showRemoveButton),"showDetails"in e&&n(4,m=e.showDetails),"showPopup"in e&&n(13,g=e.showPopup),"index"in e&&n(14,$=e.index),"firstItem"in e&&n(15,v=e.firstItem)},e.$$.update=()=>{2048&e.$$.dirty&&(n(5,s=o.campaignStore),c(),c=X(s,(e=>n(16,i=e)))),53248&e.$$.dirty&&n(6,a=f&&(0===$||v)),65537&e.$$.dirty&&n(7,r=function(e){let t=[];if("partyMember"===e.type){let n=o.party.getById(e.data);t.push(`Level: ${n.level}`),t.push(`Passive Perception: ${n.pp}`)}return t.join(" • ")}(u)),2049&e.$$.dirty&&n(8,l=u===o.initiative.getCurrentEntry())},[u,h,p,d,m,s,a,r,l,function(){o.initiative.removeEntry(u)},function(){queueMicrotask((()=>{o.refresh()}))},o,f,g,$,v,i,function(){u.initiative=this.value,n(0,u)},function(){u.currentHealth=this.value,n(0,u)},function(){u.maxHealth=this.value,n(0,u)}]}class xs extends o{constructor(e){super(),u(this,e,Is,Es,h,{campaign:11,initiativeEntry:0,showName:1,showHeader:12,showAddButton:2,showRemoveButton:3,showDetails:4,showPopup:13,index:14,firstItem:15})}}function Ts(e,t,n){const s=e.slice();return s[6]=t[n],s[8]=n,s}function Ss(e){let t,n;return t=new xs({props:{campaign:e[0],initiativeEntry:e[6],index:e[8]}}),{c(){N(t.$$.fragment)},l(e){P(t.$$.fragment,e)},m(e,s){k(t,e,s),n=!0},p(e,n){const s={};1&n&&(s.campaign=e[0]),4&n&&(s.initiativeEntry=e[6]),t.$set(s)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Ns(e){let t,n,s,a,r,l,i,c,o,u,h,m,T,N,P,D=e[2],k=[];for(let f=0;f<D.length;f+=1)k[f]=Ss(Ts(e,D,f));const C=e=>V(k[e],1,1,(()=>{k[e]=null}));return{c(){t=f("div"),n=f("header"),s=f("section"),a=f("p"),r=p("Rounds"),l=d(),i=f("input"),c=d();for(let e=0;e<k.length;e+=1)k[e].c();o=d(),u=f("button"),h=f("span"),m=p(" Add party to initiative"),this.h()},l(e){t=g(e,"DIV",{class:!0});var f=$(t);n=g(f,"HEADER",{class:!0});var p=$(n);s=g(p,"SECTION",{class:!0});var d=$(s);a=g(d,"P",{class:!0});var w=$(a);r=v(w,"Rounds"),w.forEach(y),l=E(d),i=g(d,"INPUT",{type:!0,min:!0,class:!0}),d.forEach(y),p.forEach(y),c=E(f);for(let t=0;t<k.length;t+=1)k[t].l(f);o=E(f),u=g(f,"BUTTON",{class:!0});var b=$(u);h=g(b,"SPAN",{class:!0}),$(h).forEach(y),m=v(b," Add party to initiative"),b.forEach(y),f.forEach(y),this.h()},h(){w(a,"class","svelte-1g5lxic"),w(i,"type","number"),w(i,"min","1"),w(i,"class","svelte-1g5lxic"),w(s,"class","svelte-1g5lxic"),w(n,"class","svelte-1g5lxic"),w(h,"class","mdi mdi-account-multiple-plus"),w(u,"class","svelte-1g5lxic"),w(t,"class","initiativeManager")},m(f,p){b(f,t,p),I(t,n),I(n,s),I(s,a),I(a,r),I(s,l),I(s,i),A(i,e[1].initiativeRound),I(t,c);for(let e=0;e<k.length;e+=1)k[e].m(t,null);I(t,o),I(t,u),I(u,h),I(u,m),T=!0,N||(P=[x(i,"input",e[5]),x(i,"blur",(function(){ce(e[0].refresh)&&e[0].refresh.apply(this,arguments)})),x(u,"click",e[4])],N=!0)},p(n,[s]){if(e=n,2&s&&ie(i.value)!==e[1].initiativeRound&&A(i,e[1].initiativeRound),5&s){let n;for(D=e[2],n=0;n<D.length;n+=1){const a=Ts(e,D,n);k[n]?(k[n].p(a,s),O(k[n],1)):(k[n]=Ss(a),k[n].c(),O(k[n],1),k[n].m(t,o))}for(j(),n=D.length;n<k.length;n+=1)C(n);B()}},i(e){if(!T){for(let e=0;e<D.length;e+=1)O(k[e]);T=!0}},o(e){k=k.filter(Boolean);for(let t=0;t<k.length;t+=1)V(k[t]);T=!1},d(e){e&&y(t),S(k,e),N=!1,R(P)}}}function Ps(e,t,n){let s,a;var{campaign:r}=t;const{campaignStore:l}=r;return ae(e,l,(e=>n(1,a=e))),e.$$set=e=>{"campaign"in e&&n(0,r=e.campaign)},e.$$.update=()=>{3&e.$$.dirty&&n(2,s=r.initiative.getSortedInitiative(a))},[r,a,s,l,function(){r.initiative.addPartyToInitiative()},function(){a.initiativeRound=ie(this.value),l.set(a)}]}class Ds extends o{constructor(e){super(),u(this,e,Ps,Ns,h,{campaign:0})}}function ks(e){let t,n,s,a,r,l,i,c=e[3].name+"";return{c(){t=f("button"),n=f("span"),a=d(),r=p(c),this.h()},l(e){t=g(e,"BUTTON",{class:!0});var s=$(t);n=g(s,"SPAN",{class:!0}),$(n).forEach(y),a=E(s),r=v(s,c),s.forEach(y),this.h()},h(){w(n,"class",s="mdi mdi-"+e[8](e[3])+" svelte-k5027j"),w(t,"class","svelte-k5027j")},m(s,c){b(s,t,c),I(t,n),I(t,a),I(t,r),l||(i=x(t,"click",e[9]),l=!0)},p(e,t){8&t&&s!==(s="mdi mdi-"+e[8](e[3])+" svelte-k5027j")&&w(n,"class",s),8&t&&c!==(c=e[3].name+"")&&T(r,c)},d(e){e&&y(t),l=!1,i()}}}function Os(e){let t,n;return{c(){t=f("span"),n=p(" Initiative"),this.h()},l(e){t=g(e,"SPAN",{class:!0}),$(t).forEach(y),n=v(e," Initiative"),this.h()},h(){w(t,"class","mdi mdi-sword-cross")},m(e,s){b(e,t,s),b(e,n,s)},p:M,d(e){e&&y(t),e&&y(n)}}}function Vs(e){let t,n,s,a,r=e[4].name+"";return{c(){t=f("span"),s=d(),a=p(r),this.h()},l(e){t=g(e,"SPAN",{class:!0}),$(t).forEach(y),s=E(e),a=v(e,r),this.h()},h(){w(t,"class",n="mdi mdi-"+e[8](e[4])+" svelte-k5027j")},m(e,n){b(e,t,n),b(e,s,n),b(e,a,n)},p(e,s){16&s&&n!==(n="mdi mdi-"+e[8](e[4])+" svelte-k5027j")&&w(t,"class",n),16&s&&r!==(r=e[4].name+"")&&T(a,r)},d(e){e&&y(t),e&&y(s),e&&y(a)}}}function Cs(e){let t,n,s,a,r,l,i,c=e[5].name+"";return{c(){t=f("button"),n=f("span"),a=d(),r=p(c),this.h()},l(e){t=g(e,"BUTTON",{class:!0});var s=$(t);n=g(s,"SPAN",{class:!0}),$(n).forEach(y),a=E(s),r=v(s,c),s.forEach(y),this.h()},h(){w(n,"class",s="mdi mdi-"+e[8](e[5])+" svelte-k5027j"),w(t,"class","svelte-k5027j")},m(s,c){b(s,t,c),I(t,n),I(t,a),I(t,r),l||(i=x(t,"click",e[10]),l=!0)},p(e,t){32&t&&s!==(s="mdi mdi-"+e[8](e[5])+" svelte-k5027j")&&w(n,"class",s),32&t&&c!==(c=e[5].name+"")&&T(r,c)},d(e){e&&y(t),l=!1,i()}}}function Hs(e){let t,n,s;return n=new Ds({props:{campaign:e[0]}}),{c(){t=f("div"),N(n.$$.fragment),this.h()},l(e){t=g(e,"DIV",{class:!0});var s=$(t);P(n.$$.fragment,s),s.forEach(y),this.h()},h(){w(t,"class","floating svelte-k5027j")},m(e,a){b(e,t,a),k(n,t,null),s=!0},p(e,t){const s={};1&t&&(s.campaign=e[0]),n.$set(s)},i(e){s||(O(n.$$.fragment,e),s=!0)},o(e){V(n.$$.fragment,e),s=!1},d(e){e&&y(t),C(n)}}}function js(e){let t,n,s,a,r,l,i,c,o,u,h,p=e[2]&&ks(e);function v(e,t){return e[2]?Vs:Os}let T=v(e),S=T(e),N=e[2]&&Cs(e),P=e[1]&&Hs(e);return{c(){t=f("section"),p&&p.c(),n=d(),s=f("button"),S.c(),r=d(),N&&N.c(),i=d(),P&&P.c(),c=m(),this.h()},l(e){t=g(e,"SECTION",{class:!0});var a=$(t);p&&p.l(a),n=E(a),s=g(a,"BUTTON",{class:!0});var l=$(s);S.l(l),l.forEach(y),r=E(a),N&&N.l(a),a.forEach(y),i=E(e),P&&P.l(e),c=m(),this.h()},h(){w(s,"class",a="current "+(e[1]&&"open")+" svelte-k5027j"),w(t,"class",l="initiativeBar "+(e[2]&&"active")+" svelte-k5027j")},m(a,l){b(a,t,l),p&&p.m(t,null),I(t,n),I(t,s),S.m(s,null),I(t,r),N&&N.m(t,null),b(a,i,l),P&&P.m(a,l),b(a,c,l),o=!0,u||(h=x(s,"click",e[7]),u=!0)},p(e,[r]){e[2]?p?p.p(e,r):(p=ks(e),p.c(),p.m(t,n)):p&&(p.d(1),p=null),T===(T=v(e))&&S?S.p(e,r):(S.d(1),S=T(e),S&&(S.c(),S.m(s,null))),(!o||2&r&&a!==(a="current "+(e[1]&&"open")+" svelte-k5027j"))&&w(s,"class",a),e[2]?N?N.p(e,r):(N=Cs(e),N.c(),N.m(t,null)):N&&(N.d(1),N=null),(!o||4&r&&l!==(l="initiativeBar "+(e[2]&&"active")+" svelte-k5027j"))&&w(t,"class",l),e[1]?P?(P.p(e,r),2&r&&O(P,1)):(P=Hs(e),P.c(),O(P,1),P.m(c.parentNode,c)):P&&(j(),V(P,1,1,(()=>{P=null})),B())},i(e){o||(O(P),o=!0)},o(e){V(P),o=!1},d(e){e&&y(t),p&&p.d(),S.d(),N&&N.d(),e&&y(i),P&&P.d(e),e&&y(c),u=!1,h()}}}function Bs(e,t,n){let s,a,r,l,i;var{campaign:c}=t;const{campaignStore:o}=c;ae(e,o,(e=>n(11,i=e)));var u=!1;return e.$$set=e=>{"campaign"in e&&n(0,c=e.campaign)},e.$$.update=()=>{2049&e.$$.dirty&&n(2,s=c.initiative.getCombatStarted(i)),2049&e.$$.dirty&&n(3,[a,r,l]=c.initiative.getInitiativeOverview(i),a,(n(4,r),n(0,c),n(11,i)),(n(5,l),n(0,c),n(11,i)))},[c,u,s,a,r,l,o,function(){n(1,u=!u)},function(e){return e&&"monster"===e.type?"sword-cross":"account"},function(){c.initiative.previousInitiative()},function(){c.initiative.nextInitiative()},i]}class As extends o{constructor(e){super(),u(this,e,Bs,js,h,{campaign:0})}}function Ms(e){let t,n,s,a,r=e[2]&&Rs(),l=e[3]&&Us(),i=e[4]&&_s(),c=e[5]&&Ls();return{c(){t=f("div"),r&&r.c(),n=d(),l&&l.c(),s=d(),i&&i.c(),a=d(),c&&c.c(),this.h()},l(e){t=g(e,"DIV",{class:!0});var o=$(t);r&&r.l(o),n=E(o),l&&l.l(o),s=E(o),i&&i.l(o),a=E(o),c&&c.l(o),o.forEach(y),this.h()},h(){w(t,"class","itemsHeader svelte-1g3j8w3")},m(e,o){b(e,t,o),r&&r.m(t,null),I(t,n),l&&l.m(t,null),I(t,s),i&&i.m(t,null),I(t,a),c&&c.m(t,null)},p(e,o){e[2]?r||(r=Rs(),r.c(),r.m(t,n)):r&&(r.d(1),r=null),e[3]?l||(l=Us(),l.c(),l.m(t,s)):l&&(l.d(1),l=null),e[4]?i||(i=_s(),i.c(),i.m(t,a)):i&&(i.d(1),i=null),e[5]?c||(c=Ls(),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},d(e){e&&y(t),r&&r.d(),l&&l.d(),i&&i.d(),c&&c.d()}}}function Rs(e){let t,n;return{c(){t=f("div"),n=p("Feature"),this.h()},l(e){t=g(e,"DIV",{class:!0});var s=$(t);n=v(s,"Feature"),s.forEach(y),this.h()},h(){w(t,"class","nameWrapper")},m(e,s){b(e,t,s),I(t,n)},d(e){e&&y(t)}}}function Us(e){let t;return{c(){t=f("div"),this.h()},l(e){t=g(e,"DIV",{class:!0}),$(t).forEach(y),this.h()},h(){w(t,"class","wrapper centerText svelte-1g3j8w3")},m(e,n){b(e,t,n)},d(e){e&&y(t)}}}function _s(e){let t;return{c(){t=f("div"),this.h()},l(e){t=g(e,"DIV",{class:!0}),$(t).forEach(y),this.h()},h(){w(t,"class","wrapper centerText svelte-1g3j8w3")},m(e,n){b(e,t,n)},d(e){e&&y(t)}}}function Ls(e){let t;return{c(){t=f("div"),this.h()},l(e){t=g(e,"DIV",{class:!0}),$(t).forEach(y),this.h()},h(){w(t,"class","wrapper dropdownIndicatorWrapper")},m(e,n){b(e,t,n)},d(e){e&&y(t)}}}function zs(e){let t,n,s,a,r,l,i,c,o,u,h,m,S=e[0].name+"";return{c(){t=f("div"),n=f("div"),s=f("p"),a=f("span"),l=d(),i=p(S),c=d(),o=f("p"),u=p(e[9]),this.h()},l(r){t=g(r,"DIV",{class:!0});var h=$(t);n=g(h,"DIV",{class:!0});var f=$(n);s=g(f,"P",{class:!0});var p=$(s);a=g(p,"SPAN",{class:!0}),$(a).forEach(y),l=E(p),i=v(p,S),p.forEach(y),c=E(f),o=g(f,"P",{class:!0});var d=$(o);u=v(d,e[9]),d.forEach(y),f.forEach(y),h.forEach(y),this.h()},h(){w(a,"class",r="mdi mdi-"+e[10]+" svelte-1g3j8w3"),w(s,"class","spellName svelte-1g3j8w3"),w(o,"class","spellDescription svelte-1g3j8w3"),w(n,"class","overflowWrapper"),w(t,"class","nameWrapper svelte-1g3j8w3")},m(r,f){b(r,t,f),I(t,n),I(n,s),I(s,a),I(s,l),I(s,i),I(n,c),I(n,o),I(o,u),h||(m=x(t,"click",e[12]),h=!0)},p(e,t){1024&t&&r!==(r="mdi mdi-"+e[10]+" svelte-1g3j8w3")&&w(a,"class",r),1&t&&S!==(S=e[0].name+"")&&T(i,S),512&t&&T(u,e[9])},d(e){e&&y(t),h=!1,m()}}}function Xs(e){let t,n,s,a,r,l,i,c=e[11]&&qs(e),o="monster"===e[0].dataType&&Fs(e);return{c(){t=f("div"),n=f("button"),s=f("span"),a=d(),c&&c.c(),r=d(),o&&o.c(),this.h()},l(e){t=g(e,"DIV",{class:!0});var l=$(t);n=g(l,"BUTTON",{class:!0});var i=$(n);s=g(i,"SPAN",{class:!0}),$(s).forEach(y),i.forEach(y),a=E(l),c&&c.l(l),r=E(l),o&&o.l(l),l.forEach(y),this.h()},h(){w(s,"class","mdi mdi-pin-outline svelte-1g3j8w3"),w(n,"class","svelte-1g3j8w3"),w(t,"class","buttonWrapper svelte-1g3j8w3")},m(u,h){b(u,t,h),I(t,n),I(n,s),I(t,a),c&&c.m(t,null),I(t,r),o&&o.m(t,null),l||(i=x(n,"click",e[15]),l=!0)},p(e,n){e[11]?c?c.p(e,n):(c=qs(e),c.c(),c.m(t,r)):c&&(c.d(1),c=null),"monster"===e[0].dataType?o?o.p(e,n):(o=Fs(e),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},d(e){e&&y(t),c&&c.d(),o&&o.d(),l=!1,i()}}}function qs(e){let t,n,s,a;return{c(){t=f("button"),n=f("span"),this.h()},l(e){t=g(e,"BUTTON",{class:!0});var s=$(t);n=g(s,"SPAN",{class:!0}),$(n).forEach(y),s.forEach(y),this.h()},h(){w(n,"class","mdi mdi-book-open-page-variant svelte-1g3j8w3"),w(t,"class","svelte-1g3j8w3")},m(r,l){b(r,t,l),I(t,n),s||(a=x(t,"click",e[13]),s=!0)},p:M,d(e){e&&y(t),s=!1,a()}}}function Fs(e){let t,n,s,a;return{c(){t=f("button"),n=f("span"),this.h()},l(e){t=g(e,"BUTTON",{class:!0});var s=$(t);n=g(s,"SPAN",{class:!0}),$(n).forEach(y),s.forEach(y),this.h()},h(){w(n,"class","mdi mdi-sword svelte-1g3j8w3"),w(t,"class","svelte-1g3j8w3")},m(r,l){b(r,t,l),I(t,n),s||(a=x(t,"click",e[14]),s=!0)},p:M,d(e){e&&y(t),s=!1,a()}}}function Ws(e){let t,n,s,a,r,l,i,c=e[8]&&Ms(e),o=e[2]&&zs(e),u=e[7]&&Xs(e);function h(t){e[19](t)}let p={entry:e[0],campaign:e[1]};return void 0!==e[6]&&(p.open=e[6]),r=new Ae({props:p}),H.push((()=>_(r,"open",h))),{c(){c&&c.c(),t=d(),n=f("div"),o&&o.c(),s=d(),u&&u.c(),a=d(),N(r.$$.fragment),this.h()},l(e){c&&c.l(e),t=E(e),n=g(e,"DIV",{class:!0});var l=$(n);o&&o.l(l),s=E(l),u&&u.l(l),l.forEach(y),a=E(e),P(r.$$.fragment,e),this.h()},h(){w(n,"class","searchResult svelte-1g3j8w3")},m(e,l){c&&c.m(e,l),b(e,t,l),b(e,n,l),o&&o.m(n,null),I(n,s),u&&u.m(n,null),b(e,a,l),k(r,e,l),i=!0},p(e,[a]){e[8]?c?c.p(e,a):(c=Ms(e),c.c(),c.m(t.parentNode,t)):c&&(c.d(1),c=null),e[2]?o?o.p(e,a):(o=zs(e),o.c(),o.m(n,s)):o&&(o.d(1),o=null),e[7]?u?u.p(e,a):(u=Xs(e),u.c(),u.m(n,null)):u&&(u.d(1),u=null);const i={};1&a&&(i.entry=e[0]),2&a&&(i.campaign=e[1]),!l&&64&a&&(l=!0,i.open=e[6],L((()=>l=!1))),r.$set(i)},i(e){i||(O(r.$$.fragment,e),i=!0)},o(e){V(r.$$.fragment,e),i=!1},d(e){c&&c.d(e),e&&y(t),e&&y(n),o&&o.d(),u&&u.d(),e&&y(a),C(r,e)}}}function Gs(e,t,n){let s,a,r,l,i;var{entry:c}=t,{campaign:o=U("campaign")}=t,{showName:u=!0}=t,{showHeader:h=!1}=t,{showAddButton:f=!1}=t,{showRemoveButton:p=!1}=t,{showDetails:d=!1}=t,{index:m=null}=t,{firstItem:g=!1}=t,$=!1,v={class:"bag-personal",spell:"auto-fix",monster:"sword-cross",item:"treasure-chest",race:"account",condition:"chart-bubble",language:"translate",background:"bookshelf"};return e.$$set=e=>{"entry"in e&&n(0,c=e.entry),"campaign"in e&&n(1,o=e.campaign),"showName"in e&&n(2,u=e.showName),"showHeader"in e&&n(16,h=e.showHeader),"showAddButton"in e&&n(3,f=e.showAddButton),"showRemoveButton"in e&&n(4,p=e.showRemoveButton),"showDetails"in e&&n(5,d=e.showDetails),"index"in e&&n(17,m=e.index),"firstItem"in e&&n(18,g=e.firstItem)},e.$$.update=()=>{var t;2&e.$$.dirty&&n(7,s=!!o),458752&e.$$.dirty&&n(8,a=h&&(0===m||g)),1&e.$$.dirty&&n(9,r=c.getDescription(c)),1&e.$$.dirty&&n(10,(t=c.dataType,l=v[t])),1&e.$$.dirty&&n(11,i=void 0!==c.source&&void 0!==De[c.source.toLowerCase()]),64&e.$$.dirty&&console.log({popupOpen:$})},[c,o,u,f,p,d,$,s,a,r,l,i,function(){n(6,$=!0),console.log($)},function(){o.mainManager.showSourcePage(c.source,c.page)},function(){o.initiative.addMonster(c)},function(){o.screens.addItemToCurrentScreen(c.name,"hashRef",c.hash)},h,m,g,function(e){n(6,$=e)}]}class Ks extends o{constructor(e){super(),u(this,e,Gs,Ws,h,{entry:0,campaign:1,showName:2,showHeader:16,showAddButton:3,showRemoveButton:4,showDetails:5,index:17,firstItem:18})}}function Ys(e,t,n){const s=e.slice();return s[10]=t[n],s}function Js(e){let t,n,s,a;const r=[Zs,Qs],l=[];function i(e,t){return e[5]?0:1}return n=i(e),s=l[n]=r[n](e),{c(){t=f("div"),s.c(),this.h()},l(e){t=g(e,"DIV",{class:!0});var n=$(t);s.l(n),n.forEach(y),this.h()},h(){w(t,"class","results svelte-56b6y6")},m(e,s){b(e,t,s),l[n].m(t,null),a=!0},p(e,a){let c=n;n=i(e),n===c?l[n].p(e,a):(j(),V(l[c],1,1,(()=>{l[c]=null})),B(),s=l[n],s?s.p(e,a):(s=l[n]=r[n](e),s.c()),O(s,1),s.m(t,null))},i(e){a||(O(s),a=!0)},o(e){V(s),a=!1},d(e){e&&y(t),l[n].d()}}}function Qs(e){let t,n;return{c(){t=f("p"),n=p("No results")},l(e){t=g(e,"P",{});var s=$(t);n=v(s,"No results"),s.forEach(y)},m(e,s){b(e,t,s),I(t,n)},p:M,i:M,o:M,d(e){e&&y(t)}}}function Zs(e){let t,n,s=e[2],a=[];for(let l=0;l<s.length;l+=1)a[l]=ea(Ys(e,s,l));const r=e=>V(a[e],1,1,(()=>{a[e]=null}));return{c(){for(let e=0;e<a.length;e+=1)a[e].c();t=m()},l(e){for(let t=0;t<a.length;t+=1)a[t].l(e);t=m()},m(e,s){for(let t=0;t<a.length;t+=1)a[t].m(e,s);b(e,t,s),n=!0},p(e,n){if(5&n){let l;for(s=e[2],l=0;l<s.length;l+=1){const r=Ys(e,s,l);a[l]?(a[l].p(r,n),O(a[l],1)):(a[l]=ea(r),a[l].c(),O(a[l],1),a[l].m(t.parentNode,t))}for(j(),l=s.length;l<a.length;l+=1)r(l);B()}},i(e){if(!n){for(let e=0;e<s.length;e+=1)O(a[e]);n=!0}},o(e){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)V(a[t]);n=!1},d(e){S(a,e),e&&y(t)}}}function ea(e){let t,n;return t=new Ks({props:{entry:e[10],campaign:e[0]}}),{c(){N(t.$$.fragment)},l(e){P(t.$$.fragment,e)},m(e,s){k(t,e,s),n=!0},p(e,n){const s={};4&n&&(s.entry=e[10]),1&n&&(s.campaign=e[0]),t.$set(s)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function ta(e){let t,n,s,a,r,l,i=!e[4]&&e[3]&&Js(e);return{c(){t=f("section"),n=f("input"),s=d(),i&&i.c(),this.h()},l(e){t=g(e,"SECTION",{class:!0});var a=$(t);n=g(a,"INPUT",{class:!0,placeholder:!0}),s=E(a),i&&i.l(a),a.forEach(y),this.h()},h(){w(n,"class","searchBar svelte-56b6y6"),w(n,"placeholder","Search"),w(t,"class","svelte-56b6y6")},m(c,o){b(c,t,o),I(t,n),A(n,e[1]),I(t,s),i&&i.m(t,null),a=!0,r||(l=[x(n,"input",e[8]),x(n,"focus",e[7]),re(ye.call(null,t,e[6]))],r=!0)},p(e,[s]){2&s&&n.value!==e[1]&&A(n,e[1]),!e[4]&&e[3]?i?(i.p(e,s),24&s&&O(i,1)):(i=Js(e),i.c(),O(i,1),i.m(t,null)):i&&(j(),V(i,1,1,(()=>{i=null})),B())},i(e){a||(O(i),a=!0)},o(e){V(i),a=!1},d(e){e&&y(t),i&&i.d(),r=!1,R(l)}}}function na(e,t,n){let s,a,r;var{campaign:l}=t,i=!1;var c="",o=Object.values(ke);return e.$$set=e=>{"campaign"in e&&n(0,l=e.campaign)},e.$$.update=()=>{2&e.$$.dirty&&n(4,s=""===c),2&e.$$.dirty&&n(2,r=Me(o,c).filter((e=>e.score>0)).sort(((e,t)=>t.score-e.score)).slice(0,15).reverse()),4&e.$$.dirty&&n(5,a=0!==r.length),4&e.$$.dirty&&console.log(r)},[l,c,r,i,s,a,function(){n(3,i=!1)},function(){n(3,i=!0)},function(){c=this.value,n(1,c)}]}class sa extends o{constructor(e){super(),u(this,e,na,ta,h,{campaign:0})}}function aa(e){let t,n,s,a;return{c(){t=f("button"),n=f("span"),this.h()},l(e){t=g(e,"BUTTON",{class:!0});var s=$(t);n=g(s,"SPAN",{class:!0}),$(n).forEach(y),s.forEach(y),this.h()},h(){w(n,"class","mdi mdi-note-outline svelte-dzovid"),w(t,"class","svelte-dzovid")},m(r,l){b(r,t,l),I(t,n),s||(a=x(t,"click",e[0]),s=!0)},p:M,i:M,o:M,d(e){e&&y(t),s=!1,a()}}}function ra(e,t,n){var{campaign:s=U("campaign")}=t;return e.$$set=e=>{"campaign"in e&&n(1,s=e.campaign)},[function(){s.screens.addItemToCurrentScreen("New note","note",{content:""})},s]}class la extends o{constructor(e){super(),u(this,e,ra,aa,h,{campaign:1})}}function ia(e){let t,n,s,a,r,l,i,c,o,u,h,p,m,v,x,T,S,D,H;n=new je({props:{store:e[0].campaignStore}});var A=e[3];function M(e){return{props:{campaign:e[0]}}}return A&&(r=new A(M(e))),c=new Kn({props:{campaign:e[0]}}),u=new ns({}),p=new As({props:{campaign:e[0]}}),v=new hs({props:{campaign:e[0]}}),T=new sa({props:{campaign:e[0]}}),D=new la({}),{c(){t=f("main"),N(n.$$.fragment),s=d(),a=f("section"),r&&N(r.$$.fragment),l=d(),i=f("nav"),N(c.$$.fragment),o=d(),N(u.$$.fragment),h=d(),N(p.$$.fragment),m=d(),N(v.$$.fragment),x=d(),N(T.$$.fragment),S=d(),N(D.$$.fragment),this.h()},l(e){t=g(e,"MAIN",{class:!0});var f=$(t);P(n.$$.fragment,f),s=E(f),a=g(f,"SECTION",{class:!0});var d=$(a);r&&P(r.$$.fragment,d),d.forEach(y),l=E(f),i=g(f,"NAV",{class:!0});var w=$(i);P(c.$$.fragment,w),o=E(w),P(u.$$.fragment,w),h=E(w),P(p.$$.fragment,w),m=E(w),P(v.$$.fragment,w),x=E(w),P(T.$$.fragment,w),S=E(w),P(D.$$.fragment,w),w.forEach(y),f.forEach(y),this.h()},h(){w(a,"class","mainArea svelte-wmyv5q"),w(i,"class","toolBar svelte-wmyv5q"),w(t,"class","svelte-wmyv5q")},m(e,f){b(e,t,f),k(n,t,null),I(t,s),I(t,a),r&&k(r,a,null),I(t,l),I(t,i),k(c,i,null),I(i,o),k(u,i,null),I(i,h),k(p,i,null),I(i,m),k(v,i,null),I(i,x),k(T,i,null),I(i,S),k(D,i,null),H=!0},p(e,t){const s={};1&t&&(s.store=e[0].campaignStore),n.$set(s);const l={};if(1&t&&(l.campaign=e[0]),A!==(A=e[3])){if(r){j();const e=r;V(e.$$.fragment,1,0,(()=>{C(e,1)})),B()}A?(r=new A(M(e)),N(r.$$.fragment),O(r.$$.fragment,1),k(r,a,null)):r=null}else A&&r.$set(l);const i={};1&t&&(i.campaign=e[0]),c.$set(i);const o={};1&t&&(o.campaign=e[0]),p.$set(o);const u={};1&t&&(u.campaign=e[0]),v.$set(u);const h={};1&t&&(h.campaign=e[0]),T.$set(h)},i(e){H||(O(n.$$.fragment,e),r&&O(r.$$.fragment,e),O(c.$$.fragment,e),O(u.$$.fragment,e),O(p.$$.fragment,e),O(v.$$.fragment,e),O(T.$$.fragment,e),O(D.$$.fragment,e),H=!0)},o(e){V(n.$$.fragment,e),r&&V(r.$$.fragment,e),V(c.$$.fragment,e),V(u.$$.fragment,e),V(p.$$.fragment,e),V(v.$$.fragment,e),V(T.$$.fragment,e),V(D.$$.fragment,e),H=!1},d(e){e&&y(t),C(n),r&&C(r),C(c),C(u),C(p),C(v),C(T),C(D)}}}function ca(e){let t,n,s,a,r,l;function i(t){e[7](t)}let c={datasetHash:e[2],$$slots:{default:[ia]},$$scope:{ctx:e}};return void 0!==e[4].dataset&&(c.changeDataset=e[4].dataset),t=new He({props:c}),H.push((()=>_(t,"changeDataset",i))),{c(){N(t.$$.fragment),s=d()},l(e){P(t.$$.fragment,e),s=E(e)},m(e,n){k(t,e,n),b(e,s,n),a=!0,r||(l=x(document.body,"keydown",oa),r=!0)},p(e,[s]){const a={};4&s&&(a.datasetHash=e[2]),521&s&&(a.$$scope={dirty:s,ctx:e}),!n&&16&s&&(n=!0,a.changeDataset=e[4].dataset,L((()=>n=!1))),t.$set(a)},i(e){a||(O(t.$$.fragment,e),a=!0)},o(e){V(t.$$.fragment,e),a=!1},d(e){C(t,e),e&&y(s),r=!1,l()}}}function oa(e){if(e.ctrlKey){var{code:t}=e;const n={KeyU:()=>playStoredPlaylist("peaceful"),KeyI:()=>playStoredPlaylist("inn"),KeyO:()=>playStoredPlaylist("combat"),Backslash:()=>manualStopPlaylist()};n[t]&&(e.preventDefault(),n[t]())}}function ua(e,t,n){let s,a,r,l,i,c,o=M,u=M;e.$$.on_destroy.push((()=>o())),e.$$.on_destroy.push((()=>u()));var{params:h}=t;return e.$$set=e=>{"params"in e&&n(5,h=e.params)},e.$$.update=()=>{32&e.$$.dirty&&(n(0,s=zn(h.campaignId)),o(),o=X(s,(e=>n(6,i=e)))),64&e.$$.dirty&&(n(1,a=i.campaignStore),u(),u=X(a,(e=>n(4,c=e)))),64&e.$$.dirty&&n(2,r=i.campaignStore.get().dataset),64&e.$$.dirty&&n(3,l=i.mainManager.get().component),1&e.$$.dirty&&(window.campaign=s),1&e.$$.dirty&&J("campaign",s)},[s,a,r,l,c,h,i,function(t){e.$$.not_equal(c.dataset,t)&&(c.dataset=t,a.set(c))}]}export default class extends o{constructor(e){super(),u(this,e,ua,ca,h,{params:5})}}
