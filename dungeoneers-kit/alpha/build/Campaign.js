var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,l=(t,n,s)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s,i=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&l(e,n,t[n]);if(s)for(var n of s(t))r.call(t,n)&&l(e,n,t[n]);return e},c=(e,s)=>t(e,n(s));import{S as o,i as u,s as h,e as f,t as d,f as p,J as m,g as $,h as v,c as g,d as y,j as E,k as w,a as I,l as b,u as x,b as T,W as S,L as N,M as k,X as P,N as D,H as O,I as V,O as z,Y as C,C as H,G as B,_ as A,n as M,$ as R,a0 as j,a1 as U,a2 as _,z as L,a3 as q,a4 as X,a5 as F,v as W,a6 as G,a7 as K,a8 as Y,T as J,a9 as Q,E as Z,F as ee,aa as te,ab as ne,ac as se,Q as ae,ad as re,ae as le,af as ie,ag as ce}from"./vendor.js";import{g as oe,E as ue,C as he,I as fe,M as de,S as pe,a as me,b as $e,P as ve,c as ge,d as ye}from"./SpellPopup.js";import{d as Ee,t as we,m as Ie,c as be,g as xe,a as Te,b as Se,e as Ne,f as ke,i as Pe,s as De}from"./index.js";import{B as Oe,R as Ve,F as ze,D as Ce,S as He}from"./DatasetGuard.js";import{L as Be,D as Ae,s as Me}from"./searchResultScores.js";import{G as Re,C as je,A as Ue,T as _e}from"./GenericTable.js";const Le={id:"root",name:"DM Screen",items:[]};var qe,Xe;(Xe=qe||(qe={})).HASH_REF="hashRef",Xe.NPC="npc",Xe.NOTE="note";const Fe={id:null,type:null,data:null,top:32,left:32,width:300,height:300,index:1,pinned:!1};const We={version:1,name:"New Campaign",id:null,dataset:null,currentManager:"default",initiative:[],currentScreenId:"root",screens:[Le],partyMembers:[],currentInitiativeIndex:0,initiativeRound:1,savedEncounters:[],encounters:[]},Ge={id:null,name:"New party member",level:1,pp:10,conditions:[]},Ke=[[25,50,75,100],[50,100,150,200],[75,150,225,400],[125,250,375,500],[250,500,750,1100],[300,600,900,1400],[250,750,1100,1700],[450,900,1400,2100],[550,1100,1600,2400],[600,1200,1900,2800],[800,1600,2400,3600],[1e3,2e3,3e3,4500],[1100,2200,3400,5100],[1250,2500,3800,5700],[1400,2800,4300,6400],[1600,3200,4800,7200],[2e3,3900,5900,8800],[2100,4200,6300,9500],[2400,4900,7300,10900],[2800,5700,8500,127e3]],Ye={1:300,2:600,3:1200,4:1700,5:3500,6:4e3,7:5e3,8:6e3,9:7500,10:9e3,11:10500,12:11500,13:13500,14:15e3,15:18e3,16:2e4,17:25e3,18:27e3,19:3e4,20:4e4};const Je={initiative:0,type:"manual",name:"New initiative entry",deathSaves:{fails:0,successes:0},currentHealth:0,maxHealth:0,data:null};function Qe(){return Ee(Je)}function Ze(e,t,n){const s=e.slice();return s[13]=t[n],s[15]=n,s}function et(e,t,n){const s=e.slice();return s[16]=t[n],s}function tt(e){let t,n=e[13].subsections,s=[];for(let a=0;a<n.length;a+=1)s[a]=nt(et(e,n,a));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=m()},l(e){for(let t=0;t<s.length;t+=1)s[t].l(e);t=m()},m(e,n){for(let t=0;t<s.length;t+=1)s[t].m(e,n);I(e,t,n)},p(e,a){if(80&a){let r;for(n=e[13].subsections,r=0;r<n.length;r+=1){const l=et(e,n,r);s[r]?s[r].p(l,a):(s[r]=nt(l),s[r].c(),s[r].m(t.parentNode,t))}for(;r<s.length;r+=1)s[r].d(1);s.length=n.length}},d(e){S(s,e),e&&y(t)}}}function nt(e){let t,n,s,a,r=e[16].name+"";function l(){return e[10](e[16])}return{c(){t=f("div"),n=d(r),this.h()},l(e){t=$(e,"DIV",{class:!0});var s=v(t);n=g(s,r),s.forEach(y),this.h()},h(){w(t,"class","subsection svelte-1ekbfpl")},m(e,r){I(e,t,r),b(t,n),s||(a=x(t,"click",l),s=!0)},p(t,s){e=t,16&s&&r!==(r=e[16].name+"")&&T(n,r)},d(e){e&&y(t),s=!1,a()}}}function st(e){let t,n,s,a,r,l,i,c=e[13].name+"";function o(){return e[9](e[15])}let u=e[15]===e[0]&&tt(e);return{c(){t=f("div"),n=d(c),a=p(),u&&u.c(),r=m(),this.h()},l(e){t=$(e,"DIV",{class:!0});var s=v(t);n=g(s,c),s.forEach(y),a=E(e),u&&u.l(e),r=m(),this.h()},h(){w(t,"class",s="section "+(e[15]===e[0]&&"current")+" svelte-1ekbfpl")},m(e,s){I(e,t,s),b(t,n),I(e,a,s),u&&u.m(e,s),I(e,r,s),l||(i=x(t,"click",o),l=!0)},p(a,l){e=a,16&l&&c!==(c=e[13].name+"")&&T(n,c),1&l&&s!==(s="section "+(e[15]===e[0]&&"current")+" svelte-1ekbfpl")&&w(t,"class",s),e[15]===e[0]?u?u.p(e,l):(u=tt(e),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},d(e){e&&y(t),e&&y(a),u&&u.d(e),e&&y(r),l=!1,i()}}}function at(e){let t,n,s,a,r,l,i,c,o=e[4],u=[];for(let h=0;h<o.length;h+=1)u[h]=st(Ze(e,o,h));return r=new ue({props:{entries:e[5].entries}}),{c(){t=f("section"),n=f("div");for(let e=0;e<u.length;e+=1)u[e].c();s=p(),a=f("div"),N(r.$$.fragment),this.h()},l(e){t=$(e,"SECTION",{class:!0});var l=v(t);n=$(l,"DIV",{class:!0,style:!0});var i=v(n);for(let t=0;t<u.length;t+=1)u[t].l(i);i.forEach(y),s=E(l),a=$(l,"DIV",{class:!0});var c=v(a);k(r.$$.fragment,c),c.forEach(y),l.forEach(y),this.h()},h(){w(n,"class","sectionOverview svelte-1ekbfpl"),P(n,"margin-top",e[3]+"px"),w(a,"class","entries svelte-1ekbfpl"),w(t,"class","svelte-1ekbfpl")},m(o,h){I(o,t,h),b(t,n);for(let e=0;e<u.length;e+=1)u[e].m(n,null);e[11](n),b(t,s),b(t,a),D(r,a,null),e[12](t),l=!0,i||(c=x(t,"scroll",e[7]),i=!0)},p(e,[t]){if(81&t){let s;for(o=e[4],s=0;s<o.length;s+=1){const a=Ze(e,o,s);u[s]?u[s].p(a,t):(u[s]=st(a),u[s].c(),u[s].m(n,null))}for(;s<u.length;s+=1)u[s].d(1);u.length=o.length}(!l||8&t)&&P(n,"margin-top",e[3]+"px");const s={};32&t&&(s.entries=e[5].entries),r.$set(s)},i(e){l||(O(r.$$.fragment,e),l=!0)},o(e){V(r.$$.fragment,e),l=!1},d(n){n&&y(t),S(u,n),e[11](null),z(r),e[12](null),i=!1,c()}}}function rt(e,t,n){let s,a;var r,l,{adventure:i}=t,c=0,o=0;function u(e){let t=document.getElementById(e);t&&n(1,r.scrollTop=t.offsetTop,r)}return e.$$set=e=>{"adventure"in e&&n(8,i=e.adventure)},e.$$.update=()=>{256&e.$$.dirty&&n(4,s=function(e){return e.data,e.data.map((e=>{let t={name:e.name,subsections:[]};for(const n of e.entries)"object"==typeof n&&"entries"===n.type&&t.subsections.push({name:n.name,id:n.id});return t}))}(i)),257&e.$$.dirty&&n(5,a=i.data[c])},[c,r,l,o,s,a,u,function(){n(3,o=r.scrollTop)},i,e=>n(0,c=e),e=>u(e.id),function(e){C[e?"unshift":"push"]((()=>{n(2,l=e)}))},function(e){C[e?"unshift":"push"]((()=>{n(1,r=e)}))}]}class lt extends o{constructor(e){super(),u(this,e,rt,at,h,{adventure:8})}}class it extends o{constructor(e){super(),u(this,e,null,null,h,{})}}function ct(e){let t,n,s;var a=e[1];function r(e){return{props:{data:e[0]}}}return a&&(t=new a(r(e))),{c(){t&&N(t.$$.fragment),n=m()},l(e){t&&k(t.$$.fragment,e),n=m()},m(e,a){t&&D(t,e,a),I(e,n,a),s=!0},p(e,[s]){const l={};if(1&s&&(l.data=e[0]),a!==(a=e[1])){if(t){H();const e=t;V(e.$$.fragment,1,0,(()=>{z(e,1)})),B()}a?(t=new a(r(e)),N(t.$$.fragment),O(t.$$.fragment,1),D(t,n.parentNode,n)):t=null}else a&&t.$set(l)},i(e){s||(t&&O(t.$$.fragment,e),s=!0)},o(e){t&&V(t.$$.fragment,e),s=!1},d(e){e&&y(n),t&&z(t,e)}}}function ot(e,t,n){let s,a;var{data:r}=t,{hash:l}=t;const i={background:Oe,class:he,item:fe,monster:de,race:Ve,spell:pe,adventure:lt,language:Be};return e.$$set=e=>{"data"in e&&n(2,r=e.data),"hash"in e&&n(3,l=e.hash)},e.$$.update=()=>{var t,c;12&e.$$.dirty&&n(0,(t=l,s=r||we[t])),1&e.$$.dirty&&n(1,(c=s.dataType,a=i[c]||it))},[s,a,r,l]}class ut extends o{constructor(e){super(),u(this,e,ot,ct,h,{data:2,hash:3})}}function ht(e,t,n){const s=e.slice();return s[1]=t[n],s}function ft(e,t,n){const s=e.slice();return s[4]=t[n],s}function dt(e,t,n){const s=e.slice();return s[7]=t[n],s}function pt(e){let t,n,s;return{c(){t=f("img"),this.h()},l(e){t=$(e,"IMG",{src:!0,style:!0,alt:!0,class:!0}),this.h()},h(){t.src!==(n=e[7].src)&&w(t,"src",n),w(t,"style",s=e[7].transformStyle),w(t,"alt",""),w(t,"class","svelte-54hkii")},m(e,n){I(e,t,n)},p(e,a){1&a&&t.src!==(n=e[7].src)&&w(t,"src",n),1&a&&s!==(s=e[7].transformStyle)&&w(t,"style",s)},d(e){e&&y(t)}}}function mt(e){let t,n,s,a;return n=new me({props:{line:e[4]}}),{c(){t=f("li"),N(n.$$.fragment),s=p()},l(e){t=$(e,"LI",{});var a=v(t);k(n.$$.fragment,a),s=E(a),a.forEach(y)},m(e,r){I(e,t,r),D(n,t,null),b(t,s),a=!0},p(e,t){const s={};1&t&&(s.line=e[4]),n.$set(s)},i(e){a||(O(n.$$.fragment,e),a=!0)},o(e){V(n.$$.fragment,e),a=!1},d(e){e&&y(t),z(n)}}}function $t(e){let t,n,s,a;return n=new me({props:{line:e[1]}}),{c(){t=f("li"),N(n.$$.fragment),s=p()},l(e){t=$(e,"LI",{});var a=v(t);k(n.$$.fragment,a),s=E(a),a.forEach(y)},m(e,r){I(e,t,r),D(n,t,null),b(t,s),a=!0},p(e,t){const s={};1&t&&(s.line=e[1]),n.$set(s)},i(e){a||(O(n.$$.fragment,e),a=!0)},o(e){V(n.$$.fragment,e),a=!1},d(e){e&&y(t),z(n)}}}function vt(e){let t,n,s,a,r,l,i,c,o,u,h,m,x,N,k,P,D,z,C,A,M,R,j,U,_,L,q,X,F,W,G,K,Y,J,Q,Z,ee,te,ne,se,ae,re,le,ie,ce,oe,ue,he,fe,de,pe,me,$e,ve,ge=e[0].fullName+"",ye=e[0].sex+"",Ee=e[0].race+"",we=e[0].voice+"",Ie=e[0].voiceTrait+"",be=e[0].age+"",xe=e[0].stageOfLife+"",Te=e[0].profession+"",Se=e[0].imageLayers,Ne=[];for(let f=0;f<Se.length;f+=1)Ne[f]=pt(dt(e,Se,f));let ke=e[0].traits,Pe=[];for(let f=0;f<ke.length;f+=1)Pe[f]=mt(ft(e,ke,f));const De=e=>V(Pe[e],1,1,(()=>{Pe[e]=null}));let Oe=e[0].story,Ve=[];for(let f=0;f<Oe.length;f+=1)Ve[f]=$t(ht(e,Oe,f));const ze=e=>V(Ve[e],1,1,(()=>{Ve[e]=null}));return{c(){t=f("section"),n=f("header"),s=f("div");for(let e=0;e<Ne.length;e+=1)Ne[e].c();a=p(),r=f("div"),l=f("h2"),i=d(ge),c=p(),o=f("h4"),u=d(ye),h=p(),m=d(Ee),x=p(),N=f("div"),k=f("p"),P=f("b"),D=d("Voice"),z=d(": "),C=d(we),A=p(),M=f("p"),R=f("b"),j=d("Trait"),U=d(": "),_=d(Ie),L=p(),q=f("p"),X=f("b"),F=d("Age"),W=d(": "),G=d(be),K=d(" ("),Y=d(xe),J=d(")"),Q=p(),Z=f("p"),ee=f("b"),te=d("Profession"),ne=d(": "),se=d(Te),ae=p(),re=f("div"),le=f("div"),ie=f("h6"),ce=d("Traits"),oe=p(),ue=f("ol");for(let e=0;e<Pe.length;e+=1)Pe[e].c();he=p(),fe=f("div"),de=f("h6"),pe=d("Story"),me=p(),$e=f("ol");for(let e=0;e<Ve.length;e+=1)Ve[e].c();this.h()},l(e){t=$(e,"SECTION",{});var f=v(t);n=$(f,"HEADER",{class:!0});var d=v(n);s=$(d,"DIV",{class:!0});var p=v(s);for(let t=0;t<Ne.length;t+=1)Ne[t].l(p);p.forEach(y),a=E(d),r=$(d,"DIV",{class:!0});var w=v(r);l=$(w,"H2",{class:!0});var I=v(l);i=g(I,ge),I.forEach(y),c=E(w),o=$(w,"H4",{class:!0});var b=v(o);u=g(b,ye),h=E(b),m=g(b,Ee),b.forEach(y),x=E(w),N=$(w,"DIV",{class:!0});var T=v(N);k=$(T,"P",{class:!0});var S=v(k);P=$(S,"B",{});var O=v(P);D=g(O,"Voice"),O.forEach(y),z=g(S,": "),C=g(S,we),S.forEach(y),A=E(T),M=$(T,"P",{class:!0});var V=v(M);R=$(V,"B",{});var H=v(R);j=g(H,"Trait"),H.forEach(y),U=g(V,": "),_=g(V,Ie),V.forEach(y),L=E(T),q=$(T,"P",{class:!0});var B=v(q);X=$(B,"B",{});var ve=v(X);F=g(ve,"Age"),ve.forEach(y),W=g(B,": "),G=g(B,be),K=g(B," ("),Y=g(B,xe),J=g(B,")"),B.forEach(y),Q=E(T),Z=$(T,"P",{class:!0});var Se=v(Z);ee=$(Se,"B",{});var ke=v(ee);te=g(ke,"Profession"),ke.forEach(y),ne=g(Se,": "),se=g(Se,Te),Se.forEach(y),T.forEach(y),w.forEach(y),d.forEach(y),ae=E(f),re=$(f,"DIV",{class:!0});var De=v(re);le=$(De,"DIV",{class:!0});var Oe=v(le);ie=$(Oe,"H6",{class:!0});var ze=v(ie);ce=g(ze,"Traits"),ze.forEach(y),oe=E(Oe),ue=$(Oe,"OL",{});var Ce=v(ue);for(let t=0;t<Pe.length;t+=1)Pe[t].l(Ce);Ce.forEach(y),Oe.forEach(y),he=E(De),fe=$(De,"DIV",{class:!0});var He=v(fe);de=$(He,"H6",{class:!0});var Be=v(de);pe=g(Be,"Story"),Be.forEach(y),me=E(He),$e=$(He,"OL",{});var Ae=v($e);for(let t=0;t<Ve.length;t+=1)Ve[t].l(Ae);Ae.forEach(y),He.forEach(y),De.forEach(y),f.forEach(y),this.h()},h(){w(s,"class","imageWrapper svelte-54hkii"),w(l,"class","svelte-54hkii"),w(o,"class","svelte-54hkii"),w(k,"class","svelte-54hkii"),w(M,"class","svelte-54hkii"),w(q,"class","svelte-54hkii"),w(Z,"class","svelte-54hkii"),w(N,"class","details svelte-54hkii"),w(r,"class","generalWrapper svelte-54hkii"),w(n,"class","svelte-54hkii"),w(ie,"class","svelte-54hkii"),w(le,"class","svelte-54hkii"),w(de,"class","svelte-54hkii"),w(fe,"class","svelte-54hkii"),w(re,"class","content svelte-54hkii")},m(e,f){I(e,t,f),b(t,n),b(n,s);for(let t=0;t<Ne.length;t+=1)Ne[t].m(s,null);b(n,a),b(n,r),b(r,l),b(l,i),b(r,c),b(r,o),b(o,u),b(o,h),b(o,m),b(r,x),b(r,N),b(N,k),b(k,P),b(P,D),b(k,z),b(k,C),b(N,A),b(N,M),b(M,R),b(R,j),b(M,U),b(M,_),b(N,L),b(N,q),b(q,X),b(X,F),b(q,W),b(q,G),b(q,K),b(q,Y),b(q,J),b(N,Q),b(N,Z),b(Z,ee),b(ee,te),b(Z,ne),b(Z,se),b(t,ae),b(t,re),b(re,le),b(le,ie),b(ie,ce),b(le,oe),b(le,ue);for(let t=0;t<Pe.length;t+=1)Pe[t].m(ue,null);b(re,he),b(re,fe),b(fe,de),b(de,pe),b(fe,me),b(fe,$e);for(let t=0;t<Ve.length;t+=1)Ve[t].m($e,null);ve=!0},p(e,[t]){if(1&t){let n;for(Se=e[0].imageLayers,n=0;n<Se.length;n+=1){const a=dt(e,Se,n);Ne[n]?Ne[n].p(a,t):(Ne[n]=pt(a),Ne[n].c(),Ne[n].m(s,null))}for(;n<Ne.length;n+=1)Ne[n].d(1);Ne.length=Se.length}if((!ve||1&t)&&ge!==(ge=e[0].fullName+"")&&T(i,ge),(!ve||1&t)&&ye!==(ye=e[0].sex+"")&&T(u,ye),(!ve||1&t)&&Ee!==(Ee=e[0].race+"")&&T(m,Ee),(!ve||1&t)&&we!==(we=e[0].voice+"")&&T(C,we),(!ve||1&t)&&Ie!==(Ie=e[0].voiceTrait+"")&&T(_,Ie),(!ve||1&t)&&be!==(be=e[0].age+"")&&T(G,be),(!ve||1&t)&&xe!==(xe=e[0].stageOfLife+"")&&T(Y,xe),(!ve||1&t)&&Te!==(Te=e[0].profession+"")&&T(se,Te),1&t){let n;for(ke=e[0].traits,n=0;n<ke.length;n+=1){const s=ft(e,ke,n);Pe[n]?(Pe[n].p(s,t),O(Pe[n],1)):(Pe[n]=mt(s),Pe[n].c(),O(Pe[n],1),Pe[n].m(ue,null))}for(H(),n=ke.length;n<Pe.length;n+=1)De(n);B()}if(1&t){let n;for(Oe=e[0].story,n=0;n<Oe.length;n+=1){const s=ht(e,Oe,n);Ve[n]?(Ve[n].p(s,t),O(Ve[n],1)):(Ve[n]=$t(s),Ve[n].c(),O(Ve[n],1),Ve[n].m($e,null))}for(H(),n=Oe.length;n<Ve.length;n+=1)ze(n);B()}},i(e){if(!ve){for(let e=0;e<ke.length;e+=1)O(Pe[e]);for(let e=0;e<Oe.length;e+=1)O(Ve[e]);ve=!0}},o(e){Pe=Pe.filter(Boolean);for(let t=0;t<Pe.length;t+=1)V(Pe[t]);Ve=Ve.filter(Boolean);for(let t=0;t<Ve.length;t+=1)V(Ve[t]);ve=!1},d(e){e&&y(t),S(Ne,e),S(Pe,e),S(Ve,e)}}}function gt(e,t,n){let{data:s}=t;return e.$$set=e=>{"data"in e&&n(0,s=e.data)},[s]}class yt extends o{constructor(e){super(),u(this,e,gt,vt,h,{data:0})}}function Et(e){let t,n,s,a,r,l;return{c(){t=f("div"),n=f("input"),s=p(),a=f("textarea"),this.h()},l(e){t=$(e,"DIV",{class:!0});var r=v(t);n=$(r,"INPUT",{type:!0,class:!0}),s=E(r),a=$(r,"TEXTAREA",{placeholder:!0,class:!0}),v(a).forEach(y),r.forEach(y),this.h()},h(){w(n,"type","text"),w(n,"class","svelte-1nxkfg0"),w(a,"placeholder","Write a note"),w(a,"class","svelte-1nxkfg0"),w(t,"class","note svelte-1nxkfg0")},m(i,c){I(i,t,c),b(t,n),A(n,e[1].title),b(t,s),b(t,a),A(a,e[0].content),r||(l=[x(n,"input",e[4]),x(n,"blur",e[2]),x(a,"input",e[5]),x(a,"blur",e[2])],r=!0)},p(e,[t]){2&t&&n.value!==e[1].title&&A(n,e[1].title),1&t&&A(a,e[0].content)},i:M,o:M,d(e){e&&y(t),r=!1,R(l)}}}function wt(e,t,n){let{data:s}=t;var{item:a=j("screenItem")}=t,{campaign:r=j("campaign")}=t;return e.$$set=e=>{"data"in e&&n(0,s=e.data),"item"in e&&n(1,a=e.item),"campaign"in e&&n(3,r=e.campaign)},[s,a,function(){r&&r.refresh()},r,function(){a.title=this.value,n(1,a)},function(){s.content=this.value,n(0,s)}]}class It extends o{constructor(e){super(),u(this,e,wt,Et,h,{data:0,item:1,campaign:3})}}function bt(e={}){return c(i({name:"New encounter",monsters:[]},e),{getMonsters(){return this.monsters.map((e=>Ie[e]))},getTotalXP(){return this.getMonsters().reduce(((e,t)=>e+t.getXPValue()),0)},getEncounterXP(){let e=this.getTotalXP(),t=1,n=this.monsters.length;return n>=2?t=1.5:n>=3?t=2:n>=7?t=2.5:n>=11?t=3:n>=15&&(t=4),e*t},getEncounterDifficulty(e){let t=this.getEncounterXP(),n="super easy";for(let[s,a]of Object.entries(e))t>=a&&(n=s);return n},addMonster(e){"object"==typeof e&&(e=e.hash),this.monsters.push(e)},removeMonster(e){"object"==typeof e&&(e=e.hash);let t=this.monsters.indexOf(e);-1!==t&&this.monsters.splice(t,1)}})}function xt(e){let t,n,s,a,r;function l(t){e[14](t)}t=new Re({props:{headers:e[4],items:e[0],clickable:e[1],tiny:e[2],limit:e[3]}}),t.$on("click",e[7]);let i={entry:e[5]};return void 0!==e[6]&&(i.open=e[6]),s=new $e({props:i}),C.push((()=>U(s,"open",l))),{c(){N(t.$$.fragment),n=p(),N(s.$$.fragment)},l(e){k(t.$$.fragment,e),n=E(e),k(s.$$.fragment,e)},m(e,a){D(t,e,a),I(e,n,a),D(s,e,a),r=!0},p(e,[n]){const r={};16&n&&(r.headers=e[4]),1&n&&(r.items=e[0]),2&n&&(r.clickable=e[1]),4&n&&(r.tiny=e[2]),8&n&&(r.limit=e[3]),t.$set(r);const l={};32&n&&(l.entry=e[5]),!a&&64&n&&(a=!0,l.open=e[6],_((()=>a=!1))),s.$set(l)},i(e){r||(O(t.$$.fragment,e),O(s.$$.fragment,e),r=!0)},o(e){V(t.$$.fragment,e),V(s.$$.fragment,e),r=!1},d(e){z(t,e),e&&y(n),z(s,e)}}}function Tt(e,t,n){const s=L();var a,{encounter:r=null}=t,{items:l}=t,{alignment:i=!1}=t,{cr:c=!1}=t,{environments:o=!1}=t,{popup:u=!1}=t,{hidePopupIndicator:h=!1}=t,{remove:f=!1}=t,{tiny:d=!1}=t,{limit:p=null}=t,m=!1,$=[];const v={unaligned:{color:"#ffffff",backgroundColor:"#814e4e"},"lawful evil":{color:"#ffffff",backgroundColor:"#850707"},"neutral evil":{color:"#ffffff",backgroundColor:"#c3510e"},"chaotic evil":{color:"#ffffff",backgroundColor:"#ff0000"},"lawful neutral":{color:"#ffffff",backgroundColor:"#17cdab"},"lawful good":{color:"#ffffff",backgroundColor:"#00cb35"},"chaotic good":{color:"#ffffff",backgroundColor:"#0e7c30"}};return e.$$set=e=>{"encounter"in e&&n(8,r=e.encounter),"items"in e&&n(0,l=e.items),"alignment"in e&&n(9,i=e.alignment),"cr"in e&&n(10,c=e.cr),"environments"in e&&n(11,o=e.environments),"popup"in e&&n(1,u=e.popup),"hidePopupIndicator"in e&&n(12,h=e.hidePopupIndicator),"remove"in e&&n(13,f=e.remove),"tiny"in e&&n(2,d=e.tiny),"limit"in e&&n(3,p=e.limit)},e.$$.update=()=>{16146&e.$$.dirty&&(n(4,$=[]),$.push({header:"Monster",type:je.SUBTEXT,alignment:Ue.LEFT,sortable:!0,wide:!0,text:e=>e.name,subtext:e=>e.getDescription(),sort:(e,t)=>e.name<t.name?1:-1}),c&&$.push({header:"CR",type:je.TEXT,sortable:!0,text:e=>e.getCRStringWithoutXP(),sort:(e,t)=>e.getCRValue()-t.getCRValue()}),i&&$.push({header:"Aligmnent",type:je.TEXT,text:()=>"",textDecorations:e=>{let t="#ffffff",n="#7a7a7a",s=e.getAlignmentString();if(s in v){let e=v[s];t=e.color,n=e.backgroundColor}return[{color:t,backgroundColor:n,text:s}]}}),o&&$.push({header:"Environments",type:je.TEXT,alignment:Ue.CENTER,maxWidth:150,text:e=>e.environment?e.environment.map(be).join(", "):"—"}),r&&$.push({type:je.BUTTON,text:()=>"Add to encounter",onClick:e=>{r.addMonster(e),n(8,r),n(4,$),n(10,c),n(9,i),n(11,o),n(1,u),n(12,h),n(13,f)}}),u&&!h&&$.push({type:je.ICON_BUTTON,icon:()=>"arrow-expand-all"}),f&&$.push({type:je.ICON_BUTTON,icon:()=>"close",onClick:e=>s("remove",e)}))},[l,u,d,p,$,a,m,function({detail:e}){u&&(n(5,a=e),n(6,m=!0))},r,i,c,o,h,f,function(e){n(6,m=e)}]}class St extends o{constructor(e){super(),u(this,e,Tt,xt,h,{encounter:8,items:0,alignment:9,cr:10,environments:11,popup:1,hidePopupIndicator:12,remove:13,tiny:2,limit:3})}}function Nt(e){let t;return{c(){t=d("Add to initiative")},l(e){t=g(e,"Add to initiative")},m(e,n){I(e,t,n)},d(e){e&&y(t)}}}function kt(e){let t,n,s,a,r,l,i,c,o,u,h,m,x,S,P,C,H,B,A,M,R,j,U,_,L,q;return U=new _e({props:{$$slots:{default:[Nt]},$$scope:{ctx:e}}}),U.$on("click",e[5]),L=new St({props:{items:e[2],popup:!0}}),{c(){t=f("div"),n=f("header"),s=f("h1"),a=d(e[1]),l=p(),i=f("div"),c=f("section"),o=f("h4"),u=d(e[3]),h=p(),m=f("h6"),x=d("XP Reward"),S=p(),P=f("section"),C=f("h4"),H=d(e[4]),B=p(),A=f("h6"),M=d("Adjusted XP"),R=p(),j=f("div"),N(U.$$.fragment),_=p(),N(L.$$.fragment),this.h()},l(r){t=$(r,"DIV",{class:!0});var f=v(t);n=$(f,"HEADER",{class:!0});var d=v(n);s=$(d,"H1",{class:!0});var p=v(s);a=g(p,e[1]),p.forEach(y),l=E(d),i=$(d,"DIV",{class:!0});var w=v(i);c=$(w,"SECTION",{});var I=v(c);o=$(I,"H4",{class:!0});var b=v(o);u=g(b,e[3]),b.forEach(y),h=E(I),m=$(I,"H6",{class:!0});var T=v(m);x=g(T,"XP Reward"),T.forEach(y),I.forEach(y),S=E(w),P=$(w,"SECTION",{});var N=v(P);C=$(N,"H4",{class:!0});var D=v(C);H=g(D,e[4]),D.forEach(y),B=E(N),A=$(N,"H6",{class:!0});var O=v(A);M=g(O,"Adjusted XP"),O.forEach(y),N.forEach(y),w.forEach(y),R=E(d),j=$(d,"DIV",{class:!0});var V=v(j);k(U.$$.fragment,V),V.forEach(y),d.forEach(y),_=E(f),k(L.$$.fragment,f),f.forEach(y),this.h()},h(){w(s,"class",r="difficulty "+e[1]+" svelte-gp5lg1"),w(o,"class","xp svelte-gp5lg1"),w(m,"class","svelte-gp5lg1"),w(C,"class","xp svelte-gp5lg1"),w(A,"class","svelte-gp5lg1"),w(i,"class","svelte-gp5lg1"),w(j,"class","svelte-gp5lg1"),w(n,"class","svelte-gp5lg1"),w(t,"class","encounter")},m(e,r){I(e,t,r),b(t,n),b(n,s),b(s,a),b(n,l),b(n,i),b(i,c),b(c,o),b(o,u),b(c,h),b(c,m),b(m,x),b(i,S),b(i,P),b(P,C),b(C,H),b(P,B),b(P,A),b(A,M),b(n,R),b(n,j),D(U,j,null),b(t,_),D(L,t,null),q=!0},p(e,[t]){(!q||2&t)&&T(a,e[1]),(!q||2&t&&r!==(r="difficulty "+e[1]+" svelte-gp5lg1"))&&w(s,"class",r),(!q||8&t)&&T(u,e[3]),(!q||16&t)&&T(H,e[4]);const n={};1024&t&&(n.$$scope={dirty:t,ctx:e}),U.$set(n);const l={};4&t&&(l.items=e[2]),L.$set(l)},i(e){q||(O(U.$$.fragment,e),O(L.$$.fragment,e),q=!0)},o(e){V(U.$$.fragment,e),V(L.$$.fragment,e),q=!1},d(e){e&&y(t),z(U),z(L)}}}function Pt(e,t,n){let s,a,r,l,i,c,o,u=M,h=()=>(u(),u=q(d,(e=>n(9,o=e))),d);e.$$.on_destroy.push((()=>u()));var{data:f}=t,{campaign:d=j("campaign")}=t;return h(),e.$$set=e=>{"data"in e&&n(6,f=e.data),"campaign"in e&&h(n(0,d=e.campaign))},e.$$.update=()=>{64&e.$$.dirty&&n(7,s=bt(f)),512&e.$$.dirty&&n(8,a=o.party.getXPThreshHolds()),384&e.$$.dirty&&n(1,r=s.getEncounterDifficulty(a)),128&e.$$.dirty&&n(2,l=s.getMonsters()),128&e.$$.dirty&&n(3,i=s.getTotalXP()),128&e.$$.dirty&&n(4,c=s.getEncounterXP())},[d,r,l,i,c,function(){l.forEach((e=>o.initiative.addMonster(e)))},f,s,a,o]}class Dt extends o{constructor(e){super(),u(this,e,Pt,kt,h,{data:6,campaign:0})}}function Ot(e){let t,n,s;var a=e[1];function r(e){return{props:{data:e[2],item:e[0]}}}return a&&(t=new a(r(e))),{c(){t&&N(t.$$.fragment),n=m()},l(e){t&&k(t.$$.fragment,e),n=m()},m(e,a){t&&D(t,e,a),I(e,n,a),s=!0},p(e,[s]){const l={};if(4&s&&(l.data=e[2]),1&s&&(l.item=e[0]),a!==(a=e[1])){if(t){H();const e=t;V(e.$$.fragment,1,0,(()=>{z(e,1)})),B()}a?(t=new a(r(e)),N(t.$$.fragment),O(t.$$.fragment,1),D(t,n.parentNode,n)):t=null}else a&&t.$set(l)},i(e){s||(t&&O(t.$$.fragment,e),s=!0)},o(e){t&&V(t.$$.fragment,e),s=!1},d(e){e&&y(n),t&&z(t,e)}}}function Vt(e,t,n){let s,a;var{item:r}=t;const l={hashRef:ut,npc:yt,note:It,encounter:Dt};return e.$$set=e=>{"item"in e&&n(0,r=e.item)},e.$$.update=()=>{var t;1&e.$$.dirty&&n(1,(t=r.type,s=l[t])),1&e.$$.dirty&&n(2,a=function(e,t){return e===qe.HASH_REF?we[t]:t}(r.type,r.data))},[r,s,a]}class zt extends o{constructor(e){super(),u(this,e,Vt,Ot,h,{item:0})}}function Ct(e){let t,n,s;t=new ge({props:{text:e[1].fullName,background:"./img/header/tree.jpg"}});const a=e[2].default,r=X(a,e,e[4],null),l=r||function(e){let t,n;return t=new yt({props:{data:e[1]}}),{c(){N(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,s){D(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.data=e[1]),t.$set(s)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){z(t,e)}}}(e);return{c(){N(t.$$.fragment),n=p(),l&&l.c()},l(e){k(t.$$.fragment,e),n=E(e),l&&l.l(e)},m(e,a){D(t,e,a),I(e,n,a),l&&l.m(e,a),s=!0},p(e,n){const i={};2&n&&(i.text=e[1].fullName),t.$set(i),r?r.p&&(!s||16&n)&&F(r,a,e,e[4],n,null,null):l&&l.p&&2&n&&l.p(e,n)},i(e){s||(O(t.$$.fragment,e),O(l,e),s=!0)},o(e){V(t.$$.fragment,e),V(l,e),s=!1},d(e){z(t,e),e&&y(n),l&&l.d(e)}}}function Ht(e){let t,n,s;function a(t){e[3](t)}let r={$$slots:{default:[Ct]},$$scope:{ctx:e}};return void 0!==e[0]&&(r.open=e[0]),t=new ve({props:r}),C.push((()=>U(t,"open",a))),{c(){N(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,n){D(t,e,n),s=!0},p(e,[s]){const a={};18&s&&(a.$$scope={dirty:s,ctx:e}),!n&&1&s&&(n=!0,a.open=e[0],_((()=>n=!1))),t.$set(a)},i(e){s||(O(t.$$.fragment,e),s=!0)},o(e){V(t.$$.fragment,e),s=!1},d(e){z(t,e)}}}function Bt(e,t,n){let{$$slots:s={},$$scope:a}=t;var{open:r=!1}=t,{entry:l}=t;return e.$$set=e=>{"open"in e&&n(0,r=e.open),"entry"in e&&n(1,l=e.entry),"$$scope"in e&&n(4,a=e.$$scope)},[r,l,s,function(e){n(0,r=e)},a]}class At extends o{constructor(e){super(),u(this,e,Bt,Ht,h,{open:0,entry:1})}}function Mt(e){let t,n,s;t=new ge({props:{text:e[1].title,background:"./img/header/planet.jpg"}});const a=e[2].default,r=X(a,e,e[4],null),l=r||function(e){let t,n;return t=new It({props:{data:e[1]}}),{c(){N(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,s){D(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.data=e[1]),t.$set(s)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){z(t,e)}}}(e);return{c(){N(t.$$.fragment),n=p(),l&&l.c()},l(e){k(t.$$.fragment,e),n=E(e),l&&l.l(e)},m(e,a){D(t,e,a),I(e,n,a),l&&l.m(e,a),s=!0},p(e,n){const i={};2&n&&(i.text=e[1].title),t.$set(i),r?r.p&&(!s||16&n)&&F(r,a,e,e[4],n,null,null):l&&l.p&&2&n&&l.p(e,n)},i(e){s||(O(t.$$.fragment,e),O(l,e),s=!0)},o(e){V(t.$$.fragment,e),V(l,e),s=!1},d(e){z(t,e),e&&y(n),l&&l.d(e)}}}function Rt(e){let t,n,s;function a(t){e[3](t)}let r={$$slots:{default:[Mt]},$$scope:{ctx:e}};return void 0!==e[0]&&(r.open=e[0]),t=new ve({props:r}),C.push((()=>U(t,"open",a))),{c(){N(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,n){D(t,e,n),s=!0},p(e,[s]){const a={};18&s&&(a.$$scope={dirty:s,ctx:e}),!n&&1&s&&(n=!0,a.open=e[0],_((()=>n=!1))),t.$set(a)},i(e){s||(O(t.$$.fragment,e),s=!0)},o(e){V(t.$$.fragment,e),s=!1},d(e){z(t,e)}}}function jt(e,t,n){let{$$slots:s={},$$scope:a}=t;var{open:r=!1}=t,{entry:l}=t;return e.$$set=e=>{"open"in e&&n(0,r=e.open),"entry"in e&&n(1,l=e.entry),"$$scope"in e&&n(4,a=e.$$scope)},[r,l,s,function(e){n(0,r=e)},a]}class Ut extends o{constructor(e){super(),u(this,e,jt,Rt,h,{open:0,entry:1})}}function _t(e){let t,n,s,a;function r(t){e[4](t)}var l=e[1];function i(e){let t={entry:e[2]};return void 0!==e[0]&&(t.open=e[0]),{props:t}}return l&&(t=new l(i(e)),C.push((()=>U(t,"open",r)))),{c(){t&&N(t.$$.fragment),s=m()},l(e){t&&k(t.$$.fragment,e),s=m()},m(e,n){t&&D(t,e,n),I(e,s,n),a=!0},p(e,[a]){const c={};if(4&a&&(c.entry=e[2]),!n&&1&a&&(n=!0,c.open=e[0],_((()=>n=!1))),l!==(l=e[1])){if(t){H();const e=t;V(e.$$.fragment,1,0,(()=>{z(e,1)})),B()}l?(t=new l(i(e)),C.push((()=>U(t,"open",r))),N(t.$$.fragment),O(t.$$.fragment,1),D(t,s.parentNode,s)):t=null}else l&&t.$set(c)},i(e){a||(t&&O(t.$$.fragment,e),a=!0)},o(e){t&&V(t.$$.fragment,e),a=!1},d(e){e&&y(s),t&&z(t,e)}}}function Lt(e,t,n){let s,a;var{entry:r}=t,{open:l=!1}=t;const i={hashRef:Ae,npc:At,note:Ut};return e.$$set=e=>{"entry"in e&&n(3,r=e.entry),"open"in e&&n(0,l=e.open)},e.$$.update=()=>{var t;8&e.$$.dirty&&n(1,(t=r.type,s=i[t])),8&e.$$.dirty&&n(2,a=function(e,t){return"hashRef"===e?we[t]:t}(r.type,r.data))},[l,s,a,r,function(e){n(0,l=e)}]}class qt extends o{constructor(e){super(),u(this,e,Lt,_t,h,{entry:3,open:0})}}function Xt(){return{start(){document.addEventListener("mousemove",this.onChange)},stop(){document.removeEventListener("mousemove",this.onChange)},onChange:e=>{}}}const Ft=e=>({open:64&e[0]}),Wt=e=>({open:e[6]});function Gt(e,t,n){const s=e.slice();return s[3]=t[n],s}function Kt(e){let t,n,s,a=e[3].name+"";return{c(){t=f("option"),n=d(a),this.h()},l(e){t=$(e,"OPTION",{value:!0});var s=v(t);n=g(s,a),s.forEach(y),this.h()},h(){t.__value=s=e[3].id,t.value=t.__value},m(e,s){I(e,t,s),b(t,n)},p(e,r){4096&r[0]&&a!==(a=e[3].name+"")&&T(n,a),4096&r[0]&&s!==(s=e[3].id)&&(t.__value=s,t.value=t.__value)},d(e){e&&y(t)}}}function Yt(e){let t,n,s,a,r,l,i,c,o,u,h,d,m,g,b,T,S;return{c(){t=f("div"),n=p(),s=f("div"),a=p(),r=f("div"),l=p(),i=f("div"),c=p(),o=f("div"),u=p(),h=f("div"),d=p(),m=f("div"),g=p(),b=f("div"),this.h()},l(e){t=$(e,"DIV",{class:!0}),v(t).forEach(y),n=E(e),s=$(e,"DIV",{class:!0}),v(s).forEach(y),a=E(e),r=$(e,"DIV",{class:!0}),v(r).forEach(y),l=E(e),i=$(e,"DIV",{class:!0}),v(i).forEach(y),c=E(e),o=$(e,"DIV",{class:!0}),v(o).forEach(y),u=E(e),h=$(e,"DIV",{class:!0}),v(h).forEach(y),d=E(e),m=$(e,"DIV",{class:!0}),v(m).forEach(y),g=E(e),b=$(e,"DIV",{class:!0}),v(b).forEach(y),this.h()},h(){w(t,"class","leftHold svelte-bz66p5"),w(s,"class","rightHold svelte-bz66p5"),w(r,"class","topHold svelte-bz66p5"),w(i,"class","bottomHold svelte-bz66p5"),w(o,"class","topLeftHold svelte-bz66p5"),w(h,"class","topRightHold svelte-bz66p5"),w(m,"class","bottomLeftHold svelte-bz66p5"),w(b,"class","bottomRightHold svelte-bz66p5")},m(f,p){I(f,t,p),I(f,n,p),I(f,s,p),I(f,a,p),I(f,r,p),I(f,l,p),I(f,i,p),I(f,c,p),I(f,o,p),I(f,u,p),I(f,h,p),I(f,d,p),I(f,m,p),I(f,g,p),I(f,b,p),T||(S=[x(t,"mousedown",e[27]),x(s,"mousedown",e[28]),x(r,"mousedown",e[29]),x(i,"mousedown",e[30]),x(o,"mousedown",e[19]),x(h,"mousedown",e[20]),x(m,"mousedown",e[21]),x(b,"mousedown",e[22])],T=!0)},p:M,d(e){e&&y(t),e&&y(n),e&&y(s),e&&y(a),e&&y(r),e&&y(l),e&&y(i),e&&y(c),e&&y(o),e&&y(u),e&&y(h),e&&y(d),e&&y(m),e&&y(g),e&&y(b),T=!1,R(S)}}}function Jt(e){let t;const n=e[25].popup,s=X(n,e,e[33],Wt);return{c(){s&&s.c()},l(e){s&&s.l(e)},m(e,n){s&&s.m(e,n),t=!0},p(e,a){s&&s.p&&(!t||64&a[0]|4&a[1])&&F(s,n,e,e[33],a,Ft,Wt)},i(e){t||(O(s,e),t=!0)},o(e){V(s,e),t=!1},d(e){s&&s.d(e)}}}function Qt(e){let t,n,s;function a(t){e[32](t)}let r={$$slots:{default:[Zt]},$$scope:{ctx:e}};return void 0!==e[6]&&(r.open=e[6]),t=new ve({props:r}),C.push((()=>U(t,"open",a))),{c(){N(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,n){D(t,e,n),s=!0},p(e,s){const a={};4&s[1]&&(a.$$scope={dirty:s,ctx:e}),!n&&64&s[0]&&(n=!0,a.open=e[6],_((()=>n=!1))),t.$set(a)},i(e){s||(O(t.$$.fragment,e),s=!0)},o(e){V(t.$$.fragment,e),s=!1},d(e){z(t,e)}}}function Zt(e){let t;const n=e[25].default,s=X(n,e,e[33],null);return{c(){s&&s.c()},l(e){s&&s.l(e)},m(e,n){s&&s.m(e,n),t=!0},p(e,a){s&&s.p&&(!t||4&a[1])&&F(s,n,e,e[33],a,null,null)},i(e){t||(O(s,e),t=!0)},o(e){V(s,e),t=!1},d(e){s&&s.d(e)}}}function en(e){let t,n,s,a,r,l,i,c,o,u,h,m,N,k,P,D,z,C,A,M,j,U,_,L,q,K;const Y=e[25].default,J=X(Y,e,e[33],null);let Q=e[12],Z=[];for(let f=0;f<Q.length;f+=1)Z[f]=Kt(Gt(e,Q,f));let ee=!e[0].pinned&&Yt(e);const te=[Qt,Jt],ne=[];function se(e,t){return void 0===e[23].popup?0:1}return j=se(e),U=ne[j]=te[j](e),{c(){t=f("section"),n=f("div"),J&&J.c(),s=p(),a=f("div"),r=f("button"),l=f("span"),i=p(),c=f("button"),o=f("span"),h=p(),m=f("button"),N=f("span"),k=p(),P=f("span"),D=d(e[1]),z=p(),C=f("select");for(let e=0;e<Z.length;e+=1)Z[e].c();A=p(),ee&&ee.c(),M=p(),U.c(),_=p(),this.h()},l(u){t=$(u,"SECTION",{class:!0,style:!0});var f=v(t);n=$(f,"DIV",{class:!0});var d=v(n);J&&J.l(d),d.forEach(y),s=E(f),a=$(f,"DIV",{class:!0});var p=v(a);r=$(p,"BUTTON",{class:!0});var w=v(r);l=$(w,"SPAN",{class:!0}),v(l).forEach(y),w.forEach(y),i=E(p),c=$(p,"BUTTON",{class:!0});var I=v(c);o=$(I,"SPAN",{class:!0}),v(o).forEach(y),I.forEach(y),h=E(p),m=$(p,"BUTTON",{class:!0});var b=v(m);N=$(b,"SPAN",{class:!0}),v(N).forEach(y),b.forEach(y),k=E(p),P=$(p,"SPAN",{class:!0});var x=v(P);D=g(x,e[1]),x.forEach(y),z=E(p),C=$(p,"SELECT",{class:!0});var T=v(C);for(let e=0;e<Z.length;e+=1)Z[e].l(T);T.forEach(y),p.forEach(y),A=E(f),ee&&ee.l(f),f.forEach(y),M=E(u),U.l(u),_=E(u),this.h()},h(){w(n,"class","display svelte-bz66p5"),w(l,"class","mdi mdi-arrow-expand-all"),w(r,"class","svelte-bz66p5"),w(o,"class",u="mdi mdi-"+(e[0].pinned?"pin-off":"pin-outline")),w(c,"class","svelte-bz66p5"),w(N,"class","mdi mdi-delete-outline"),w(m,"class","svelte-bz66p5"),w(P,"class","svelte-bz66p5"),w(C,"class","svelte-bz66p5"),void 0===e[5]&&W((()=>e[26].call(C))),w(a,"class","controlls svelte-bz66p5"),w(t,"class","item svelte-bz66p5"),w(t,"style",e[11])},m(u,f){I(u,t,f),b(t,n),J&&J.m(n,null),b(t,s),b(t,a),b(a,r),b(r,l),b(a,i),b(a,c),b(c,o),b(a,h),b(a,m),b(m,N),b(a,k),b(a,P),b(P,D),b(a,z),b(a,C);for(let e=0;e<Z.length;e+=1)Z[e].m(C,null);G(C,e[5]),b(t,A),ee&&ee.m(t,null),e[31](t),I(u,M,f),ne[j].m(u,f),I(u,_,f),L=!0,q||(K=[x(n,"mousedown",e[17]),x(r,"click",e[15]),x(c,"click",e[14]),x(m,"click",e[16]),x(C,"change",e[26]),x(C,"change",e[13]),x(document.body,"mouseup",e[18])],q=!0)},p(e,n){if(J&&J.p&&(!L||4&n[1])&&F(J,Y,e,e[33],n,null,null),(!L||1&n[0]&&u!==(u="mdi mdi-"+(e[0].pinned?"pin-off":"pin-outline")))&&w(o,"class",u),(!L||2&n[0])&&T(D,e[1]),4096&n[0]){let t;for(Q=e[12],t=0;t<Q.length;t+=1){const s=Gt(e,Q,t);Z[t]?Z[t].p(s,n):(Z[t]=Kt(s),Z[t].c(),Z[t].m(C,null))}for(;t<Z.length;t+=1)Z[t].d(1);Z.length=Q.length}4128&n[0]&&G(C,e[5]),e[0].pinned?ee&&(ee.d(1),ee=null):ee?ee.p(e,n):(ee=Yt(e),ee.c(),ee.m(t,null)),(!L||2048&n[0])&&w(t,"style",e[11]);let s=j;j=se(e),j===s?ne[j].p(e,n):(H(),V(ne[s],1,1,(()=>{ne[s]=null})),B(),U=ne[j],U?U.p(e,n):(U=ne[j]=te[j](e),U.c()),O(U,1),U.m(_.parentNode,_))},i(e){L||(O(J,e),O(U),L=!0)},o(e){V(J,e),V(U),L=!1},d(n){n&&y(t),J&&J.d(n),S(Z,n),ee&&ee.d(),e[31](null),n&&y(M),ne[j].d(n),n&&y(_),q=!1,R(K)}}}function tn(e,t,n){let s,a,r,l,i=M,c=()=>(i(),i=q($,(e=>n(24,l=e))),$);e.$$.on_destroy.push((()=>i()));let{$$slots:o={},$$scope:u}=t;const h=K(o);var f,{label:d}=t,{item:p}=t,{screen:m=j("dmScreen")}=t,{campaign:$=j("campaign")}=t;c();var v=m.id,g=!1,y=Xt(),E=Xt(),w=Xt(),I=Xt(),b=Xt();b.onChange=e=>{if(!p.pinned){e.preventDefault();let{movementX:t,movementY:s}=e;n(0,p.left+=t,p),n(0,p.top+=s,p)}},y.onChange=e=>{e.preventDefault();let{movementX:t}=e;p.width+t<100?n(0,p.width=100,p):n(0,p.width+=t,p)},E.onChange=e=>{e.preventDefault();let{movementX:t}=e;p.width-t<100?n(0,p.width=100,p):(n(0,p.width-=t,p),n(0,p.left+=t,p))},w.onChange=e=>{e.preventDefault();let{movementY:t}=e;p.height-t<100?n(0,p.height=100,p):(n(0,p.height-=t,p),n(0,p.top+=t,p))},I.onChange=e=>{e.preventDefault();let{movementY:t}=e;p.height+t<100?n(0,p.height=100,p):n(0,p.height+=t,p)};return e.$$set=e=>{"label"in e&&n(1,d=e.label),"item"in e&&n(0,p=e.item),"screen"in e&&n(3,m=e.screen),"campaign"in e&&c(n(2,$=e.campaign)),"$$scope"in e&&n(33,u=e.$$scope)},e.$$.update=()=>{4&e.$$.dirty[0]&&(s=$.campaignStore),1&e.$$.dirty[0]&&n(11,a=function({top:e,left:t,height:n,width:s,index:a}){return`top: ${e}px; left: ${t}px; height: ${n}px; width: ${s}px; z-index: ${a};`}(p)),16777216&e.$$.dirty[0]&&n(12,r=l.screens.get())},[p,d,$,m,f,v,g,y,E,w,I,a,r,function(){$.screens.moveItemTo(p,v)},function(){$.screens.togglePin(p),n(0,p)},function(){n(6,g=!0)},function(){$.screens.removeItemFromScreen(m,p)},function(){$.screens.moveUp(p),b.start()},function(){y.stop(),E.stop(),w.stop(),I.stop(),b.stop(),s.refresh()},function(){w.start(),E.start()},function(){w.start(),y.start()},function(){I.start(),E.start()},function(){I.start(),y.start()},h,l,o,function(){v=Y(this),n(5,v),n(12,r),n(24,l)},()=>E.start(),()=>y.start(),()=>w.start(),()=>I.start(),function(e){C[e?"unshift":"push"]((()=>{n(4,f=e)}))},function(e){n(6,g=e)},u]}class nn extends o{constructor(e){super(),u(this,e,tn,en,h,{label:1,item:0,screen:3,campaign:2},[-1,-1])}}function sn(e){let t,n;return t=new zt({props:{item:e[1]}}),{c(){N(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,s){D(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.item=e[1]),t.$set(s)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){z(t,e)}}}function an(e){let t,n;return t=new qt({props:{slot:"popup",entry:e[1],open:e[4]}}),{c(){N(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,s){D(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.entry=e[1]),16&n&&(s.open=e[4]),t.$set(s)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){z(t,e)}}}function rn(e){let t,n;return t=new nn({props:{label:e[2],screen:e[0],item:e[1],$$slots:{popup:[an,({open:e})=>({4:e}),({open:e})=>e?16:0],default:[sn,({open:e})=>({4:e}),({open:e})=>e?16:0]},$$scope:{ctx:e}}}),{c(){N(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,s){D(t,e,s),n=!0},p(e,[n]){const s={};4&n&&(s.label=e[2]),1&n&&(s.screen=e[0]),2&n&&(s.item=e[1]),50&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){z(t,e)}}}function ln(e,t,n){let s;var{screen:a}=t,{item:r}=t;return e.$$set=e=>{"screen"in e&&n(0,a=e.screen),"item"in e&&n(1,r=e.item)},e.$$.update=()=>{2&e.$$.dirty&&n(2,s=function(e){if(e.type===qe.HASH_REF)return we[e.data].name;return e.title}(r)),2&e.$$.dirty&&J("screenItem",r)},[a,r,s]}class cn extends o{constructor(e){super(),u(this,e,ln,rn,h,{screen:0,item:1})}}function on(e,t,n){const s=e.slice();return s[11]=t[n],s}function un(e,t,n){const s=e.slice();return s[14]=t[n],s}function hn(e){let t,n,s,a,r,l=e[14].name+"";function i(){return e[10](e[14])}return{c(){t=f("button"),n=d(l),this.h()},l(e){t=$(e,"BUTTON",{class:!0});var s=v(t);n=g(s,l),s.forEach(y),this.h()},h(){w(t,"class",s=Q(e[14].id===e[1].id&&"current")+" svelte-1gt4vqn")},m(e,s){I(e,t,s),b(t,n),a||(r=x(t,"click",i),a=!0)},p(a,r){e=a,8&r&&l!==(l=e[14].name+"")&&T(n,l),10&r&&s!==(s=Q(e[14].id===e[1].id&&"current")+" svelte-1gt4vqn")&&w(t,"class",s)},d(e){e&&y(t),a=!1,r()}}}function fn(e,t){let n,s,a;return s=new cn({props:{campaign:t[0],item:t[11],screen:t[1]}}),{key:e,first:null,c(){n=m(),N(s.$$.fragment),this.h()},l(e){n=m(),k(s.$$.fragment,e),this.h()},h(){this.first=n},m(e,t){I(e,n,t),D(s,e,t),a=!0},p(e,n){t=e;const a={};1&n&&(a.campaign=t[0]),2&n&&(a.item=t[11]),2&n&&(a.screen=t[1]),s.$set(a)},i(e){a||(O(s.$$.fragment,e),a=!0)},o(e){V(s.$$.fragment,e),a=!1},d(e){e&&y(n),z(s,e)}}}function dn(e){let t,n,s,a,r,l,i,c,o,u,h,d,m,g,T,N,k=[],P=new Map,D=e[3],z=[];for(let f=0;f<D.length;f+=1)z[f]=hn(un(e,D,f));let C=e[1].items;const A=e=>e[11].id;for(let f=0;f<C.length;f+=1){let t=on(e,C,f),n=A(t);P.set(n,k[f]=fn(n,t))}return{c(){t=f("section"),n=f("div");for(let e=0;e<z.length;e+=1)z[e].c();s=p(),a=f("button"),r=f("span"),l=p(),i=f("button"),c=f("span"),o=p(),u=f("button"),h=f("span"),d=p(),m=f("div");for(let e=0;e<k.length;e+=1)k[e].c();this.h()},l(e){t=$(e,"SECTION",{class:!0});var f=v(t);n=$(f,"DIV",{class:!0});var p=v(n);for(let t=0;t<z.length;t+=1)z[t].l(p);s=E(p),a=$(p,"BUTTON",{disabled:!0,class:!0});var g=v(a);r=$(g,"SPAN",{class:!0}),v(r).forEach(y),g.forEach(y),l=E(p),i=$(p,"BUTTON",{disabled:!0,class:!0});var w=v(i);c=$(w,"SPAN",{class:!0}),v(c).forEach(y),w.forEach(y),o=E(p),u=$(p,"BUTTON",{class:!0});var I=v(u);h=$(I,"SPAN",{class:!0}),v(h).forEach(y),I.forEach(y),p.forEach(y),d=E(f),m=$(f,"DIV",{class:!0});var b=v(m);for(let t=0;t<k.length;t+=1)k[t].l(b);b.forEach(y),f.forEach(y),this.h()},h(){w(r,"class","mdi mdi-pencil"),a.disabled=e[4],w(a,"class","svelte-1gt4vqn"),w(c,"class","mdi mdi-delete-outline"),i.disabled=e[4],w(i,"class","svelte-1gt4vqn"),w(h,"class","mdi mdi-plus"),w(u,"class","svelte-1gt4vqn"),w(n,"class","tabs svelte-1gt4vqn"),w(m,"class","grid svelte-1gt4vqn"),w(t,"class","dmScreen svelte-1gt4vqn")},m(f,p){I(f,t,p),b(t,n);for(let e=0;e<z.length;e+=1)z[e].m(n,null);b(n,s),b(n,a),b(a,r),b(n,l),b(n,i),b(i,c),b(n,o),b(n,u),b(u,h),b(t,d),b(t,m);for(let e=0;e<k.length;e+=1)k[e].m(m,null);g=!0,T||(N=[x(a,"click",e[8]),x(i,"click",e[7]),x(u,"click",e[6])],T=!0)},p(e,[t]){if(42&t){let a;for(D=e[3],a=0;a<D.length;a+=1){const r=un(e,D,a);z[a]?z[a].p(r,t):(z[a]=hn(r),z[a].c(),z[a].m(n,s))}for(;a<z.length;a+=1)z[a].d(1);z.length=D.length}(!g||16&t)&&(a.disabled=e[4]),(!g||16&t)&&(i.disabled=e[4]),3&t&&(C=e[1].items,H(),k=Z(k,t,A,1,e,C,P,m,ee,fn,null,on),B())},i(e){if(!g){for(let e=0;e<C.length;e+=1)O(k[e]);g=!0}},o(e){for(let t=0;t<k.length;t+=1)V(k[t]);g=!1},d(e){e&&y(t),S(z,e);for(let t=0;t<k.length;t+=1)k[t].d();T=!1,R(N)}}}function pn(e,t,n){let s,a,r,l,i,c=M;e.$$.on_destroy.push((()=>c()));var{campaign:o}=t;function u(e){o.screens.openScreen(e)}return e.$$set=e=>{"campaign"in e&&n(0,o=e.campaign)},e.$$.update=()=>{1&e.$$.dirty&&(n(2,s=o.campaignStore),c(),c=q(s,(e=>n(9,i=e)))),513&e.$$.dirty&&n(3,a=o.screens.get(i)),513&e.$$.dirty&&n(1,r=o.screens.getOpenScreen(i)),2&e.$$.dirty&&n(4,l="root"===r.id)},[o,r,s,a,l,u,function(){o.screens.newScreen()},function(){confirm("Are you sure you want to delete this tab?")&&o.screens.deleteScreen(r)},function(){var e=prompt("Type a name");e&&o.screens.renameCurrentScreen(e)},i,e=>u(e)]}function mn(e){let t,n,s,a,r,l,i,c;return{c(){t=f("div"),n=f("h4"),s=d(e[0]),a=f("span"),r=d("xp"),l=p(),i=f("h6"),c=d(e[1]),this.h()},l(o){t=$(o,"DIV",{class:!0});var u=v(t);n=$(u,"H4",{class:!0});var h=v(n);s=g(h,e[0]),a=$(h,"SPAN",{class:!0});var f=v(a);r=g(f,"xp"),f.forEach(y),h.forEach(y),l=E(u),i=$(u,"H6",{class:!0});var d=v(i);c=g(d,e[1]),d.forEach(y),u.forEach(y),this.h()},h(){w(a,"class","svelte-8oh2jc"),w(n,"class","svelte-8oh2jc"),w(i,"class","svelte-8oh2jc"),w(t,"class","svelte-8oh2jc")},m(e,o){I(e,t,o),b(t,n),b(n,s),b(n,a),b(a,r),b(t,l),b(t,i),b(i,c)},p(e,[t]){1&t&&T(s,e[0]),2&t&&T(c,e[1])},i:M,o:M,d(e){e&&y(t)}}}function $n(e,t,n){var{xp:s}=t,{difficulty:a}=t;return e.$$set=e=>{"xp"in e&&n(0,s=e.xp),"difficulty"in e&&n(1,a=e.difficulty)},[s,a]}class vn extends o{constructor(e){super(),u(this,e,$n,mn,h,{xp:0,difficulty:1})}}function gn(e,t,n){const s=e.slice();return s[9]=t[n],s}function yn(e){let t,n;const s=[e[9]];let a={};for(let r=0;r<s.length;r+=1)a=se(a,s[r]);return t=new vn({props:a}),{c(){N(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,s){D(t,e,s),n=!0},p(e,n){const a=16&n?te(s,[ne(e[9])]):{};t.$set(a)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){z(t,e)}}}function En(e){let t;return{c(){t=d("Save encounter")},l(e){t=g(e,"Save encounter")},m(e,n){I(e,t,n)},d(e){e&&y(t)}}}function wn(e){let t,n,s,a,r,l,i,c,o,u,h,m,x,P,C,A,M,R,j,U,_,L=e[4],q=[];for(let f=0;f<L.length;f+=1)q[f]=yn(gn(e,L,f));const X=e=>V(q[e],1,1,(()=>{q[e]=null}));return C=new St({props:{items:e[1],remove:!0,tiny:!0,popup:!0,hidePopupIndicator:!0}}),C.$on("remove",e[5]),U=new _e({props:{$$slots:{default:[En]},$$scope:{ctx:e}}}),U.$on("click",e[6]),{c(){t=f("div"),n=f("header"),s=f("div");for(let e=0;e<q.length;e+=1)q[e].c();a=p(),r=f("div"),l=f("h1"),i=f("span"),c=d(e[3]),u=p(),h=f("span"),m=d(e[2]),x=d("xp"),P=p(),N(C.$$.fragment),A=p(),M=f("footer"),R=f("input"),j=p(),N(U.$$.fragment),this.h()},l(o){t=$(o,"DIV",{class:!0});var f=v(t);n=$(f,"HEADER",{});var d=v(n);s=$(d,"DIV",{class:!0});var p=v(s);for(let e=0;e<q.length;e+=1)q[e].l(p);p.forEach(y),a=E(d),r=$(d,"DIV",{});var w=v(r);l=$(w,"H1",{class:!0});var I=v(l);i=$(I,"SPAN",{class:!0});var b=v(i);c=g(b,e[3]),b.forEach(y),u=E(I),h=$(I,"SPAN",{class:!0});var T=v(h);m=g(T,e[2]),x=g(T,"xp"),T.forEach(y),I.forEach(y),w.forEach(y),d.forEach(y),P=E(f),k(C.$$.fragment,f),A=E(f),M=$(f,"FOOTER",{class:!0});var S=v(M);R=$(S,"INPUT",{}),j=E(S),k(U.$$.fragment,S),S.forEach(y),f.forEach(y),this.h()},h(){w(s,"class","challengeLevels svelte-i7tvej"),w(i,"class",o="difficulty "+e[3]+" svelte-i7tvej"),w(h,"class","xp svelte-i7tvej"),w(l,"class","svelte-i7tvej"),w(M,"class","svelte-i7tvej"),w(t,"class","sections")},m(e,o){I(e,t,o),b(t,n),b(n,s);for(let t=0;t<q.length;t+=1)q[t].m(s,null);b(n,a),b(n,r),b(r,l),b(l,i),b(i,c),b(l,u),b(l,h),b(h,m),b(h,x),b(t,P),D(C,t,null),b(t,A),b(t,M),b(M,R),b(M,j),D(U,M,null),_=!0},p(e,[t]){if(16&t){let n;for(L=e[4],n=0;n<L.length;n+=1){const a=gn(e,L,n);q[n]?(q[n].p(a,t),O(q[n],1)):(q[n]=yn(a),q[n].c(),O(q[n],1),q[n].m(s,null))}for(H(),n=L.length;n<q.length;n+=1)X(n);B()}(!_||8&t)&&T(c,e[3]),(!_||8&t&&o!==(o="difficulty "+e[3]+" svelte-i7tvej"))&&w(i,"class",o),(!_||4&t)&&T(m,e[2]);const n={};2&t&&(n.items=e[1]),C.$set(n);const a={};4096&t&&(a.$$scope={dirty:t,ctx:e}),U.$set(a)},i(e){if(!_){for(let e=0;e<L.length;e+=1)O(q[e]);O(C.$$.fragment,e),O(U.$$.fragment,e),_=!0}},o(e){q=q.filter(Boolean);for(let t=0;t<q.length;t+=1)V(q[t]);V(C.$$.fragment,e),V(U.$$.fragment,e),_=!1},d(e){e&&y(t),S(q,e),z(C),z(U)}}}function In(e,t,n){let s,a,r,l,i,c=M,o=()=>(c(),c=q(u,(e=>n(8,i=e))),u);e.$$.on_destroy.push((()=>c()));var{campaign:u=j("campaign")}=t;o();var{encounter:h}=t;return e.$$set=e=>{"campaign"in e&&o(n(0,u=e.campaign)),"encounter"in e&&n(7,h=e.encounter)},e.$$.update=()=>{128&e.$$.dirty&&n(1,s=h.getMonsters()),128&e.$$.dirty&&n(2,a=h.getEncounterXP()),384&e.$$.dirty&&n(3,r=h.getEncounterDifficulty(i.party.getXPThreshHolds())),256&e.$$.dirty&&n(4,l=Object.entries(i.party.getXPThreshHolds()).map((([e,t])=>({xp:t,difficulty:be(e)}))))},[u,s,a,r,l,function({detail:e}){h.removeMonster(e),n(7,h)},function(){u.screens.addItemToCurrentScreen("New encounter","encounter",h)},h,i]}class bn extends o{constructor(e){super(),u(this,e,In,wn,h,{campaign:0,encounter:7})}}function xn(e,t,n){const s=e.slice();return s[3]=t[n],s}function Tn(e){let t,n,s,a=e[3].text+"";return{c(){t=f("option"),n=d(a),this.h()},l(e){t=$(e,"OPTION",{value:!0});var s=v(t);n=g(s,a),s.forEach(y),this.h()},h(){t.__value=s=e[3].value,t.value=t.__value},m(e,s){I(e,t,s),b(t,n)},p:M,d(e){e&&y(t)}}}function Sn(e){let t,n,s,a=e[1],r=[];for(let l=0;l<a.length;l+=1)r[l]=Tn(xn(e,a,l));return{c(){t=f("select");for(let e=0;e<r.length;e+=1)r[e].c();this.h()},l(e){t=$(e,"SELECT",{class:!0});var n=v(t);for(let t=0;t<r.length;t+=1)r[t].l(n);n.forEach(y),this.h()},h(){w(t,"class","svelte-17oxtdk"),void 0===e[0]&&W((()=>e[2].call(t)))},m(a,l){I(a,t,l);for(let e=0;e<r.length;e+=1)r[e].m(t,null);G(t,e[0]),n||(s=x(t,"change",e[2]),n=!0)},p(e,[n]){if(2&n){let s;for(a=e[1],s=0;s<a.length;s+=1){const l=xn(e,a,s);r[s]?r[s].p(l,n):(r[s]=Tn(l),r[s].c(),r[s].m(t,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=a.length}3&n&&G(t,e[0])},i:M,o:M,d(e){e&&y(t),S(r,e),n=!1,s()}}}function Nn(e){return 0===e?"0":1===e?"1/8":2===e?"1/4":3===e?"1/2":String(e-3)}function kn(e,t,n){var s,{cr:a}=t,r=[];for(let l=0;l<=33;l++)r.push({value:(s=l,0===s?0:1===s?.125:2===s?.25:3===s?.5:s-3),text:Nn(l)});return e.$$set=e=>{"cr"in e&&n(0,a=e.cr)},[a,r,function(){a=Y(this),n(0,a),n(1,r)}]}class Pn extends o{constructor(e){super(),u(this,e,kn,Sn,h,{cr:0})}}function Dn(e){let t,n,s,a,r,l,i,c,o,u,h,m,x,T,S;function P(t){e[2](t)}let H={};function B(t){e[3](t)}void 0!==e[0]&&(H.cr=e[0]),l=new Pn({props:H}),C.push((()=>U(l,"cr",P)));let A={};return void 0!==e[1]&&(A.cr=e[1]),x=new Pn({props:A}),C.push((()=>U(x,"cr",B))),{c(){t=f("div"),n=f("div"),s=f("h6"),a=d("Min"),r=p(),N(l.$$.fragment),c=p(),o=f("div"),u=f("h6"),h=d("Max"),m=p(),N(x.$$.fragment),this.h()},l(e){t=$(e,"DIV",{class:!0});var i=v(t);n=$(i,"DIV",{class:!0});var f=v(n);s=$(f,"H6",{class:!0});var d=v(s);a=g(d,"Min"),d.forEach(y),r=E(f),k(l.$$.fragment,f),f.forEach(y),c=E(i),o=$(i,"DIV",{class:!0});var p=v(o);u=$(p,"H6",{class:!0});var w=v(u);h=g(w,"Max"),w.forEach(y),m=E(p),k(x.$$.fragment,p),p.forEach(y),i.forEach(y),this.h()},h(){w(s,"class","svelte-1l2sto3"),w(n,"class","svelte-1l2sto3"),w(u,"class","svelte-1l2sto3"),w(o,"class","svelte-1l2sto3"),w(t,"class","crRangeSelect svelte-1l2sto3")},m(e,i){I(e,t,i),b(t,n),b(n,s),b(s,a),b(n,r),D(l,n,null),b(t,c),b(t,o),b(o,u),b(u,h),b(o,m),D(x,o,null),S=!0},p(e,[t]){const n={};!i&&1&t&&(i=!0,n.cr=e[0],_((()=>i=!1))),l.$set(n);const s={};!T&&2&t&&(T=!0,s.cr=e[1],_((()=>T=!1))),x.$set(s)},i(e){S||(O(l.$$.fragment,e),O(x.$$.fragment,e),S=!0)},o(e){V(l.$$.fragment,e),V(x.$$.fragment,e),S=!1},d(e){e&&y(t),z(l),z(x)}}}function On(e,t,n){var{min:s=0}=t,{max:a=30}=t;return e.$$set=e=>{"min"in e&&n(0,s=e.min),"max"in e&&n(1,a=e.max)},[s,a,function(e){n(0,s=e)},function(e){n(1,a=e)}]}class Vn extends o{constructor(e){super(),u(this,e,On,Dn,h,{min:0,max:1})}}function zn(e){let t,n,s,a,r,l,i,c,o,u,h,m,T,S,P,H,B,M,R,j,L;function q(t){e[6](t)}function X(t){e[7](t)}let F={};function W(t){e[8](t)}void 0!==e[1]&&(F.min=e[1]),void 0!==e[2]&&(F.max=e[2]),u=new Vn({props:F}),C.push((()=>U(u,"min",q))),C.push((()=>U(u,"max",X)));let G={possibleValues:xe()};return void 0!==e[3]&&(G.selectedValues=e[3]),B=new ze({props:G}),C.push((()=>U(B,"selectedValues",W))),{c(){t=f("div"),n=f("h3"),s=d("Search"),a=p(),r=f("input"),l=p(),i=f("h3"),c=d("Challenge rating"),o=p(),N(u.$$.fragment),T=p(),S=f("h3"),P=d("Environment"),H=p(),N(B.$$.fragment),this.h()},l(e){t=$(e,"DIV",{});var h=v(t);n=$(h,"H3",{class:!0});var f=v(n);s=g(f,"Search"),f.forEach(y),a=E(h),r=$(h,"INPUT",{class:!0}),l=E(h),i=$(h,"H3",{class:!0});var d=v(i);c=g(d,"Challenge rating"),d.forEach(y),o=E(h),k(u.$$.fragment,h),T=E(h),S=$(h,"H3",{class:!0});var p=v(S);P=g(p,"Environment"),p.forEach(y),H=E(h),k(B.$$.fragment,h),h.forEach(y),this.h()},h(){w(n,"class","svelte-1kicwjl"),w(r,"class","svelte-1kicwjl"),w(i,"class","svelte-1kicwjl"),w(S,"class","svelte-1kicwjl")},m(h,f){I(h,t,f),b(t,n),b(n,s),b(t,a),b(t,r),A(r,e[0]),b(t,l),b(t,i),b(i,c),b(t,o),D(u,t,null),b(t,T),b(t,S),b(S,P),b(t,H),D(B,t,null),R=!0,j||(L=x(r,"input",e[5]),j=!0)},p(e,[t]){1&t&&r.value!==e[0]&&A(r,e[0]);const n={};!h&&2&t&&(h=!0,n.min=e[1],_((()=>h=!1))),!m&&4&t&&(m=!0,n.max=e[2],_((()=>m=!1))),u.$set(n);const s={};!M&&8&t&&(M=!0,s.selectedValues=e[3],_((()=>M=!1))),B.$set(s)},i(e){R||(O(u.$$.fragment,e),O(B.$$.fragment,e),R=!0)},o(e){V(u.$$.fragment,e),V(B.$$.fragment,e),R=!1},d(e){e&&y(t),z(u),z(B),j=!1,L()}}}function Cn(e,t,n){var{filtering:s={query:a,cr:{min:0,max:30},environments:[]}}=t,a="",r=0,l=30,i=[];return e.$$set=e=>{"filtering"in e&&n(4,s=e.filtering)},e.$$.update=()=>{15&e.$$.dirty&&(n(4,s.query=a,s),n(4,s.cr.min=r,s),n(4,s.cr.max=l,s),n(4,s.environments=i,s))},[a,r,l,i,s,function(){a=this.value,n(0,a)},function(e){n(1,r=e)},function(e){n(2,l=e)},function(e){n(3,i=e)}]}class Hn extends o{constructor(e){super(),u(this,e,Cn,zn,h,{filtering:4})}}function Bn(e){let t,n,s,a,r,l,i,c,o,u,h,d;function m(t){e[4](t)}let g={};function x(t){e[5](t)}void 0!==e[0]&&(g.filtering=e[0]),s=new Hn({props:g}),C.push((()=>U(s,"filtering",m)));let T={items:e[2],limit:100,cr:!0,environments:!0,popup:!0,alignment:!0};return void 0!==e[1]&&(T.encounter=e[1]),i=new St({props:T}),C.push((()=>U(i,"encounter",x))),h=new bn({props:{encounter:e[1]}}),{c(){t=f("section"),n=f("div"),N(s.$$.fragment),r=p(),l=f("div"),N(i.$$.fragment),o=p(),u=f("div"),N(h.$$.fragment),this.h()},l(e){t=$(e,"SECTION",{class:!0});var a=v(t);n=$(a,"DIV",{class:!0});var c=v(n);k(s.$$.fragment,c),c.forEach(y),r=E(a),l=$(a,"DIV",{class:!0});var f=v(l);k(i.$$.fragment,f),f.forEach(y),o=E(a),u=$(a,"DIV",{class:!0});var d=v(u);k(h.$$.fragment,d),d.forEach(y),a.forEach(y),this.h()},h(){w(n,"class","filters svelte-o4kxqt"),w(l,"class","monsters svelte-o4kxqt"),w(u,"class","currentEncounter svelte-o4kxqt"),w(t,"class","encounterBuilder svelte-o4kxqt")},m(e,a){I(e,t,a),b(t,n),D(s,n,null),b(t,r),b(t,l),D(i,l,null),b(t,o),b(t,u),D(h,u,null),d=!0},p(e,[t]){const n={};!a&&1&t&&(a=!0,n.filtering=e[0],_((()=>a=!1))),s.$set(n);const r={};4&t&&(r.items=e[2]),!c&&2&t&&(c=!0,r.encounter=e[1],_((()=>c=!1))),i.$set(r);const l={};2&t&&(l.encounter=e[1]),h.$set(l)},i(e){d||(O(s.$$.fragment,e),O(i.$$.fragment,e),O(h.$$.fragment,e),d=!0)},o(e){V(s.$$.fragment,e),V(i.$$.fragment,e),V(h.$$.fragment,e),d=!1},d(e){e&&y(t),z(s),z(i),z(h)}}}function An(e,t,n){let s;var{campaign:a=j("campaign")}=t,r=bt(),l=Object.values(Ie),i={query:"",cr:{min:0,max:30},environments:[]};return e.$$set=e=>{"campaign"in e&&n(3,a=e.campaign)},e.$$.update=()=>{1&e.$$.dirty&&n(2,s=l.filter((e=>{let t=e.name.toLowerCase().includes(i.query.toLowerCase()),n=e.getCRValue()>=i.cr.min&&e.getCRValue()<=i.cr.max,s=0===i.environments.length||i.environments.some((t=>{var n;return null===(n=e.environment)||void 0===n?void 0:n.includes(t.toLowerCase())}));return t&&n&&s})))},[i,r,s,a,function(e){n(0,i=e)},function(e){n(1,r=e)}]}function Mn(e,t,n){const s=e.slice();return s[6]=t[n],s}function Rn(e){let t,n,s,a=e[6].name+"";return{c(){t=f("option"),n=d(a),this.h()},l(e){t=$(e,"OPTION",{value:!0});var s=v(t);n=g(s,a),s.forEach(y),this.h()},h(){t.__value=s=e[6].hash,t.value=t.__value},m(e,s){I(e,t,s),b(t,n)},p(e,r){8&r&&a!==(a=e[6].name+"")&&T(n,a),8&r&&s!==(s=e[6].hash)&&(t.__value=s,t.value=t.__value)},d(e){e&&y(t)}}}function jn(e){let t,n,s,a,r,l,i,c,o=e[3],u=[];for(let h=0;h<o.length;h+=1)u[h]=Rn(Mn(e,o,h));return{c(){t=f("section"),n=f("div"),s=f("p"),a=d("Only change the dataset for this campaign when updating an old dataset or you're absolutely sure the new dataset is compatible with the old one."),r=p(),l=f("select");for(let e=0;e<u.length;e+=1)u[e].c();this.h()},l(e){t=$(e,"SECTION",{class:!0});var i=v(t);n=$(i,"DIV",{class:!0});var c=v(n);s=$(c,"P",{});var o=v(s);a=g(o,"Only change the dataset for this campaign when updating an old dataset or you're absolutely sure the new dataset is compatible with the old one."),o.forEach(y),r=E(c),l=$(c,"SELECT",{});var h=v(l);for(let t=0;t<u.length;t+=1)u[t].l(h);h.forEach(y),c.forEach(y),i.forEach(y),this.h()},h(){void 0===e[2].dataset&&W((()=>e[5].call(l))),w(n,"class","generalSettings svelte-1mdek90"),w(t,"class","settings svelte-1mdek90")},m(o,h){I(o,t,h),b(t,n),b(n,s),b(s,a),b(n,r),b(n,l);for(let e=0;e<u.length;e+=1)u[e].m(l,null);G(l,e[2].dataset),i||(c=x(l,"change",e[5]),i=!0)},p(e,[t]){if(8&t){let n;for(o=e[3],n=0;n<o.length;n+=1){const s=Mn(e,o,n);u[n]?u[n].p(s,t):(u[n]=Rn(s),u[n].c(),u[n].m(l,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=o.length}12&t&&G(l,e[2].dataset)},i:M,o:M,d(e){e&&y(t),S(u,e),i=!1,c()}}}function Un(e,t,n){let s,a,r,l,i=M,c=()=>(i(),i=q(u,(e=>n(4,a=e))),u),o=M;ae(e,Te,(e=>n(3,l=e))),e.$$.on_destroy.push((()=>i())),e.$$.on_destroy.push((()=>o()));var{campaign:u=j("campaign")}=t;return c(),e.$$set=e=>{"campaign"in e&&c(n(0,u=e.campaign))},e.$$.update=()=>{16&e.$$.dirty&&(n(1,s=a.campaignStore),o(),o=q(s,(e=>n(2,r=e))))},[u,s,r,l,a,function(){r.dataset=Y(this),s.set(r)}]}const _n={default:{id:"default",title:"DM Screen",icon:"view-dashboard-outline",component:class extends o{constructor(e){super(),u(this,e,pn,dn,h,{campaign:0})}}},encounterBuilder:{id:"encounterBuilder",title:"Encounter builder",icon:"sword-cross",component:class extends o{constructor(e){super(),u(this,e,An,Bn,h,{campaign:3})}}},settingsView:{id:"settingsView",title:"Settings",icon:"cog",component:class extends o{constructor(e){super(),u(this,e,Un,jn,h,{campaign:0})}}}};function Ln(e){var t;const n=Se(`campaign_${e}`,We);n.update((e=>i(i({},We),e))),(null==(t=n.get())?void 0:t.dataset)||(n.get().dataset=Ne.get(),n.refresh());const s={campaignStore:n,refresh(){n.refresh()},subscribe(e){return n.subscribe((t=>{e(this)}))},update(e){n.update(e)}};return s.screens=function(e){const{campaignStore:t}=e;return{get:()=>t.get().screens,getScreenById(e){return this.get().find((t=>t.id===e))},getOpenScreenId:()=>t.get().currentScreenId,getOpenScreen(){return this.get().find((e=>e.id===this.getOpenScreenId()))},newScreen(){let e=i({},Le);e.id=oe(),e.name="New screen",this.get().push(e),t.refresh()},openScreen(e){"object"==typeof e&&(e=e.id),t.get().currentScreenId=e,t.refresh()},deleteScreen(e){let n=this.get(),s=n.indexOf(e);if(s<0)return"notAScreen";this.openScreen("root"),n.splice(s,1),t.refresh()},addItemToScreen(e,n="Pinned item",s,a=null){let r=c(i({},Fe),{id:oe(),title:n,type:s,data:a});e.items.push(r),t.refresh()},addItemToCurrentScreen(e="Pinned item",t,n=null){this.addItemToScreen(this.getOpenScreen(),e,t,n)},removeItemFromScreen(e,n){let s=e.items.indexOf(n);e.items.splice(s,1),t.refresh()},renameCurrentScreen(e){this.getOpenScreen().name=e,t.refresh()},moveUp(e){let n=this.getOpenScreen().items,s=n.sort((t=>t.id===e.id?-1:1)).map(((e,t)=>(e.index=n.length-t,e)));this.getOpenScreen().items=s,t.refresh()},togglePin(t){t.pinned=!t.pinned,e.refresh()},moveItemTo(e,n){"string"==typeof n&&(n=this.getScreenById(n)),this.removeItemFromScreen(this.getOpenScreen(),e),this.addItemToScreen(n,e.title,e.type,e.data),t.refresh()}}}(s),s.party=function(e){const{campaignStore:t}=e;return{get:()=>t.get().partyMembers,getById(e){return this.get().find((t=>t.id===e))||null},addMember(){let t=i({},Ge);t.id=oe(),this.get().push(t),e.refresh()},removeMember(t){let n=this.get().indexOf(t);if(n<0)return"noPartyMember";this.get().splice(n,1),e.refresh()},getXPThreshHolds(){let e=this.get(),t={easy:0,medium:0,hard:0,deadly:0};for(let{level:n}of e){if(n<1||n>20)continue;let e=n-1,[s,a,r,l]=Ke[e];t.easy+=s,t.medium+=a,t.hard+=r,t.deadly+=l}return t},getDailyXP(){return this.get().map((e=>Ye[e.level])).reduce(((e,t)=>e+t),0)}}}(s),s.initiative=function(e){const{campaignStore:t}=e;return{get:()=>t.get().initiative,getCombatStarted(){return this.get().length>0},getRound:()=>t.get().initiativeRound,getPreviousInitiativeIndex(){return this.getMappedIndex(this.getCurrentInitiativeIndex()-1)},getCurrentInitiativeIndex:()=>t.get().currentInitiativeIndex,getNextInitiativeIndex(){return this.getMappedIndex(this.getCurrentInitiativeIndex()+1)},getPreviousEntry(){let e=this.getPreviousInitiativeIndex();return this.getSortedInitiative()[e]},getCurrentEntry(){let e=this.getCurrentInitiativeIndex();return this.getSortedInitiative()[e]},getNextEntry(){let e=this.getNextInitiativeIndex();return this.getSortedInitiative()[e]},getInitiativeOverview(){return[this.getPreviousEntry(),this.getCurrentEntry(),this.getNextEntry()]},getSortedInitiative(){return this.get().sort(((e,t)=>t.initiative-e.initiative))},getMappedIndex(e){return function(e,t,n){let s=e%(n+1);return s<0&&(s=n+1+s),s+t}(e,0,this.get().length-1)},previousInitiative(){let n=this.getPreviousInitiativeIndex(),s=t.get();s.currentInitiativeIndex=n,n===this.get().length-1&&s.initiativeRound--,e.refresh()},nextInitiative(){let n=this.getNextInitiativeIndex(),s=t.get();s.currentInitiativeIndex=n,0===n&&s.initiativeRound++,e.refresh()},addEntryToInitiative(t){this.get().push(t),e.refresh()},addManualEntry(){let e=Qe();this.addEntryToInitiative(e)},addPartyMember(e){let t=Qe();t.type="partyMember",t.name=e.name,t.data=e.id,this.addEntryToInitiative(t)},addPartyToInitiative(){let t=e.party.get();for(let e of t)this.addPartyMember(e)},addMonster(e){let t=Qe();t.type="monster",t.name=e.name,t.data=Ee(e),t.currentHealth=e.hp.average,t.maxHealth=e.hp.average,this.addEntryToInitiative(t)},removeEntry(n){let s=this.get().indexOf(n);if(s<0)return"noEntry";let a=t.get().currentInitiativeIndex;var r,l,i;t.get().currentInitiativeIndex=(r=0,l=a,i=this.get().length-1,l<r?r:l>i?i:l),this.get().splice(s,1),e.refresh()}}}(s),s.mainManager=function(e){const{campaignStore:t}=e;return{get(){let e=this.getCurrentId();return _n[e]||_n.default},getCurrentId:()=>t.get().currentManager,getList:()=>Object.values(_n),setManager(e){t.get().currentManager=e,t.refresh()},showSourcePage(e,t){this.setManager("bookView"),this.get().openSource=e,this.get().openPage=t}}}(s),s}function qn(e,t,n){const s=e.slice();return s[10]=t[n],s}function Xn(e){let t,n,s,a,r=e[2],l=[];for(let i=0;i<r.length;i+=1)l[i]=Fn(qn(e,r,i));return{c(){t=f("div");for(let e=0;e<l.length;e+=1)l[e].c();this.h()},l(e){t=$(e,"DIV",{class:!0});var n=v(t);for(let t=0;t<l.length;t+=1)l[t].l(n);n.forEach(y),this.h()},h(){w(t,"class","menu svelte-wqlf6z")},m(r,i){I(r,t,i);for(let e=0;e<l.length;e+=1)l[e].m(t,null);s||(a=re(n=ye.call(null,t,e[5])),s=!0)},p(e,n){if(76&n){let s;for(r=e[2],s=0;s<r.length;s+=1){const a=qn(e,r,s);l[s]?l[s].p(a,n):(l[s]=Fn(a),l[s].c(),l[s].m(t,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=r.length}},d(e){e&&y(t),S(l,e),s=!1,a()}}}function Fn(e){let t,n,s,a,r,l,i,c,o,u,h=e[10].title+"";function m(){return e[9](e[10])}return{c(){t=f("div"),n=f("p"),s=f("span"),r=p(),l=d(h),i=p(),this.h()},l(e){t=$(e,"DIV",{class:!0});var a=v(t);n=$(a,"P",{class:!0});var c=v(n);s=$(c,"SPAN",{class:!0}),v(s).forEach(y),r=E(c),l=g(c,h),c.forEach(y),i=E(a),a.forEach(y),this.h()},h(){w(s,"class",a="mdi mdi-"+e[10].icon+" svelte-wqlf6z"),w(n,"class","svelte-wqlf6z"),w(t,"class",c="menuItem "+(e[10].id===e[3]&&"current")+" svelte-wqlf6z")},m(e,a){I(e,t,a),b(t,n),b(n,s),b(n,r),b(n,l),b(t,i),o||(u=x(t,"click",m),o=!0)},p(n,r){e=n,4&r&&a!==(a="mdi mdi-"+e[10].icon+" svelte-wqlf6z")&&w(s,"class",a),4&r&&h!==(h=e[10].title+"")&&T(l,h),12&r&&c!==(c="menuItem "+(e[10].id===e[3]&&"current")+" svelte-wqlf6z")&&w(t,"class",c)},d(e){e&&y(t),o=!1,u()}}}function Wn(e){let t,n,s,a,r,l,i=e[0]&&Xn(e);return{c(){t=f("button"),n=f("span"),s=p(),i&&i.c(),a=m(),this.h()},l(e){t=$(e,"BUTTON",{class:!0});var r=v(t);n=$(r,"SPAN",{class:!0}),v(n).forEach(y),r.forEach(y),s=E(e),i&&i.l(e),a=m(),this.h()},h(){w(n,"class","mdi mdi-menu svelte-wqlf6z"),w(t,"class","navButton svelte-wqlf6z")},m(c,o){I(c,t,o),b(t,n),I(c,s,o),i&&i.m(c,o),I(c,a,o),r||(l=x(t,"click",e[4]),r=!0)},p(e,[t]){e[0]?i?i.p(e,t):(i=Xn(e),i.c(),i.m(a.parentNode,a)):i&&(i.d(1),i=null)},i:M,o:M,d(e){e&&y(t),e&&y(s),i&&i.d(e),e&&y(a),r=!1,l()}}}function Gn(e,t,n){let s,a,r,l,i=M;e.$$.on_destroy.push((()=>i()));var{campaign:c}=t,o=!1;function u(e){c.mainManager.setManager(e)}return e.$$set=e=>{"campaign"in e&&n(7,c=e.campaign)},e.$$.update=()=>{128&e.$$.dirty&&(n(1,s=c.campaignStore),i(),i=q(s,(e=>n(8,l=e)))),384&e.$$.dirty&&n(2,a=c.mainManager.getList(l)),384&e.$$.dirty&&n(3,r=c.mainManager.getCurrentId(l))},[o,s,a,r,function(){setTimeout((()=>{n(0,o=!0)}),0)},function(){n(0,o=!1)},u,c,l,e=>u(e.id)]}class Kn extends o{constructor(e){super(),u(this,e,Gn,Wn,h,{campaign:7})}}function Yn(e){let t,n,s,a,r,l,i,c,o,u,h,m,S;return{c(){t=f("h1"),n=d(e[1]),a=p(),r=f("p"),l=d(e[2]),i=p(),c=f("input"),o=p(),u=f("button"),h=d("roll"),this.h()},l(s){t=$(s,"H1",{class:!0});var f=v(t);n=g(f,e[1]),f.forEach(y),a=E(s),r=$(s,"P",{class:!0});var d=v(r);l=g(d,e[2]),d.forEach(y),i=E(s),c=$(s,"INPUT",{class:!0}),o=E(s),u=$(s,"BUTTON",{class:!0});var p=v(u);h=g(p,"roll"),p.forEach(y),this.h()},h(){w(t,"class",s=Q(e[4])+" svelte-16axwwy"),w(r,"class","svelte-16axwwy"),w(c,"class","svelte-16axwwy"),w(u,"class","svelte-16axwwy")},m(s,f){I(s,t,f),b(t,n),I(s,a,f),I(s,r,f),b(r,l),I(s,i,f),I(s,c,f),e[13](c),A(c,e[0]),I(s,o,f),I(s,u,f),b(u,h),m||(S=[x(c,"input",e[14]),x(c,"keydown",e[6]),x(u,"click",e[5])],m=!0)},p(e,[a]){2&a&&T(n,e[1]),16&a&&s!==(s=Q(e[4])+" svelte-16axwwy")&&w(t,"class",s),4&a&&T(l,e[2]),1&a&&c.value!==e[0]&&A(c,e[0])},i:M,o:M,d(n){n&&y(t),n&&y(a),n&&y(r),n&&y(i),n&&y(c),e[13](null),n&&y(o),n&&y(u),m=!1,R(S)}}}function Jn(e,t,n){let s,a,r;var l,i,c,{expression:o=""}=t,{doRoll:u=!1}=t,{doFocus:h=!1}=t,f="?",d="";function p(){let e=ke(o);e?(n(1,f=String(e.result)),n(2,d=e.resultExpression),n(9,i=e.minResult),n(10,c=e.maxResult)):(n(1,f="?"),n(2,d=""))}return le((()=>{h&&l.focus()})),p(),e.$$set=e=>{"expression"in e&&n(0,o=e.expression),"doRoll"in e&&n(7,u=e.doRoll),"doFocus"in e&&n(8,h=e.doFocus)},e.$$.update=()=>{514&e.$$.dirty&&n(11,s=f===i),1026&e.$$.dirty&&n(12,a=f===c),6144&e.$$.dirty&&n(4,r=`${s?"natOne":""} ${a?"natTwenty":""}`),128&e.$$.dirty&&u&&(p(),n(7,u=!1))},[o,f,d,l,r,p,function(e){let t=["d","+","-","/","*","^","Backspace","a"];"Enter"===e.key?p():isNaN(e.key)&&!t.includes(e.key)&&e.preventDefault()},u,h,i,c,s,a,function(e){C[e?"unshift":"push"]((()=>{n(3,l=e)}))},function(){o=this.value,n(0,o)}]}class Qn extends o{constructor(e){super(),u(this,e,Jn,Yn,h,{expression:0,doRoll:7,doFocus:8})}}function Zn(e){let t,n,s,a,r,l;return n=new Qn({props:{doFocus:!0}}),{c(){t=f("div"),N(n.$$.fragment),this.h()},l(e){t=$(e,"DIV",{class:!0});var s=v(t);k(n.$$.fragment,s),s.forEach(y),this.h()},h(){w(t,"class","diceDrawer svelte-lxlzgl")},m(i,c){I(i,t,c),D(n,t,null),a=!0,r||(l=re(s=ye.call(null,t,e[2])),r=!0)},p:M,i(e){a||(O(n.$$.fragment,e),a=!0)},o(e){V(n.$$.fragment,e),a=!1},d(e){e&&y(t),z(n),r=!1,l()}}}function es(e){let t,n,s,a,r,l,i,c=e[0]&&Zn(e);return{c(){t=f("button"),n=f("span"),s=p(),c&&c.c(),a=m(),this.h()},l(e){t=$(e,"BUTTON",{class:!0});var r=v(t);n=$(r,"SPAN",{class:!0}),v(n).forEach(y),r.forEach(y),s=E(e),c&&c.l(e),a=m(),this.h()},h(){w(n,"class","mdi mdi-dice-d20 svelte-lxlzgl"),w(t,"class","svelte-lxlzgl")},m(o,u){I(o,t,u),b(t,n),I(o,s,u),c&&c.m(o,u),I(o,a,u),r=!0,l||(i=x(t,"click",e[1]),l=!0)},p(e,[t]){e[0]?c?(c.p(e,t),1&t&&O(c,1)):(c=Zn(e),c.c(),O(c,1),c.m(a.parentNode,a)):c&&(H(),V(c,1,1,(()=>{c=null})),B())},i(e){r||(O(c),r=!0)},o(e){V(c),r=!1},d(e){e&&y(t),e&&y(s),c&&c.d(e),e&&y(a),l=!1,i()}}}function ts(e,t,n){var s=!1,a=!0;return[s,function(){n(0,s=!0),a=!0},function(){a?a=!1:n(0,s=!1)}]}class ns extends o{constructor(e){super(),u(this,e,ts,es,h,{})}}function ss(e,t,n){const s=e.slice();return s[12]=t[n],s[13]=t,s[14]=n,s}function as(e){let t,n,s,a,r,l,i,c,o,u,h,d,m,g,T,S;function N(){e[8].call(s,e[13],e[14])}function k(){e[9].call(l,e[13],e[14])}function P(){e[10].call(o,e[13],e[14])}function D(){return e[11](e[12])}return{c(){t=f("tr"),n=f("td"),s=f("input"),a=p(),r=f("td"),l=f("input"),i=p(),c=f("td"),o=f("input"),u=p(),h=f("td"),d=f("button"),m=f("span"),g=p(),this.h()},l(e){t=$(e,"TR",{});var f=v(t);n=$(f,"TD",{class:!0});var p=v(n);s=$(p,"INPUT",{type:!0,spellcheck:!0,class:!0}),p.forEach(y),a=E(f),r=$(f,"TD",{class:!0});var w=v(r);l=$(w,"INPUT",{type:!0,min:!0,max:!0,class:!0}),w.forEach(y),i=E(f),c=$(f,"TD",{class:!0});var I=v(c);o=$(I,"INPUT",{type:!0,min:!0,class:!0}),I.forEach(y),u=E(f),h=$(f,"TD",{class:!0});var b=v(h);d=$(b,"BUTTON",{class:!0});var x=v(d);m=$(x,"SPAN",{class:!0}),v(m).forEach(y),x.forEach(y),b.forEach(y),g=E(f),f.forEach(y),this.h()},h(){w(s,"type","text"),w(s,"spellcheck","false"),w(s,"class","svelte-57itb8"),w(n,"class","name svelte-57itb8"),w(l,"type","number"),w(l,"min","1"),w(l,"max","20"),w(l,"class","svelte-57itb8"),w(r,"class","level svelte-57itb8"),w(o,"type","number"),w(o,"min","0"),w(o,"class","svelte-57itb8"),w(c,"class","pp svelte-57itb8"),w(m,"class","mdi mdi-close"),w(d,"class","svelte-57itb8"),w(h,"class","action svelte-57itb8")},m(f,p){I(f,t,p),b(t,n),b(n,s),A(s,e[12].name),b(t,a),b(t,r),b(r,l),A(l,e[12].level),b(t,i),b(t,c),b(c,o),A(o,e[12].pp),b(t,u),b(t,h),b(h,d),b(d,m),b(t,g),T||(S=[x(s,"input",N),x(s,"blur",e[5]),x(l,"input",k),x(l,"blur",e[5]),x(o,"input",P),x(o,"blur",e[5]),x(d,"click",D)],T=!0)},p(t,n){e=t,1&n&&s.value!==e[12].name&&A(s,e[12].name),1&n&&ie(l.value)!==e[12].level&&A(l,e[12].level),1&n&&ie(o.value)!==e[12].pp&&A(o,e[12].pp)},d(e){e&&y(t),T=!1,R(S)}}}function rs(e){let t,n,s,a,r,l,i,c,o,u,h,m,N,k,D,O,V,z,C,H,B,A,R,j,U,_,L,q,X,F,W,G,K,Y,J,Q,Z,ee,te,ne,se,ae,re,le,ie,ce,oe,ue,he,fe,de,pe,me=e[1].easy+"",$e=e[1].medium+"",ve=e[1].hard+"",ge=e[1].deadly+"",ye=e[0],Ee=[];for(let f=0;f<ye.length;f+=1)Ee[f]=as(ss(e,ye,f));return{c(){t=f("table"),n=f("tr"),s=f("th"),a=d("Easy"),r=p(),l=f("th"),i=d("Medium"),c=p(),o=f("th"),u=d("Hard"),h=p(),m=f("th"),N=d("Deadly"),k=p(),D=f("tr"),O=f("td"),V=d(me),z=p(),C=f("td"),H=d($e),B=p(),A=f("td"),R=d(ve),j=p(),U=f("td"),_=d(ge),L=p(),q=f("table"),X=f("colgroup"),F=f("col"),W=p(),G=f("col"),K=p(),Y=f("col"),J=p(),Q=f("tr"),Z=f("th"),ee=d("Name"),te=p(),ne=f("th"),se=d("LvL"),ae=p(),re=f("th"),le=d("PP"),ie=p(),ce=f("th"),oe=p();for(let e=0;e<Ee.length;e+=1)Ee[e].c();ue=p(),he=f("button"),fe=d("Add Member"),this.h()},l(e){t=$(e,"TABLE",{class:!0});var f=v(t);n=$(f,"TR",{});var d=v(n);s=$(d,"TH",{class:!0});var p=v(s);a=g(p,"Easy"),p.forEach(y),r=E(d),l=$(d,"TH",{class:!0});var w=v(l);i=g(w,"Medium"),w.forEach(y),c=E(d),o=$(d,"TH",{class:!0});var I=v(o);u=g(I,"Hard"),I.forEach(y),h=E(d),m=$(d,"TH",{class:!0});var b=v(m);N=g(b,"Deadly"),b.forEach(y),d.forEach(y),k=E(f),D=$(f,"TR",{});var x=v(D);O=$(x,"TD",{class:!0});var T=v(O);V=g(T,me),T.forEach(y),z=E(x),C=$(x,"TD",{class:!0});var S=v(C);H=g(S,$e),S.forEach(y),B=E(x),A=$(x,"TD",{class:!0});var P=v(A);R=g(P,ve),P.forEach(y),j=E(x),U=$(x,"TD",{class:!0});var M=v(U);_=g(M,ge),M.forEach(y),x.forEach(y),f.forEach(y),L=E(e),q=$(e,"TABLE",{class:!0});var de=v(q);X=$(de,"COLGROUP",{});var pe=v(X);F=$(pe,"COL",{span:!0,style:!0}),W=E(pe),G=$(pe,"COL",{span:!0,style:!0}),K=E(pe),Y=$(pe,"COL",{span:!0,style:!0}),pe.forEach(y),J=E(de),Q=$(de,"TR",{});var ye=v(Q);Z=$(ye,"TH",{class:!0});var we=v(Z);ee=g(we,"Name"),we.forEach(y),te=E(ye),ne=$(ye,"TH",{class:!0});var Ie=v(ne);se=g(Ie,"LvL"),Ie.forEach(y),ae=E(ye),re=$(ye,"TH",{class:!0});var be=v(re);le=g(be,"PP"),be.forEach(y),ie=E(ye),ce=$(ye,"TH",{class:!0}),v(ce).forEach(y),ye.forEach(y),oe=E(de);for(let t=0;t<Ee.length;t+=1)Ee[t].l(de);de.forEach(y),ue=E(e),he=$(e,"BUTTON",{class:!0});var xe=v(he);fe=g(xe,"Add Member"),xe.forEach(y),this.h()},h(){w(s,"class","svelte-57itb8"),w(l,"class","svelte-57itb8"),w(o,"class","svelte-57itb8"),w(m,"class","svelte-57itb8"),w(O,"class","svelte-57itb8"),w(C,"class","svelte-57itb8"),w(A,"class","svelte-57itb8"),w(U,"class","svelte-57itb8"),w(t,"class","xpThresholds svelte-57itb8"),w(F,"span","1"),P(F,"width","60%"),w(G,"span","1"),P(G,"width","20%"),w(Y,"span","1"),P(Y,"width","20%"),w(Z,"class","name svelte-57itb8"),w(ne,"class","level svelte-57itb8"),w(re,"class","pp svelte-57itb8"),w(ce,"class","action svelte-57itb8"),w(q,"class","svelte-57itb8"),w(he,"class","svelte-57itb8")},m(f,d){I(f,t,d),b(t,n),b(n,s),b(s,a),b(n,r),b(n,l),b(l,i),b(n,c),b(n,o),b(o,u),b(n,h),b(n,m),b(m,N),b(t,k),b(t,D),b(D,O),b(O,V),b(D,z),b(D,C),b(C,H),b(D,B),b(D,A),b(A,R),b(D,j),b(D,U),b(U,_),I(f,L,d),I(f,q,d),b(q,X),b(X,F),b(X,W),b(X,G),b(X,K),b(X,Y),b(q,J),b(q,Q),b(Q,Z),b(Z,ee),b(Q,te),b(Q,ne),b(ne,se),b(Q,ae),b(Q,re),b(re,le),b(Q,ie),b(Q,ce),b(q,oe);for(let e=0;e<Ee.length;e+=1)Ee[e].m(q,null);I(f,ue,d),I(f,he,d),b(he,fe),de||(pe=x(he,"click",e[3]),de=!0)},p(e,[t]){if(2&t&&me!==(me=e[1].easy+"")&&T(V,me),2&t&&$e!==($e=e[1].medium+"")&&T(H,$e),2&t&&ve!==(ve=e[1].hard+"")&&T(R,ve),2&t&&ge!==(ge=e[1].deadly+"")&&T(_,ge),49&t){let n;for(ye=e[0],n=0;n<ye.length;n+=1){const s=ss(e,ye,n);Ee[n]?Ee[n].p(s,t):(Ee[n]=as(s),Ee[n].c(),Ee[n].m(q,null))}for(;n<Ee.length;n+=1)Ee[n].d(1);Ee.length=ye.length}},i:M,o:M,d(e){e&&y(t),e&&y(L),e&&y(q),S(Ee,e),e&&y(ue),e&&y(he),de=!1,pe()}}}function ls(e,t,n){let s,a,r;var{campaign:l}=t;const{campaignStore:i}=l;function c(e){l.party.removeMember(e)}ae(e,i,(e=>n(7,r=e)));return e.$$set=e=>{"campaign"in e&&n(6,l=e.campaign)},e.$$.update=()=>{192&e.$$.dirty&&n(0,s=l.party.get(r)),192&e.$$.dirty&&n(1,a=l.party.getXPThreshHolds(r))},[s,a,i,function(){l.party.addMember()},c,function(){l.refresh()},l,r,function(e,t){e[t].name=this.value,n(0,s),n(6,l),n(7,r)},function(e,t){e[t].level=ie(this.value),n(0,s),n(6,l),n(7,r)},function(e,t){e[t].pp=ie(this.value),n(0,s),n(6,l),n(7,r)},e=>c(e)]}class is extends o{constructor(e){super(),u(this,e,ls,rs,h,{campaign:6})}}function cs(e){let t,n,s,a,r,l;return n=new is({props:{campaign:e[0]}}),{c(){t=f("div"),N(n.$$.fragment),this.h()},l(e){t=$(e,"DIV",{class:!0});var s=v(t);k(n.$$.fragment,s),s.forEach(y),this.h()},h(){w(t,"class","svelte-1m41ok8")},m(i,c){I(i,t,c),D(n,t,null),a=!0,r||(l=re(s=ye.call(null,t,e[3])),r=!0)},p(e,t){const s={};1&t&&(s.campaign=e[0]),n.$set(s)},i(e){a||(O(n.$$.fragment,e),a=!0)},o(e){V(n.$$.fragment,e),a=!1},d(e){e&&y(t),z(n),r=!1,l()}}}function os(e){let t,n,s,a,r,l,i,c=e[1]&&cs(e);return{c(){t=f("button"),n=d("Party Members"),s=p(),c&&c.c(),a=m(),this.h()},l(e){t=$(e,"BUTTON",{class:!0});var r=v(t);n=g(r,"Party Members"),r.forEach(y),s=E(e),c&&c.l(e),a=m(),this.h()},h(){w(t,"class","toolbarButton svelte-1m41ok8")},m(o,u){I(o,t,u),b(t,n),I(o,s,u),c&&c.m(o,u),I(o,a,u),r=!0,l||(i=x(t,"click",e[2]),l=!0)},p(e,[t]){e[1]?c?(c.p(e,t),2&t&&O(c,1)):(c=cs(e),c.c(),O(c,1),c.m(a.parentNode,a)):c&&(H(),V(c,1,1,(()=>{c=null})),B())},i(e){r||(O(c),r=!0)},o(e){V(c),r=!1},d(e){e&&y(t),e&&y(s),c&&c.d(e),e&&y(a),l=!1,i()}}}function us(e,t,n){var{campaign:s}=t,a=!1,r=!0;return e.$$set=e=>{"campaign"in e&&n(0,s=e.campaign)},[s,a,function(){n(1,a=!a),a&&(r=!0)},function(){r?r=!1:n(1,a=!1)}]}class hs extends o{constructor(e){super(),u(this,e,us,os,h,{campaign:0})}}function fs(e){let t,n,s,a,r=e[1]&&ds(),l=e[2]&&ps(),i=e[3]&&ms(),c=e[4]&&$s();return{c(){t=f("div"),r&&r.c(),n=p(),l&&l.c(),s=p(),i&&i.c(),a=p(),c&&c.c(),this.h()},l(e){t=$(e,"DIV",{class:!0});var o=v(t);r&&r.l(o),n=E(o),l&&l.l(o),s=E(o),i&&i.l(o),a=E(o),c&&c.l(o),o.forEach(y),this.h()},h(){w(t,"class","itemsHeader svelte-kocnz6")},m(e,o){I(e,t,o),r&&r.m(t,null),b(t,n),l&&l.m(t,null),b(t,s),i&&i.m(t,null),b(t,a),c&&c.m(t,null)},p(e,o){e[1]?r||(r=ds(),r.c(),r.m(t,n)):r&&(r.d(1),r=null),e[2]?l||(l=ps(),l.c(),l.m(t,s)):l&&(l.d(1),l=null),e[3]?i||(i=ms(),i.c(),i.m(t,a)):i&&(i.d(1),i=null),e[4]?c||(c=$s(),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},d(e){e&&y(t),r&&r.d(),l&&l.d(),i&&i.d(),c&&c.d()}}}function ds(e){let t,n;return{c(){t=f("div"),n=d("Feature"),this.h()},l(e){t=$(e,"DIV",{class:!0});var s=v(t);n=g(s,"Feature"),s.forEach(y),this.h()},h(){w(t,"class","nameWrapper")},m(e,s){I(e,t,s),b(t,n)},d(e){e&&y(t)}}}function ps(e){let t;return{c(){t=f("div"),this.h()},l(e){t=$(e,"DIV",{class:!0}),v(t).forEach(y),this.h()},h(){w(t,"class","wrapper centerText svelte-kocnz6")},m(e,n){I(e,t,n)},d(e){e&&y(t)}}}function ms(e){let t;return{c(){t=f("div"),this.h()},l(e){t=$(e,"DIV",{class:!0}),v(t).forEach(y),this.h()},h(){w(t,"class","wrapper centerText svelte-kocnz6")},m(e,n){I(e,t,n)},d(e){e&&y(t)}}}function $s(e){let t;return{c(){t=f("div"),this.h()},l(e){t=$(e,"DIV",{class:!0}),v(t).forEach(y),this.h()},h(){w(t,"class","wrapper dropdownIndicatorWrapper")},m(e,n){I(e,t,n)},d(e){e&&y(t)}}}function vs(e){let t,n,s,a,r,l,i,c=e[0].name+"";return{c(){t=f("div"),n=f("div"),s=f("p"),a=d(c),r=p(),l=f("p"),i=d(e[7]),this.h()},l(o){t=$(o,"DIV",{class:!0});var u=v(t);n=$(u,"DIV",{class:!0});var h=v(n);s=$(h,"P",{class:!0});var f=v(s);a=g(f,c),f.forEach(y),r=E(h),l=$(h,"P",{class:!0});var d=v(l);i=g(d,e[7]),d.forEach(y),h.forEach(y),u.forEach(y),this.h()},h(){w(s,"class","spellName svelte-kocnz6"),w(l,"class","spellDescription svelte-kocnz6"),w(n,"class","overflowWrapper svelte-kocnz6"),w(t,"class","nameWrapper svelte-kocnz6")},m(e,c){I(e,t,c),b(t,n),b(n,s),b(s,a),b(n,r),b(n,l),b(l,i)},p(e,t){1&t&&c!==(c=e[0].name+"")&&T(a,c),128&t&&T(i,e[7])},d(e){e&&y(t)}}}function gs(e){let t,n,s,a,r,l,i,c,o;return{c(){t=f("div"),n=f("div"),s=f("input"),a=p(),r=f("div"),l=p(),i=f("input"),this.h()},l(e){t=$(e,"DIV",{class:!0});var c=v(t);n=$(c,"DIV",{class:!0});var o=v(n);s=$(o,"INPUT",{type:!0,tabindex:!0,class:!0}),a=E(o),r=$(o,"DIV",{class:!0}),v(r).forEach(y),l=E(o),i=$(o,"INPUT",{type:!0,tabindex:!0,class:!0}),o.forEach(y),c.forEach(y),this.h()},h(){w(s,"type","text"),w(s,"tabindex","-1"),w(s,"class","svelte-kocnz6"),w(r,"class","divider svelte-kocnz6"),w(i,"type","text"),w(i,"tabindex","-1"),w(i,"class","svelte-kocnz6"),w(n,"class","centerWrapper"),w(t,"class","healthManager svelte-kocnz6")},m(u,h){I(u,t,h),b(t,n),b(n,s),A(s,e[0].currentHealth),b(n,a),b(n,r),b(n,l),b(n,i),A(i,e[0].maxHealth),c||(o=[x(s,"keydown",Is),x(s,"input",e[18]),x(i,"keydown",Is),x(i,"input",e[19])],c=!0)},p(e,t){1&t&&s.value!==e[0].currentHealth&&A(s,e[0].currentHealth),1&t&&i.value!==e[0].maxHealth&&A(i,e[0].maxHealth)},d(e){e&&y(t),c=!1,R(o)}}}function ys(e){let t;return{c(){t=f("div"),this.h()},l(e){t=$(e,"DIV",{class:!0}),v(t).forEach(y),this.h()},h(){w(t,"class","deathSavesManager svelte-kocnz6")},m(e,n){I(e,t,n)},p:M,d(e){e&&y(t)}}}function Es(e){let t,n,s,a,r,l,i,c,o,u,h,d,m,g,T=e[6]&&fs(e),S=e[1]&&vs(e);function N(e,t){return"partyMember"===e[0].type?ys:"monster"===e[0].type?gs:void 0}let k=N(e),P=k&&k(e);return{c(){T&&T.c(),t=p(),n=f("div"),s=f("div"),a=f("input"),l=p(),S&&S.c(),i=p(),c=f("div"),P&&P.c(),o=p(),u=f("div"),h=f("button"),d=f("span"),this.h()},l(e){T&&T.l(e),t=E(e),n=$(e,"DIV",{class:!0});var r=v(n);s=$(r,"DIV",{class:!0});var f=v(s);a=$(f,"INPUT",{class:!0,type:!0,tabindex:!0}),f.forEach(y),l=E(r),S&&S.l(r),i=E(r),c=$(r,"DIV",{class:!0});var p=v(c);P&&P.l(p),p.forEach(y),o=E(r),u=$(r,"DIV",{class:!0});var m=v(u);h=$(m,"BUTTON",{class:!0});var g=v(h);d=$(g,"SPAN",{class:!0}),v(d).forEach(y),g.forEach(y),m.forEach(y),r.forEach(y),this.h()},h(){w(a,"class",r=Q(e[8]&&"isCurrent")+" svelte-kocnz6"),w(a,"type","text"),w(a,"tabindex","0"),w(s,"class","initiative wrapper svelte-kocnz6"),w(c,"class","wrapper controlls svelte-kocnz6"),w(d,"class","mdi mdi-close svelte-kocnz6"),w(h,"class","svelte-kocnz6"),w(u,"class","wrapper controlls buttons svelte-kocnz6"),w(n,"class","initiativeItem svelte-kocnz6")},m(r,f){T&&T.m(r,f),I(r,t,f),I(r,n,f),b(n,s),b(s,a),A(a,e[0].initiative),b(n,l),S&&S.m(n,null),b(n,i),b(n,c),P&&P.m(c,null),b(n,o),b(n,u),b(u,h),b(h,d),m||(g=[x(a,"input",e[17]),x(a,"keydown",Is),x(a,"focus",ws),x(a,"blur",e[10]),x(h,"click",e[9])],m=!0)},p(e,[s]){e[6]?T?T.p(e,s):(T=fs(e),T.c(),T.m(t.parentNode,t)):T&&(T.d(1),T=null),256&s&&r!==(r=Q(e[8]&&"isCurrent")+" svelte-kocnz6")&&w(a,"class",r),1&s&&a.value!==e[0].initiative&&A(a,e[0].initiative),e[1]?S?S.p(e,s):(S=vs(e),S.c(),S.m(n,i)):S&&(S.d(1),S=null),k===(k=N(e))&&P?P.p(e,s):(P&&P.d(1),P=k&&k(e),P&&(P.c(),P.m(c,null)))},i:M,o:M,d(e){T&&T.d(e),e&&y(t),e&&y(n),S&&S.d(),P&&P.d(),m=!1,R(g)}}}function ws({target:e}){e.select()}function Is(e){let{key:t}=e;isNaN(t)&&!["Backspace","ArrowRight","ArrowLeft","Tab"].includes(t)&&e.preventDefault()}function bs(e,t,n){let s,a,r,l,i,c=M;e.$$.on_destroy.push((()=>c()));var{campaign:o=null}=t,{initiativeEntry:u=null}=t,{showName:h=!0}=t,{showHeader:f=!1}=t,{showAddButton:d=!1}=t,{showRemoveButton:p=!1}=t,{showDetails:m=!1}=t,{showPopup:$=!0}=t,{index:v=null}=t,{firstItem:g=!1}=t;return e.$$set=e=>{"campaign"in e&&n(11,o=e.campaign),"initiativeEntry"in e&&n(0,u=e.initiativeEntry),"showName"in e&&n(1,h=e.showName),"showHeader"in e&&n(12,f=e.showHeader),"showAddButton"in e&&n(2,d=e.showAddButton),"showRemoveButton"in e&&n(3,p=e.showRemoveButton),"showDetails"in e&&n(4,m=e.showDetails),"showPopup"in e&&n(13,$=e.showPopup),"index"in e&&n(14,v=e.index),"firstItem"in e&&n(15,g=e.firstItem)},e.$$.update=()=>{2048&e.$$.dirty&&(n(5,s=o.campaignStore),c(),c=q(s,(e=>n(16,i=e)))),53248&e.$$.dirty&&n(6,a=f&&(0===v||g)),65537&e.$$.dirty&&n(7,r=function(e){let t=[];if("partyMember"===e.type){let n=o.party.getById(e.data);t.push(`Level: ${n.level}`),t.push(`Passive Perception: ${n.pp}`)}return t.join(" • ")}(u)),2049&e.$$.dirty&&n(8,l=u===o.initiative.getCurrentEntry())},[u,h,d,p,m,s,a,r,l,function(){o.initiative.removeEntry(u)},function(){queueMicrotask((()=>{o.refresh()}))},o,f,$,v,g,i,function(){u.initiative=this.value,n(0,u)},function(){u.currentHealth=this.value,n(0,u)},function(){u.maxHealth=this.value,n(0,u)}]}class xs extends o{constructor(e){super(),u(this,e,bs,Es,h,{campaign:11,initiativeEntry:0,showName:1,showHeader:12,showAddButton:2,showRemoveButton:3,showDetails:4,showPopup:13,index:14,firstItem:15})}}function Ts(e,t,n){const s=e.slice();return s[6]=t[n],s[8]=n,s}function Ss(e){let t,n;return t=new xs({props:{campaign:e[0],initiativeEntry:e[6],index:e[8]}}),{c(){N(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,s){D(t,e,s),n=!0},p(e,n){const s={};1&n&&(s.campaign=e[0]),4&n&&(s.initiativeEntry=e[6]),t.$set(s)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){z(t,e)}}}function Ns(e){let t,n,s,a,r,l,i,c,o,u,h,m,T,N,k,P=e[2],D=[];for(let f=0;f<P.length;f+=1)D[f]=Ss(Ts(e,P,f));const z=e=>V(D[e],1,1,(()=>{D[e]=null}));return{c(){t=f("div"),n=f("header"),s=f("section"),a=f("p"),r=d("Rounds"),l=p(),i=f("input"),c=p();for(let e=0;e<D.length;e+=1)D[e].c();o=p(),u=f("button"),h=f("span"),m=d(" Add party to initiative"),this.h()},l(e){t=$(e,"DIV",{class:!0});var f=v(t);n=$(f,"HEADER",{class:!0});var d=v(n);s=$(d,"SECTION",{class:!0});var p=v(s);a=$(p,"P",{class:!0});var w=v(a);r=g(w,"Rounds"),w.forEach(y),l=E(p),i=$(p,"INPUT",{type:!0,min:!0,class:!0}),p.forEach(y),d.forEach(y),c=E(f);for(let t=0;t<D.length;t+=1)D[t].l(f);o=E(f),u=$(f,"BUTTON",{class:!0});var I=v(u);h=$(I,"SPAN",{class:!0}),v(h).forEach(y),m=g(I," Add party to initiative"),I.forEach(y),f.forEach(y),this.h()},h(){w(a,"class","svelte-1g5lxic"),w(i,"type","number"),w(i,"min","1"),w(i,"class","svelte-1g5lxic"),w(s,"class","svelte-1g5lxic"),w(n,"class","svelte-1g5lxic"),w(h,"class","mdi mdi-account-multiple-plus"),w(u,"class","svelte-1g5lxic"),w(t,"class","initiativeManager")},m(f,d){I(f,t,d),b(t,n),b(n,s),b(s,a),b(a,r),b(s,l),b(s,i),A(i,e[1].initiativeRound),b(t,c);for(let e=0;e<D.length;e+=1)D[e].m(t,null);b(t,o),b(t,u),b(u,h),b(u,m),T=!0,N||(k=[x(i,"input",e[5]),x(i,"blur",(function(){ce(e[0].refresh)&&e[0].refresh.apply(this,arguments)})),x(u,"click",e[4])],N=!0)},p(n,[s]){if(e=n,2&s&&ie(i.value)!==e[1].initiativeRound&&A(i,e[1].initiativeRound),5&s){let n;for(P=e[2],n=0;n<P.length;n+=1){const a=Ts(e,P,n);D[n]?(D[n].p(a,s),O(D[n],1)):(D[n]=Ss(a),D[n].c(),O(D[n],1),D[n].m(t,o))}for(H(),n=P.length;n<D.length;n+=1)z(n);B()}},i(e){if(!T){for(let e=0;e<P.length;e+=1)O(D[e]);T=!0}},o(e){D=D.filter(Boolean);for(let t=0;t<D.length;t+=1)V(D[t]);T=!1},d(e){e&&y(t),S(D,e),N=!1,R(k)}}}function ks(e,t,n){let s,a;var{campaign:r}=t;const{campaignStore:l}=r;return ae(e,l,(e=>n(1,a=e))),e.$$set=e=>{"campaign"in e&&n(0,r=e.campaign)},e.$$.update=()=>{3&e.$$.dirty&&n(2,s=r.initiative.getSortedInitiative(a))},[r,a,s,l,function(){r.initiative.addPartyToInitiative()},function(){a.initiativeRound=ie(this.value),l.set(a)}]}class Ps extends o{constructor(e){super(),u(this,e,ks,Ns,h,{campaign:0})}}function Ds(e){let t,n,s,a,r,l,i,c=e[3].name+"";return{c(){t=f("button"),n=f("span"),a=p(),r=d(c),this.h()},l(e){t=$(e,"BUTTON",{class:!0});var s=v(t);n=$(s,"SPAN",{class:!0}),v(n).forEach(y),a=E(s),r=g(s,c),s.forEach(y),this.h()},h(){w(n,"class",s="mdi mdi-"+e[8](e[3])+" svelte-c349z6"),w(t,"class","svelte-c349z6")},m(s,c){I(s,t,c),b(t,n),b(t,a),b(t,r),l||(i=x(t,"click",e[9]),l=!0)},p(e,t){8&t&&s!==(s="mdi mdi-"+e[8](e[3])+" svelte-c349z6")&&w(n,"class",s),8&t&&c!==(c=e[3].name+"")&&T(r,c)},d(e){e&&y(t),l=!1,i()}}}function Os(e){let t,n;return{c(){t=f("span"),n=d(" Initiative"),this.h()},l(e){t=$(e,"SPAN",{class:!0}),v(t).forEach(y),n=g(e," Initiative"),this.h()},h(){w(t,"class","mdi mdi-sword-cross")},m(e,s){I(e,t,s),I(e,n,s)},p:M,d(e){e&&y(t),e&&y(n)}}}function Vs(e){let t,n,s,a,r=e[4].name+"";return{c(){t=f("span"),s=p(),a=d(r),this.h()},l(e){t=$(e,"SPAN",{class:!0}),v(t).forEach(y),s=E(e),a=g(e,r),this.h()},h(){w(t,"class",n="mdi mdi-"+e[8](e[4])+" svelte-c349z6")},m(e,n){I(e,t,n),I(e,s,n),I(e,a,n)},p(e,s){16&s&&n!==(n="mdi mdi-"+e[8](e[4])+" svelte-c349z6")&&w(t,"class",n),16&s&&r!==(r=e[4].name+"")&&T(a,r)},d(e){e&&y(t),e&&y(s),e&&y(a)}}}function zs(e){let t,n,s,a,r,l,i,c=e[5].name+"";return{c(){t=f("button"),n=f("span"),a=p(),r=d(c),this.h()},l(e){t=$(e,"BUTTON",{class:!0});var s=v(t);n=$(s,"SPAN",{class:!0}),v(n).forEach(y),a=E(s),r=g(s,c),s.forEach(y),this.h()},h(){w(n,"class",s="mdi mdi-"+e[8](e[5])+" svelte-c349z6"),w(t,"class","svelte-c349z6")},m(s,c){I(s,t,c),b(t,n),b(t,a),b(t,r),l||(i=x(t,"click",e[10]),l=!0)},p(e,t){32&t&&s!==(s="mdi mdi-"+e[8](e[5])+" svelte-c349z6")&&w(n,"class",s),32&t&&c!==(c=e[5].name+"")&&T(r,c)},d(e){e&&y(t),l=!1,i()}}}function Cs(e){let t,n,s;return n=new Ps({props:{campaign:e[0]}}),{c(){t=f("div"),N(n.$$.fragment),this.h()},l(e){t=$(e,"DIV",{class:!0});var s=v(t);k(n.$$.fragment,s),s.forEach(y),this.h()},h(){w(t,"class","floating svelte-c349z6")},m(e,a){I(e,t,a),D(n,t,null),s=!0},p(e,t){const s={};1&t&&(s.campaign=e[0]),n.$set(s)},i(e){s||(O(n.$$.fragment,e),s=!0)},o(e){V(n.$$.fragment,e),s=!1},d(e){e&&y(t),z(n)}}}function Hs(e){let t,n,s,a,r,l,i,c,o,u,h,d=e[2]&&Ds(e);function g(e,t){return e[2]?Vs:Os}let T=g(e),S=T(e),N=e[2]&&zs(e),k=e[1]&&Cs(e);return{c(){t=f("section"),d&&d.c(),n=p(),s=f("button"),S.c(),r=p(),N&&N.c(),i=p(),k&&k.c(),c=m(),this.h()},l(e){t=$(e,"SECTION",{class:!0});var a=v(t);d&&d.l(a),n=E(a),s=$(a,"BUTTON",{class:!0});var l=v(s);S.l(l),l.forEach(y),r=E(a),N&&N.l(a),a.forEach(y),i=E(e),k&&k.l(e),c=m(),this.h()},h(){w(s,"class",a="current "+(e[1]&&"open")+" svelte-c349z6"),w(t,"class",l="initiativeBar "+(e[2]&&"active")+" svelte-c349z6")},m(a,l){I(a,t,l),d&&d.m(t,null),b(t,n),b(t,s),S.m(s,null),b(t,r),N&&N.m(t,null),I(a,i,l),k&&k.m(a,l),I(a,c,l),o=!0,u||(h=x(s,"click",e[7]),u=!0)},p(e,[r]){e[2]?d?d.p(e,r):(d=Ds(e),d.c(),d.m(t,n)):d&&(d.d(1),d=null),T===(T=g(e))&&S?S.p(e,r):(S.d(1),S=T(e),S&&(S.c(),S.m(s,null))),(!o||2&r&&a!==(a="current "+(e[1]&&"open")+" svelte-c349z6"))&&w(s,"class",a),e[2]?N?N.p(e,r):(N=zs(e),N.c(),N.m(t,null)):N&&(N.d(1),N=null),(!o||4&r&&l!==(l="initiativeBar "+(e[2]&&"active")+" svelte-c349z6"))&&w(t,"class",l),e[1]?k?(k.p(e,r),2&r&&O(k,1)):(k=Cs(e),k.c(),O(k,1),k.m(c.parentNode,c)):k&&(H(),V(k,1,1,(()=>{k=null})),B())},i(e){o||(O(k),o=!0)},o(e){V(k),o=!1},d(e){e&&y(t),d&&d.d(),S.d(),N&&N.d(),e&&y(i),k&&k.d(e),e&&y(c),u=!1,h()}}}function Bs(e,t,n){let s,a,r,l,i;var{campaign:c}=t;const{campaignStore:o}=c;ae(e,o,(e=>n(11,i=e)));var u=!1;return e.$$set=e=>{"campaign"in e&&n(0,c=e.campaign)},e.$$.update=()=>{2049&e.$$.dirty&&n(2,s=c.initiative.getCombatStarted(i)),2049&e.$$.dirty&&n(3,[a,r,l]=c.initiative.getInitiativeOverview(i),a,(n(4,r),n(0,c),n(11,i)),(n(5,l),n(0,c),n(11,i)))},[c,u,s,a,r,l,o,function(){n(1,u=!u)},function(e){return e&&"monster"===e.type?"sword-cross":"account"},function(){c.initiative.previousInitiative()},function(){c.initiative.nextInitiative()},i]}class As extends o{constructor(e){super(),u(this,e,Bs,Hs,h,{campaign:0})}}function Ms(e){let t,n,s,a,r=e[2]&&Rs(),l=e[3]&&js(),i=e[4]&&Us(),c=e[5]&&_s();return{c(){t=f("div"),r&&r.c(),n=p(),l&&l.c(),s=p(),i&&i.c(),a=p(),c&&c.c(),this.h()},l(e){t=$(e,"DIV",{class:!0});var o=v(t);r&&r.l(o),n=E(o),l&&l.l(o),s=E(o),i&&i.l(o),a=E(o),c&&c.l(o),o.forEach(y),this.h()},h(){w(t,"class","itemsHeader svelte-t5r5z0")},m(e,o){I(e,t,o),r&&r.m(t,null),b(t,n),l&&l.m(t,null),b(t,s),i&&i.m(t,null),b(t,a),c&&c.m(t,null)},p(e,o){e[2]?r||(r=Rs(),r.c(),r.m(t,n)):r&&(r.d(1),r=null),e[3]?l||(l=js(),l.c(),l.m(t,s)):l&&(l.d(1),l=null),e[4]?i||(i=Us(),i.c(),i.m(t,a)):i&&(i.d(1),i=null),e[5]?c||(c=_s(),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},d(e){e&&y(t),r&&r.d(),l&&l.d(),i&&i.d(),c&&c.d()}}}function Rs(e){let t,n;return{c(){t=f("div"),n=d("Feature"),this.h()},l(e){t=$(e,"DIV",{class:!0});var s=v(t);n=g(s,"Feature"),s.forEach(y),this.h()},h(){w(t,"class","nameWrapper")},m(e,s){I(e,t,s),b(t,n)},d(e){e&&y(t)}}}function js(e){let t;return{c(){t=f("div"),this.h()},l(e){t=$(e,"DIV",{class:!0}),v(t).forEach(y),this.h()},h(){w(t,"class","wrapper centerText svelte-t5r5z0")},m(e,n){I(e,t,n)},d(e){e&&y(t)}}}function Us(e){let t;return{c(){t=f("div"),this.h()},l(e){t=$(e,"DIV",{class:!0}),v(t).forEach(y),this.h()},h(){w(t,"class","wrapper centerText svelte-t5r5z0")},m(e,n){I(e,t,n)},d(e){e&&y(t)}}}function _s(e){let t;return{c(){t=f("div"),this.h()},l(e){t=$(e,"DIV",{class:!0}),v(t).forEach(y),this.h()},h(){w(t,"class","wrapper dropdownIndicatorWrapper")},m(e,n){I(e,t,n)},d(e){e&&y(t)}}}function Ls(e){let t,n,s,a,r,l,i,c,o,u,h,m,S=e[0].name+"";return{c(){t=f("div"),n=f("div"),s=f("p"),a=f("span"),l=p(),i=d(S),c=p(),o=f("p"),u=d(e[9]),this.h()},l(r){t=$(r,"DIV",{class:!0});var h=v(t);n=$(h,"DIV",{class:!0});var f=v(n);s=$(f,"P",{class:!0});var d=v(s);a=$(d,"SPAN",{class:!0}),v(a).forEach(y),l=E(d),i=g(d,S),d.forEach(y),c=E(f),o=$(f,"P",{class:!0});var p=v(o);u=g(p,e[9]),p.forEach(y),f.forEach(y),h.forEach(y),this.h()},h(){w(a,"class",r="mdi mdi-"+e[10]+" svelte-t5r5z0"),w(s,"class","spellName svelte-t5r5z0"),w(o,"class","spellDescription svelte-t5r5z0"),w(n,"class","overflowWrapper"),w(t,"class","nameWrapper svelte-t5r5z0")},m(r,f){I(r,t,f),b(t,n),b(n,s),b(s,a),b(s,l),b(s,i),b(n,c),b(n,o),b(o,u),h||(m=x(t,"click",e[12]),h=!0)},p(e,t){1024&t&&r!==(r="mdi mdi-"+e[10]+" svelte-t5r5z0")&&w(a,"class",r),1&t&&S!==(S=e[0].name+"")&&T(i,S),512&t&&T(u,e[9])},d(e){e&&y(t),h=!1,m()}}}function qs(e){let t,n,s,a,r,l,i,c=e[11]&&Xs(e),o="monster"===e[0].dataType&&Fs(e);return{c(){t=f("div"),n=f("button"),s=f("span"),a=p(),c&&c.c(),r=p(),o&&o.c(),this.h()},l(e){t=$(e,"DIV",{class:!0});var l=v(t);n=$(l,"BUTTON",{class:!0});var i=v(n);s=$(i,"SPAN",{class:!0}),v(s).forEach(y),i.forEach(y),a=E(l),c&&c.l(l),r=E(l),o&&o.l(l),l.forEach(y),this.h()},h(){w(s,"class","mdi mdi-pin-outline svelte-t5r5z0"),w(n,"class","svelte-t5r5z0"),w(t,"class","buttonWrapper svelte-t5r5z0")},m(u,h){I(u,t,h),b(t,n),b(n,s),b(t,a),c&&c.m(t,null),b(t,r),o&&o.m(t,null),l||(i=x(n,"click",e[15]),l=!0)},p(e,n){e[11]?c?c.p(e,n):(c=Xs(e),c.c(),c.m(t,r)):c&&(c.d(1),c=null),"monster"===e[0].dataType?o?o.p(e,n):(o=Fs(e),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},d(e){e&&y(t),c&&c.d(),o&&o.d(),l=!1,i()}}}function Xs(e){let t,n,s,a;return{c(){t=f("button"),n=f("span"),this.h()},l(e){t=$(e,"BUTTON",{class:!0});var s=v(t);n=$(s,"SPAN",{class:!0}),v(n).forEach(y),s.forEach(y),this.h()},h(){w(n,"class","mdi mdi-book-open-page-variant svelte-t5r5z0"),w(t,"class","svelte-t5r5z0")},m(r,l){I(r,t,l),b(t,n),s||(a=x(t,"click",e[13]),s=!0)},p:M,d(e){e&&y(t),s=!1,a()}}}function Fs(e){let t,n,s,a;return{c(){t=f("button"),n=f("span"),this.h()},l(e){t=$(e,"BUTTON",{class:!0});var s=v(t);n=$(s,"SPAN",{class:!0}),v(n).forEach(y),s.forEach(y),this.h()},h(){w(n,"class","mdi mdi-sword svelte-t5r5z0"),w(t,"class","svelte-t5r5z0")},m(r,l){I(r,t,l),b(t,n),s||(a=x(t,"click",e[14]),s=!0)},p:M,d(e){e&&y(t),s=!1,a()}}}function Ws(e){let t,n,s,a,r,l,i,c=e[8]&&Ms(e),o=e[2]&&Ls(e),u=e[7]&&qs(e);function h(t){e[19](t)}let d={entry:e[0],campaign:e[1]};return void 0!==e[6]&&(d.open=e[6]),r=new Ae({props:d}),C.push((()=>U(r,"open",h))),{c(){c&&c.c(),t=p(),n=f("div"),o&&o.c(),s=p(),u&&u.c(),a=p(),N(r.$$.fragment),this.h()},l(e){c&&c.l(e),t=E(e),n=$(e,"DIV",{class:!0});var l=v(n);o&&o.l(l),s=E(l),u&&u.l(l),l.forEach(y),a=E(e),k(r.$$.fragment,e),this.h()},h(){w(n,"class","searchResult svelte-t5r5z0")},m(e,l){c&&c.m(e,l),I(e,t,l),I(e,n,l),o&&o.m(n,null),b(n,s),u&&u.m(n,null),I(e,a,l),D(r,e,l),i=!0},p(e,[a]){e[8]?c?c.p(e,a):(c=Ms(e),c.c(),c.m(t.parentNode,t)):c&&(c.d(1),c=null),e[2]?o?o.p(e,a):(o=Ls(e),o.c(),o.m(n,s)):o&&(o.d(1),o=null),e[7]?u?u.p(e,a):(u=qs(e),u.c(),u.m(n,null)):u&&(u.d(1),u=null);const i={};1&a&&(i.entry=e[0]),2&a&&(i.campaign=e[1]),!l&&64&a&&(l=!0,i.open=e[6],_((()=>l=!1))),r.$set(i)},i(e){i||(O(r.$$.fragment,e),i=!0)},o(e){V(r.$$.fragment,e),i=!1},d(e){c&&c.d(e),e&&y(t),e&&y(n),o&&o.d(),u&&u.d(),e&&y(a),z(r,e)}}}function Gs(e,t,n){let s,a,r,l,i;var{entry:c}=t,{campaign:o=j("campaign")}=t,{showName:u=!0}=t,{showHeader:h=!1}=t,{showAddButton:f=!1}=t,{showRemoveButton:d=!1}=t,{showDetails:p=!1}=t,{index:m=null}=t,{firstItem:$=!1}=t,v=!1,g={class:"bag-personal",spell:"auto-fix",monster:"sword-cross",item:"treasure-chest",race:"account",condition:"chart-bubble",language:"translate",background:"bookshelf"};return e.$$set=e=>{"entry"in e&&n(0,c=e.entry),"campaign"in e&&n(1,o=e.campaign),"showName"in e&&n(2,u=e.showName),"showHeader"in e&&n(16,h=e.showHeader),"showAddButton"in e&&n(3,f=e.showAddButton),"showRemoveButton"in e&&n(4,d=e.showRemoveButton),"showDetails"in e&&n(5,p=e.showDetails),"index"in e&&n(17,m=e.index),"firstItem"in e&&n(18,$=e.firstItem)},e.$$.update=()=>{var t;2&e.$$.dirty&&n(7,s=!!o),458752&e.$$.dirty&&n(8,a=h&&(0===m||$)),1&e.$$.dirty&&n(9,r=c.getDescription(c)),1&e.$$.dirty&&n(10,(t=c.dataType,l=g[t])),1&e.$$.dirty&&n(11,i=void 0!==c.source&&void 0!==Pe[c.source.toLowerCase()]),64&e.$$.dirty&&console.log({popupOpen:v})},[c,o,u,f,d,p,v,s,a,r,l,i,function(){n(6,v=!0),console.log(v)},function(){o.mainManager.showSourcePage(c.source,c.page)},function(){o.initiative.addMonster(c)},function(){o.screens.addItemToCurrentScreen(c.name,"hashRef",c.hash)},h,m,$,function(e){n(6,v=e)}]}class Ks extends o{constructor(e){super(),u(this,e,Gs,Ws,h,{entry:0,campaign:1,showName:2,showHeader:16,showAddButton:3,showRemoveButton:4,showDetails:5,index:17,firstItem:18})}}function Ys(e,t,n){const s=e.slice();return s[10]=t[n],s}function Js(e){let t,n,s,a;const r=[Zs,Qs],l=[];function i(e,t){return e[5]?0:1}return n=i(e),s=l[n]=r[n](e),{c(){t=f("div"),s.c(),this.h()},l(e){t=$(e,"DIV",{class:!0});var n=v(t);s.l(n),n.forEach(y),this.h()},h(){w(t,"class","results svelte-56b6y6")},m(e,s){I(e,t,s),l[n].m(t,null),a=!0},p(e,a){let c=n;n=i(e),n===c?l[n].p(e,a):(H(),V(l[c],1,1,(()=>{l[c]=null})),B(),s=l[n],s?s.p(e,a):(s=l[n]=r[n](e),s.c()),O(s,1),s.m(t,null))},i(e){a||(O(s),a=!0)},o(e){V(s),a=!1},d(e){e&&y(t),l[n].d()}}}function Qs(e){let t,n;return{c(){t=f("p"),n=d("No results")},l(e){t=$(e,"P",{});var s=v(t);n=g(s,"No results"),s.forEach(y)},m(e,s){I(e,t,s),b(t,n)},p:M,i:M,o:M,d(e){e&&y(t)}}}function Zs(e){let t,n,s=e[2],a=[];for(let l=0;l<s.length;l+=1)a[l]=ea(Ys(e,s,l));const r=e=>V(a[e],1,1,(()=>{a[e]=null}));return{c(){for(let e=0;e<a.length;e+=1)a[e].c();t=m()},l(e){for(let t=0;t<a.length;t+=1)a[t].l(e);t=m()},m(e,s){for(let t=0;t<a.length;t+=1)a[t].m(e,s);I(e,t,s),n=!0},p(e,n){if(5&n){let l;for(s=e[2],l=0;l<s.length;l+=1){const r=Ys(e,s,l);a[l]?(a[l].p(r,n),O(a[l],1)):(a[l]=ea(r),a[l].c(),O(a[l],1),a[l].m(t.parentNode,t))}for(H(),l=s.length;l<a.length;l+=1)r(l);B()}},i(e){if(!n){for(let e=0;e<s.length;e+=1)O(a[e]);n=!0}},o(e){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)V(a[t]);n=!1},d(e){S(a,e),e&&y(t)}}}function ea(e){let t,n;return t=new Ks({props:{entry:e[10],campaign:e[0]}}),{c(){N(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,s){D(t,e,s),n=!0},p(e,n){const s={};4&n&&(s.entry=e[10]),1&n&&(s.campaign=e[0]),t.$set(s)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){z(t,e)}}}function ta(e){let t,n,s,a,r,l,i=!e[4]&&e[3]&&Js(e);return{c(){t=f("section"),n=f("input"),s=p(),i&&i.c(),this.h()},l(e){t=$(e,"SECTION",{class:!0});var a=v(t);n=$(a,"INPUT",{class:!0,placeholder:!0}),s=E(a),i&&i.l(a),a.forEach(y),this.h()},h(){w(n,"class","searchBar svelte-56b6y6"),w(n,"placeholder","Search"),w(t,"class","svelte-56b6y6")},m(c,o){I(c,t,o),b(t,n),A(n,e[1]),b(t,s),i&&i.m(t,null),a=!0,r||(l=[x(n,"input",e[8]),x(n,"focus",e[7]),re(ye.call(null,t,e[6]))],r=!0)},p(e,[s]){2&s&&n.value!==e[1]&&A(n,e[1]),!e[4]&&e[3]?i?(i.p(e,s),24&s&&O(i,1)):(i=Js(e),i.c(),O(i,1),i.m(t,null)):i&&(H(),V(i,1,1,(()=>{i=null})),B())},i(e){a||(O(i),a=!0)},o(e){V(i),a=!1},d(e){e&&y(t),i&&i.d(),r=!1,R(l)}}}function na(e,t,n){let s,a,r;var{campaign:l}=t,i=!1;var c="",o=Object.values(De);return e.$$set=e=>{"campaign"in e&&n(0,l=e.campaign)},e.$$.update=()=>{2&e.$$.dirty&&n(4,s=""===c),2&e.$$.dirty&&n(2,r=Me(o,c).filter((e=>e.score>0)).sort(((e,t)=>t.score-e.score)).slice(0,15).reverse()),4&e.$$.dirty&&n(5,a=0!==r.length),4&e.$$.dirty&&console.log(r)},[l,c,r,i,s,a,function(){n(3,i=!1)},function(){n(3,i=!0)},function(){c=this.value,n(1,c)}]}class sa extends o{constructor(e){super(),u(this,e,na,ta,h,{campaign:0})}}function aa(e){let t,n,s,a;return{c(){t=f("button"),n=f("span"),this.h()},l(e){t=$(e,"BUTTON",{class:!0});var s=v(t);n=$(s,"SPAN",{class:!0}),v(n).forEach(y),s.forEach(y),this.h()},h(){w(n,"class","mdi mdi-note-outline svelte-dzovid"),w(t,"class","svelte-dzovid")},m(r,l){I(r,t,l),b(t,n),s||(a=x(t,"click",e[0]),s=!0)},p:M,i:M,o:M,d(e){e&&y(t),s=!1,a()}}}function ra(e,t,n){var{campaign:s=j("campaign")}=t;return e.$$set=e=>{"campaign"in e&&n(1,s=e.campaign)},[function(){s.screens.addItemToCurrentScreen("New note","note",{content:""})},s]}class la extends o{constructor(e){super(),u(this,e,ra,aa,h,{campaign:1})}}function ia(e){let t,n,s,a,r,l,i,c,o,u,h,d,m,g,x,T,S,P,C;n=new He({props:{store:e[0].campaignStore}});var A=e[3];function M(e){return{props:{campaign:e[0]}}}return A&&(r=new A(M(e))),c=new Kn({props:{campaign:e[0]}}),u=new ns({}),d=new As({props:{campaign:e[0]}}),g=new hs({props:{campaign:e[0]}}),T=new sa({props:{campaign:e[0]}}),P=new la({}),{c(){t=f("main"),N(n.$$.fragment),s=p(),a=f("section"),r&&N(r.$$.fragment),l=p(),i=f("nav"),N(c.$$.fragment),o=p(),N(u.$$.fragment),h=p(),N(d.$$.fragment),m=p(),N(g.$$.fragment),x=p(),N(T.$$.fragment),S=p(),N(P.$$.fragment),this.h()},l(e){t=$(e,"MAIN",{class:!0});var f=v(t);k(n.$$.fragment,f),s=E(f),a=$(f,"SECTION",{class:!0});var p=v(a);r&&k(r.$$.fragment,p),p.forEach(y),l=E(f),i=$(f,"NAV",{class:!0});var w=v(i);k(c.$$.fragment,w),o=E(w),k(u.$$.fragment,w),h=E(w),k(d.$$.fragment,w),m=E(w),k(g.$$.fragment,w),x=E(w),k(T.$$.fragment,w),S=E(w),k(P.$$.fragment,w),w.forEach(y),f.forEach(y),this.h()},h(){w(a,"class","mainArea svelte-wmyv5q"),w(i,"class","toolBar svelte-wmyv5q"),w(t,"class","svelte-wmyv5q")},m(e,f){I(e,t,f),D(n,t,null),b(t,s),b(t,a),r&&D(r,a,null),b(t,l),b(t,i),D(c,i,null),b(i,o),D(u,i,null),b(i,h),D(d,i,null),b(i,m),D(g,i,null),b(i,x),D(T,i,null),b(i,S),D(P,i,null),C=!0},p(e,t){const s={};1&t&&(s.store=e[0].campaignStore),n.$set(s);const l={};if(1&t&&(l.campaign=e[0]),A!==(A=e[3])){if(r){H();const e=r;V(e.$$.fragment,1,0,(()=>{z(e,1)})),B()}A?(r=new A(M(e)),N(r.$$.fragment),O(r.$$.fragment,1),D(r,a,null)):r=null}else A&&r.$set(l);const i={};1&t&&(i.campaign=e[0]),c.$set(i);const o={};1&t&&(o.campaign=e[0]),d.$set(o);const u={};1&t&&(u.campaign=e[0]),g.$set(u);const h={};1&t&&(h.campaign=e[0]),T.$set(h)},i(e){C||(O(n.$$.fragment,e),r&&O(r.$$.fragment,e),O(c.$$.fragment,e),O(u.$$.fragment,e),O(d.$$.fragment,e),O(g.$$.fragment,e),O(T.$$.fragment,e),O(P.$$.fragment,e),C=!0)},o(e){V(n.$$.fragment,e),r&&V(r.$$.fragment,e),V(c.$$.fragment,e),V(u.$$.fragment,e),V(d.$$.fragment,e),V(g.$$.fragment,e),V(T.$$.fragment,e),V(P.$$.fragment,e),C=!1},d(e){e&&y(t),z(n),r&&z(r),z(c),z(u),z(d),z(g),z(T),z(P)}}}function ca(e){let t,n,s,a,r,l;function i(t){e[7](t)}let c={datasetHash:e[2],$$slots:{default:[ia]},$$scope:{ctx:e}};return void 0!==e[4].dataset&&(c.changeDataset=e[4].dataset),t=new Ce({props:c}),C.push((()=>U(t,"changeDataset",i))),{c(){N(t.$$.fragment),s=p()},l(e){k(t.$$.fragment,e),s=E(e)},m(e,n){D(t,e,n),I(e,s,n),a=!0,r||(l=x(document.body,"keydown",oa),r=!0)},p(e,[s]){const a={};4&s&&(a.datasetHash=e[2]),521&s&&(a.$$scope={dirty:s,ctx:e}),!n&&16&s&&(n=!0,a.changeDataset=e[4].dataset,_((()=>n=!1))),t.$set(a)},i(e){a||(O(t.$$.fragment,e),a=!0)},o(e){V(t.$$.fragment,e),a=!1},d(e){z(t,e),e&&y(s),r=!1,l()}}}function oa(e){if(e.ctrlKey){var{code:t}=e;const n={KeyU:()=>playStoredPlaylist("peaceful"),KeyI:()=>playStoredPlaylist("inn"),KeyO:()=>playStoredPlaylist("combat"),Backslash:()=>manualStopPlaylist()};n[t]&&(e.preventDefault(),n[t]())}}function ua(e,t,n){let s,a,r,l,i,c,o=M,u=M;e.$$.on_destroy.push((()=>o())),e.$$.on_destroy.push((()=>u()));var{params:h}=t;return e.$$set=e=>{"params"in e&&n(5,h=e.params)},e.$$.update=()=>{32&e.$$.dirty&&(n(0,s=Ln(h.campaignId)),o(),o=q(s,(e=>n(6,i=e)))),64&e.$$.dirty&&(n(1,a=i.campaignStore),u(),u=q(a,(e=>n(4,c=e)))),64&e.$$.dirty&&n(2,r=i.campaignStore.get().dataset),64&e.$$.dirty&&n(3,l=i.mainManager.get().component),1&e.$$.dirty&&(window.campaign=s),1&e.$$.dirty&&J("campaign",s)},[s,a,r,l,c,h,i,function(t){e.$$.not_equal(c.dataset,t)&&(c.dataset=t,a.set(c))}]}export default class extends o{constructor(e){super(),u(this,e,ua,ca,h,{params:5})}}
