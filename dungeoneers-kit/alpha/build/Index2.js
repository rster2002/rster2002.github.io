import{S as t,i as e,s,a4 as a,e as n,f as r,g as l,h as o,d as c,j as i,k as h,a9 as u,a as f,l as d,u as v,a5 as m,H as p,I as $,Q as g,U as E,R as b,t as y,c as w,n as k,b as x,a3 as I,L as T,M as N,N as S,O as D,C as V,G as O,W as C,J as _,a2 as P,_ as A,Y as U,a1 as H,v as j,a6 as B,$ as L,a8 as G,V as M}from"./vendor.js";import{n as q,g as K,C as R}from"./Container.js";import{s as Y,D as J}from"./searchResultScores.js";import{s as W,G as z,r as F,H as Q,J as X,a as Z,e as tt,K as et,L as st}from"./index.js";import{E as at}from"./SpellPopup.js";import{G as nt,C as rt,A as lt}from"./GenericTable.js";function ot(t){let e,s,g,E,b,y,w,k;const x=t[6].default,I=a(x,t,t[5],null);return{c(){e=n("button"),s=n("span"),E=r(),I&&I.c(),this.h()},l(t){e=l(t,"BUTTON",{class:!0});var a=o(e);s=l(a,"SPAN",{class:!0}),o(s).forEach(c),E=i(a),I&&I.l(a),a.forEach(c),this.h()},h(){h(s,"class",g="mdi mdi-"+t[0]),h(e,"class",b=u(t[1]&&"isCurrentPath")+" svelte-h3b5a6")},m(a,n){f(a,e,n),d(e,s),d(e,E),I&&I.m(e,null),y=!0,w||(k=v(e,"click",t[2]),w=!0)},p(t,[a]){(!y||1&a&&g!==(g="mdi mdi-"+t[0]))&&h(s,"class",g),I&&I.p&&(!y||32&a)&&m(I,x,t,t[5],a,null,null),(!y||2&a&&b!==(b=u(t[1]&&"isCurrentPath")+" svelte-h3b5a6"))&&h(e,"class",b)},i(t){y||(p(I,t),y=!0)},o(t){$(I,t),y=!1},d(t){t&&c(e),I&&I.d(t),w=!1,k()}}}function ct(t,e,s){let a,n;g(t,E,(t=>s(4,n=t)));let{$$slots:r={},$$scope:l}=e;var{icon:o}=e,{path:c}=e;return t.$$set=t=>{"icon"in t&&s(0,o=t.icon),"path"in t&&s(3,c=t.path),"$$scope"in t&&s(5,l=t.$$scope)},t.$$.update=()=>{24&t.$$.dirty&&s(1,a=c===n)},[o,a,function(){b(c)},c,n,l,r]}class it extends t{constructor(t){super(),e(this,t,ct,ot,s,{icon:0,path:3})}}function ht(t){let e,s;return{c(){e=n("p"),s=y("This tool allows you to view your own JSON formatted 5e content and use it\n                in characters or campaigns. Go to settings to import your datasets.")},l(t){e=l(t,"P",{});var a=o(e);s=w(a,"This tool allows you to view your own JSON formatted 5e content and use it\n                in characters or campaigns. Go to settings to import your datasets."),a.forEach(c)},m(t,a){f(t,e,a),d(e,s)},d(t){t&&c(e)}}}function ut(t){let e,s,a,u,v,m,p,$;return{c(){e=n("p"),s=y("You are currently running a "),a=n("span"),u=y("beta"),v=y(" version\n                of Dungeoneer's Kit. This is a preview of candidates for full releases,\n                but may still contain bugs. Saved data is however updated between versions\n                unlike the alpha version."),m=r(),p=n("p"),$=y("Saved data is stored separately from other versions, so your data on the\n                stable version of the tool won't be effected by this version."),this.h()},l(t){e=l(t,"P",{});var n=o(e);s=w(n,"You are currently running a "),a=l(n,"SPAN",{class:!0});var r=o(a);u=w(r,"beta"),r.forEach(c),v=w(n," version\n                of Dungeoneer's Kit. This is a preview of candidates for full releases,\n                but may still contain bugs. Saved data is however updated between versions\n                unlike the alpha version."),n.forEach(c),m=i(t),p=l(t,"P",{});var h=o(p);$=w(h,"Saved data is stored separately from other versions, so your data on the\n                stable version of the tool won't be effected by this version."),h.forEach(c),this.h()},h(){h(a,"class","beta svelte-15if7qd")},m(t,n){f(t,e,n),d(e,s),d(e,a),d(a,u),d(e,v),f(t,m,n),f(t,p,n),d(p,$)},d(t){t&&c(e),t&&c(m),t&&c(p)}}}function ft(t){let e,s,a,u,v,m,p,$;return{c(){e=n("p"),s=y("You are currently running an "),a=n("span"),u=y("alpha"),v=y(" version\n                of Dungeoneer's Kit. This means that that there are no guarentees.\n                Alpha often contains incomplete features and even work in progress\n                code which makes it very risky to use this tool right now. Saved\n                data is also not updated from one version to another."),m=r(),p=n("p"),$=y("Saved data is stored separately from other versions, so your data on the\n                stable version of the tool won't be effected by this version."),this.h()},l(t){e=l(t,"P",{});var n=o(e);s=w(n,"You are currently running an "),a=l(n,"SPAN",{class:!0});var r=o(a);u=w(r,"alpha"),r.forEach(c),v=w(n," version\n                of Dungeoneer's Kit. This means that that there are no guarentees.\n                Alpha often contains incomplete features and even work in progress\n                code which makes it very risky to use this tool right now. Saved\n                data is also not updated from one version to another."),n.forEach(c),m=i(t),p=l(t,"P",{});var h=o(p);$=w(h,"Saved data is stored separately from other versions, so your data on the\n                stable version of the tool won't be effected by this version."),h.forEach(c),this.h()},h(){h(a,"class","alpha svelte-15if7qd")},m(t,n){f(t,e,n),d(e,s),d(e,a),d(a,u),d(e,v),f(t,m,n),f(t,p,n),d(p,$)},d(t){t&&c(e),t&&c(m),t&&c(p)}}}function dt(t){let e,s,a,u,v;var m;let p=("alpha"===(m=t)[0]?ft:"beta"===m[0]?ut:ht)(t);return{c(){e=n("section"),s=n("div"),a=n("h1"),u=y("Welcome"),v=r(),p.c(),this.h()},l(t){e=l(t,"SECTION",{class:!0});var n=o(e);s=l(n,"DIV",{class:!0});var r=o(s);a=l(r,"H1",{class:!0});var h=o(a);u=w(h,"Welcome"),h.forEach(c),v=i(r),p.l(r),r.forEach(c),n.forEach(c),this.h()},h(){h(a,"class","svelte-15if7qd"),h(s,"class","box svelte-15if7qd"),h(e,"class","svelte-15if7qd")},m(t,n){f(t,e,n),d(e,s),d(s,a),d(a,u),d(s,v),p.m(s,null)},p:k,i:k,o:k,d(t){t&&c(e),p.d()}}}function vt(t){return["alpha"]}class mt extends t{constructor(t){super(),e(this,t,vt,dt,s,{})}}function pt(t){let e,s,a,u,m,p,$,g,E,b,I,T,N;return{c(){e=n("div"),s=n("div"),a=n("h1"),u=y(t[1]),m=r(),p=n("h2"),$=y(t[2]),g=r(),E=n("div"),b=n("button"),I=y("View"),this.h()},l(n){e=l(n,"DIV",{class:!0});var r=o(e);s=l(r,"DIV",{class:!0});var h=o(s);a=l(h,"H1",{class:!0});var f=o(a);u=w(f,t[1]),f.forEach(c),m=i(h),p=l(h,"H2",{class:!0});var d=o(p);$=w(d,t[2]),d.forEach(c),h.forEach(c),g=i(r),E=l(r,"DIV",{class:!0});var v=o(E);b=l(v,"BUTTON",{class:!0});var y=o(b);I=w(y,"View"),y.forEach(c),v.forEach(c),r.forEach(c),this.h()},h(){h(a,"class","svelte-11ld9un"),h(p,"class","svelte-11ld9un"),h(s,"class","text"),h(b,"class","svelte-11ld9un"),h(E,"class","buttons"),h(e,"class","characterGridItem svelte-11ld9un")},m(n,r){f(n,e,r),d(e,s),d(s,a),d(a,u),d(s,m),d(s,p),d(p,$),d(e,g),d(e,E),d(E,b),d(b,I),T||(N=v(b,"click",t[3]),T=!0)},p(t,[e]){2&e&&x(u,t[1]),4&e&&x($,t[2])},i:k,o:k,d(t){t&&c(e),T=!1,N()}}}function $t(t,e,s){let a,n,r,l=k,o=()=>(l(),l=I(c,(t=>s(4,r=t))),c);t.$$.on_destroy.push((()=>l()));var{character:c}=e;return o(),t.$$set=t=>{"character"in t&&o(s(0,c=t.character))},t.$$.update=()=>{16&t.$$.dirty&&s(1,a=r.getName()),16&t.$$.dirty&&s(2,n=r.getDescription())},[c,a,n,function(){location.href="#/character/"+c.getId()},r]}class gt extends t{constructor(t){super(),e(this,t,$t,pt,s,{character:0})}}function Et(t,e,s){const a=t.slice();return a[1]=e[s],a}function bt(t){let e,s;return e=new gt({props:{character:t[1]}}),{c(){T(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,a){S(e,t,a),s=!0},p(t,s){const a={};1&s&&(a.character=t[1]),e.$set(a)},i(t){s||(p(e.$$.fragment,t),s=!0)},o(t){$(e.$$.fragment,t),s=!1},d(t){D(e,t)}}}function yt(t){let e,s,a,u,m,g,E,b=t[0],k=[];for(let n=0;n<b.length;n+=1)k[n]=bt(Et(t,b,n));const x=t=>$(k[t],1,1,(()=>{k[t]=null}));return{c(){e=n("section");for(let t=0;t<k.length;t+=1)k[t].c();s=r(),a=n("button"),u=y("New character"),this.h()},l(t){e=l(t,"SECTION",{class:!0});var n=o(e);for(let e=0;e<k.length;e+=1)k[e].l(n);s=i(n),a=l(n,"BUTTON",{class:!0});var r=o(a);u=w(r,"New character"),r.forEach(c),n.forEach(c),this.h()},h(){h(a,"class","svelte-27i550"),h(e,"class","characters svelte-27i550")},m(t,n){f(t,e,n);for(let s=0;s<k.length;s+=1)k[s].m(e,null);d(e,s),d(e,a),d(a,u),m=!0,g||(E=v(a,"click",q),g=!0)},p(t,[a]){if(1&a){let n;for(b=t[0],n=0;n<b.length;n+=1){const r=Et(t,b,n);k[n]?(k[n].p(r,a),p(k[n],1)):(k[n]=bt(r),k[n].c(),p(k[n],1),k[n].m(e,s))}for(V(),n=b.length;n<k.length;n+=1)x(n);O()}},i(t){if(!m){for(let t=0;t<b.length;t+=1)p(k[t]);m=!0}},o(t){k=k.filter(Boolean);for(let e=0;e<k.length;e+=1)$(k[e]);m=!1},d(t){t&&c(e),C(k,t),g=!1,E()}}}function wt(t,e,s){let a;return s(0,a=K()),[a]}class kt extends t{constructor(t){super(),e(this,t,wt,yt,s,{})}}function xt(t,e,s){const a=t.slice();return a[10]=e[s],a}function It(t){let e,s=t[1],a=[];for(let n=0;n<s.length;n+=1)a[n]=Tt(xt(t,s,n));return{c(){for(let t=0;t<a.length;t+=1)a[t].c();e=_()},l(t){for(let e=0;e<a.length;e+=1)a[e].l(t);e=_()},m(t,s){for(let e=0;e<a.length;e+=1)a[e].m(t,s);f(t,e,s)},p(t,n){if(34&n){let r;for(s=t[1],r=0;r<s.length;r+=1){const l=xt(t,s,r);a[r]?a[r].p(l,n):(a[r]=Tt(l),a[r].c(),a[r].m(e.parentNode,e))}for(;r<a.length;r+=1)a[r].d(1);a.length=s.length}},d(t){C(a,t),t&&c(e)}}}function Tt(t){let e,s,a,u,m,p,$,g,E,b,k,I,T,N,S=t[10].name+"",D=t[10].getDescription()+"";function V(){return t[7](t[10])}return{c(){e=n("div"),s=n("div"),a=n("h1"),u=y(S),m=r(),p=n("h2"),$=y(D),g=r(),E=n("div"),b=n("button"),k=y("View"),I=r(),this.h()},l(t){e=l(t,"DIV",{class:!0});var n=o(e);s=l(n,"DIV",{class:!0});var r=o(s);a=l(r,"H1",{class:!0});var h=o(a);u=w(h,S),h.forEach(c),m=i(r),p=l(r,"H2",{class:!0});var f=o(p);$=w(f,D),f.forEach(c),r.forEach(c),g=i(n),E=l(n,"DIV",{class:!0});var d=o(E);b=l(d,"BUTTON",{class:!0});var v=o(b);k=w(v,"View"),v.forEach(c),d.forEach(c),I=i(n),n.forEach(c),this.h()},h(){h(a,"class","svelte-avufu3"),h(p,"class","svelte-avufu3"),h(s,"class","text"),h(b,"class","svelte-avufu3"),h(E,"class","buttons"),h(e,"class","result svelte-avufu3")},m(t,n){f(t,e,n),d(e,s),d(s,a),d(a,u),d(s,m),d(s,p),d(p,$),d(e,g),d(e,E),d(E,b),d(b,k),d(e,I),T||(N=v(b,"click",V),T=!0)},p(e,s){t=e,2&s&&S!==(S=t[10].name+"")&&x(u,S),2&s&&D!==(D=t[10].getDescription()+"")&&x($,D)},d(t){t&&c(e),T=!1,N()}}}function Nt(t){let e,s,a;function n(e){t[8](e)}let r={entry:t[2]};return void 0!==t[3]&&(r.open=t[3]),e=new J({props:r}),U.push((()=>H(e,"open",n))),{c(){T(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,s){S(e,t,s),a=!0},p(t,a){const n={};4&a&&(n.entry=t[2]),!s&&8&a&&(s=!0,n.open=t[3],P((()=>s=!1))),e.$set(n)},i(t){a||(p(e.$$.fragment,t),a=!0)},o(t){$(e.$$.fragment,t),a=!1},d(t){D(e,t)}}}function St(t){let e,s,a,u,m,g,E,b,y,w,k=t[4]&&It(t),x=t[3]&&Nt(t);return{c(){e=n("main"),s=n("header"),a=n("input"),u=r(),m=n("section"),k&&k.c(),g=r(),x&&x.c(),E=_(),this.h()},l(t){e=l(t,"MAIN",{class:!0});var n=o(e);s=l(n,"HEADER",{class:!0});var r=o(s);a=l(r,"INPUT",{type:!0,placeholder:!0,class:!0}),r.forEach(c),u=i(n),m=l(n,"SECTION",{class:!0});var h=o(m);k&&k.l(h),h.forEach(c),n.forEach(c),g=i(t),x&&x.l(t),E=_(),this.h()},h(){h(a,"type","text"),h(a,"placeholder","Search everything"),h(a,"class","svelte-avufu3"),h(s,"class","svelte-avufu3"),h(m,"class","svelte-avufu3"),h(e,"class","svelte-avufu3")},m(n,r){f(n,e,r),d(e,s),d(s,a),A(a,t[0]),d(e,u),d(e,m),k&&k.m(m,null),f(n,g,r),x&&x.m(n,r),f(n,E,r),b=!0,y||(w=v(a,"input",t[6]),y=!0)},p(t,[e]){1&e&&a.value!==t[0]&&A(a,t[0]),t[4]?k?k.p(t,e):(k=It(t),k.c(),k.m(m,null)):k&&(k.d(1),k=null),t[3]?x?(x.p(t,e),8&e&&p(x,1)):(x=Nt(t),x.c(),p(x,1),x.m(E.parentNode,E)):x&&(V(),$(x,1,1,(()=>{x=null})),O())},i(t){b||(p(x),b=!0)},o(t){$(x),b=!1},d(t){t&&c(e),k&&k.d(),t&&c(g),x&&x.d(t),t&&c(E),y=!1,w()}}}function Dt(t,e,s){let a,n;var r,l="",o=Object.values(W),c=!1;function i(t){s(2,r=t),s(3,c=!0)}return t.$$.update=()=>{1&t.$$.dirty&&s(1,n=Y(o,l).filter((t=>t.score>0)).sort(((t,e)=>e.score-t.score)).slice(0,15)),3&t.$$.dirty&&s(4,a=0!==n.length&&""!==l)},[l,n,r,c,a,i,function(){l=this.value,s(0,l)},t=>i(t),function(t){s(3,c=t)}]}class Vt extends t{constructor(t){super(),e(this,t,Dt,St,s,{})}}function Ot(t,e,s){const a=t.slice();return a[3]=e[s],a}function Ct(t){let e,s,a,u,m,p,$,g,E,b,k,I,T,N,S=t[3].name+"",D=t[3].id.toUpperCase()+"";function V(){return t[2](t[3])}return{c(){e=n("div"),s=n("div"),a=n("h1"),u=y(S),m=r(),p=n("h2"),$=y(D),g=r(),E=n("div"),b=n("button"),k=y("View"),I=r(),this.h()},l(t){e=l(t,"DIV",{class:!0});var n=o(e);s=l(n,"DIV",{class:!0});var r=o(s);a=l(r,"H1",{class:!0});var h=o(a);u=w(h,S),h.forEach(c),m=i(r),p=l(r,"H2",{class:!0});var f=o(p);$=w(f,D),f.forEach(c),r.forEach(c),g=i(n),E=l(n,"DIV",{class:!0});var d=o(E);b=l(d,"BUTTON",{class:!0});var v=o(b);k=w(v,"View"),v.forEach(c),d.forEach(c),I=i(n),n.forEach(c),this.h()},h(){h(a,"class","svelte-akhsmx"),h(p,"class","svelte-akhsmx"),h(s,"class","text"),h(b,"class","svelte-akhsmx"),h(E,"class","buttons"),h(e,"class","book svelte-akhsmx")},m(t,n){f(t,e,n),d(e,s),d(s,a),d(a,u),d(s,m),d(s,p),d(p,$),d(e,g),d(e,E),d(E,b),d(b,k),d(e,I),T||(N=v(b,"click",V),T=!0)},p(e,s){t=e,1&s&&S!==(S=t[3].name+"")&&x(u,S),1&s&&D!==(D=t[3].id.toUpperCase()+"")&&x($,D)},d(t){t&&c(e),T=!1,N()}}}function _t(t){let e,s=t[0],a=[];for(let n=0;n<s.length;n+=1)a[n]=Ct(Ot(t,s,n));return{c(){e=n("section");for(let t=0;t<a.length;t+=1)a[t].c();this.h()},l(t){e=l(t,"SECTION",{class:!0});var s=o(e);for(let e=0;e<a.length;e+=1)a[e].l(s);s.forEach(c),this.h()},h(){h(e,"class","svelte-akhsmx")},m(t,s){f(t,e,s);for(let n=0;n<a.length;n+=1)a[n].m(e,null)},p(t,[n]){if(3&n){let r;for(s=t[0],r=0;r<s.length;r+=1){const l=Ot(t,s,r);a[r]?a[r].p(l,n):(a[r]=Ct(l),a[r].c(),a[r].m(e,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=s.length}},i:k,o:k,d(t){t&&c(e),C(a,t)}}}function Pt(t,e,s){let a;function n({id:t}){b(`/book/${t}`)}return s(0,a=Object.values(z)),[a,n,t=>n(t)]}class At extends t{constructor(t){super(),e(this,t,Pt,_t,s,{})}}function Ut(t,e,s){const a=t.slice();return a[10]=e[s],a}function Ht(t,e,s){const a=t.slice();return a[13]=e[s],a}function jt(t,e,s){const a=t.slice();return a[10]=e[s],a}function Bt(t){let e,s,a,r=t[10].name+"";return{c(){e=n("option"),s=y(r),this.h()},l(t){e=l(t,"OPTION",{value:!0});var a=o(e);s=w(a,r),a.forEach(c),this.h()},h(){e.__value=a=t[10].name,e.value=e.__value},m(t,a){f(t,e,a),d(e,s)},p(t,n){1&n&&r!==(r=t[10].name+"")&&x(s,r),1&n&&a!==(a=t[10].name)&&(e.__value=a,e.value=e.__value)},d(t){t&&c(e)}}}function Lt(t){let e,s=t[0].contents,a=[];for(let n=0;n<s.length;n+=1)a[n]=qt(Ut(t,s,n));return{c(){e=n("div");for(let t=0;t<a.length;t+=1)a[t].c();this.h()},l(t){e=l(t,"DIV",{class:!0});var s=o(e);for(let e=0;e<a.length;e+=1)a[e].l(s);s.forEach(c),this.h()},h(){h(e,"class","expanded svelte-b0d0ek")},m(t,s){f(t,e,s);for(let n=0;n<a.length;n+=1)a[n].m(e,null)},p(t,n){if(17&n){let r;for(s=t[0].contents,r=0;r<s.length;r+=1){const l=Ut(t,s,r);a[r]?a[r].p(l,n):(a[r]=qt(l),a[r].c(),a[r].m(e,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=s.length}},d(t){t&&c(e),C(a,t)}}}function Gt(t){let e,s=t[10].headers,a=[];for(let n=0;n<s.length;n+=1)a[n]=Mt(Ht(t,s,n));return{c(){e=n("ul");for(let t=0;t<a.length;t+=1)a[t].c();this.h()},l(t){e=l(t,"UL",{class:!0});var s=o(e);for(let e=0;e<a.length;e+=1)a[e].l(s);s.forEach(c),this.h()},h(){h(e,"class","svelte-b0d0ek")},m(t,s){f(t,e,s);for(let n=0;n<a.length;n+=1)a[n].m(e,null)},p(t,n){if(17&n){let r;for(s=t[10].headers,r=0;r<s.length;r+=1){const l=Ht(t,s,r);a[r]?a[r].p(l,n):(a[r]=Mt(l),a[r].c(),a[r].m(e,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=s.length}},d(t){t&&c(e),C(a,t)}}}function Mt(t){let e,s,a,u,m,p,$=("object"==typeof t[13]?t[13].header:t[13])+"";function g(){return t[8](t[10],t[13])}return{c(){e=n("li"),s=n("a"),a=y($),u=r(),this.h()},l(t){e=l(t,"LI",{});var n=o(e);s=l(n,"A",{href:!0,class:!0});var r=o(s);a=w(r,$),r.forEach(c),u=i(n),n.forEach(c),this.h()},h(){h(s,"href","javascript:void(0)"),h(s,"class","svelte-b0d0ek")},m(t,n){f(t,e,n),d(e,s),d(s,a),d(e,u),m||(p=v(s,"click",g),m=!0)},p(e,s){t=e,1&s&&$!==($=("object"==typeof t[13]?t[13].header:t[13])+"")&&x(a,$)},d(t){t&&c(e),m=!1,p()}}}function qt(t){let e,s,a,u,m,p,$,g,E=t[10].name+"";function b(){return t[7](t[10])}let k=t[10].headers&&Gt(t);return{c(){e=n("section"),s=n("h4"),a=n("a"),u=y(E),m=r(),k&&k.c(),p=r(),this.h()},l(t){e=l(t,"SECTION",{class:!0});var n=o(e);s=l(n,"H4",{class:!0});var r=o(s);a=l(r,"A",{href:!0,class:!0});var h=o(a);u=w(h,E),h.forEach(c),r.forEach(c),m=i(n),k&&k.l(n),p=i(n),n.forEach(c),this.h()},h(){h(a,"href","javascript:void(0)"),h(a,"class","svelte-b0d0ek"),h(s,"class","svelte-b0d0ek"),h(e,"class","svelte-b0d0ek")},m(t,n){f(t,e,n),d(e,s),d(s,a),d(a,u),d(e,m),k&&k.m(e,null),d(e,p),$||(g=v(a,"click",b),$=!0)},p(s,a){t=s,1&a&&E!==(E=t[10].name+"")&&x(u,E),t[10].headers?k?k.p(t,a):(k=Gt(t),k.c(),k.m(e,p)):k&&(k.d(1),k=null)},d(t){t&&c(e),k&&k.d(),$=!1,g()}}}function Kt(t){let e,s;return e=new at({props:{entries:[t[3]]}}),{c(){T(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,a){S(e,t,a),s=!0},p(t,s){const a={};8&s&&(a.entries=[t[3]]),e.$set(a)},i(t){s||(p(e.$$.fragment,t),s=!0)},o(t){$(e.$$.fragment,t),s=!1},d(t){D(e,t)}}}function Rt(t){let e,s,a,u,m,g,E,b,y,w,k,x,I,T=t[0].contents,N=[];for(let n=0;n<T.length;n+=1)N[n]=Bt(jt(t,T,n));let S=t[2]&&Lt(t),D=t[3]&&Kt(t);return{c(){e=n("div"),s=n("header"),a=n("div"),u=n("select");for(let t=0;t<N.length;t+=1)N[t].c();m=r(),g=n("button"),E=n("span"),b=r(),S&&S.c(),y=r(),w=n("section"),D&&D.c(),this.h()},l(t){e=l(t,"DIV",{class:!0});var n=o(e);s=l(n,"HEADER",{class:!0});var r=o(s);a=l(r,"DIV",{class:!0});var h=o(a);u=l(h,"SELECT",{class:!0});var f=o(u);for(let e=0;e<N.length;e+=1)N[e].l(f);f.forEach(c),m=i(h),g=l(h,"BUTTON",{class:!0});var d=o(g);E=l(d,"SPAN",{class:!0}),o(E).forEach(c),d.forEach(c),h.forEach(c),b=i(r),S&&S.l(r),r.forEach(c),y=i(n),w=l(n,"SECTION",{class:!0});var v=o(w);D&&D.l(v),v.forEach(c),n.forEach(c),this.h()},h(){h(u,"class","svelte-b0d0ek"),void 0===t[1]&&j((()=>t[5].call(u))),h(E,"class","mdi mdi-view-dashboard-variant-outline"),h(g,"class","svelte-b0d0ek"),h(a,"class","top svelte-b0d0ek"),h(s,"class","svelte-b0d0ek"),h(w,"class","svelte-b0d0ek"),h(e,"class","book")},m(n,r){f(n,e,r),d(e,s),d(s,a),d(a,u);for(let t=0;t<N.length;t+=1)N[t].m(u,null);B(u,t[1]),d(a,m),d(a,g),d(g,E),d(s,b),S&&S.m(s,null),d(e,y),d(e,w),D&&D.m(w,null),k=!0,x||(I=[v(u,"change",t[5]),v(g,"click",t[6])],x=!0)},p(t,[e]){if(1&e){let s;for(T=t[0].contents,s=0;s<T.length;s+=1){const a=jt(t,T,s);N[s]?N[s].p(a,e):(N[s]=Bt(a),N[s].c(),N[s].m(u,null))}for(;s<N.length;s+=1)N[s].d(1);N.length=T.length}3&e&&B(u,t[1]),t[2]?S?S.p(t,e):(S=Lt(t),S.c(),S.m(s,null)):S&&(S.d(1),S=null),t[3]?D?(D.p(t,e),8&e&&p(D,1)):(D=Kt(t),D.c(),p(D,1),D.m(w,null)):D&&(V(),$(D,1,1,(()=>{D=null})),O())},i(t){k||(p(D),k=!0)},o(t){$(D),k=!1},d(t){t&&c(e),C(N,t),S&&S.d(),D&&D.d(),x=!1,L(I)}}}function Yt(t,e,s){var a,n,{data:r}=e,l=!1;function o(t){let e=r.entries.find((e=>e.name.includes(t)));e&&(s(3,a=e),s(1,n=t))}function c(t,e){o(t),s(2,l=!1),e&&queueMicrotask((()=>{let t=F(e," ","-").toLowerCase(),s=document.getElementById(t);s&&s.scrollIntoView()}))}a=r.entries[0];return t.$$set=t=>{"data"in t&&s(0,r=t.data)},t.$$.update=()=>{2&t.$$.dirty&&o(n)},[r,n,l,a,c,function(){n=G(this),s(1,n),s(0,r)},()=>s(2,l=!l),t=>c(t.name),(t,e)=>c(t.name,"object"==typeof e?e.header:e)]}class Jt extends t{constructor(t){super(),e(this,t,Yt,Rt,s,{data:0})}}function Wt(t){let e,s;return{c(){e=n("h1"),s=y("No book with that id")},l(t){e=l(t,"H1",{});var a=o(e);s=w(a,"No book with that id"),a.forEach(c)},m(t,a){f(t,e,a),d(e,s)},p:k,i:k,o:k,d(t){t&&c(e)}}}function zt(t){let e,s;return e=new Jt({props:{data:t[0]}}),{c(){T(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,a){S(e,t,a),s=!0},p(t,s){const a={};1&s&&(a.data=t[0]),e.$set(a)},i(t){s||(p(e.$$.fragment,t),s=!0)},o(t){$(e.$$.fragment,t),s=!1},d(t){D(e,t)}}}function Ft(t){let e,s,a,r,i;const u=[zt,Wt],v=[];function m(t,e){return t[0]?0:1}return a=m(t),r=v[a]=u[a](t),{c(){e=n("section"),s=n("div"),r.c(),this.h()},l(t){e=l(t,"SECTION",{class:!0});var a=o(e);s=l(a,"DIV",{class:!0});var n=o(s);r.l(n),n.forEach(c),a.forEach(c),this.h()},h(){h(s,"class","lane svelte-64dgc2"),h(e,"class","svelte-64dgc2")},m(t,n){f(t,e,n),d(e,s),v[a].m(s,null),i=!0},p(t,[e]){let n=a;a=m(t),a===n?v[a].p(t,e):(V(),$(v[n],1,1,(()=>{v[n]=null})),O(),r=v[a],r?r.p(t,e):(r=v[a]=u[a](t),r.c()),p(r,1),r.m(s,null))},i(t){i||(p(r),i=!0)},o(t){$(r),i=!1},d(t){t&&c(e),v[a].d()}}}function Qt(t,e,s){let a;var{params:n}=e;return t.$$set=t=>{"params"in t&&s(1,n=t.params)},t.$$.update=()=>{2&t.$$.dirty&&s(0,a=z[n.id])},[a,n]}class Xt extends t{constructor(t){super(),e(this,t,Qt,Ft,s,{params:1})}}function Zt(t){let e,s;return e=new nt({props:{headers:t[1],items:t[0]}}),{c(){T(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,a){S(e,t,a),s=!0},p(t,[s]){const a={};1&s&&(a.items=t[0]),e.$set(a)},i(t){s||(p(e.$$.fragment,t),s=!0)},o(t){$(e.$$.fragment,t),s=!1},d(t){D(e,t)}}}function te(t,e,s){var{datasets:a}=e;const n=[{header:"Dataset",type:rt.SUBTEXT,alignment:lt.LEFT,text:t=>t.name,subtext:t=>`Version ${t.version} • ${t.hash}`},{type:rt.ICON_BUTTON,icon:()=>"delete",onClick:t=>{confirm("Are you sure you want to delete this dataset? Any campaigns or characters that are using this dataset will stop working.")&&Q(t)}}];return t.$$set=t=>{"datasets"in t&&s(0,a=t.datasets)},[a,n]}class ee extends t{constructor(t){super(),e(this,t,te,Zt,s,{datasets:0})}}function se(t,e,s){const a=t.slice();return a[12]=e[s],a}function ae(t){let e;return{c(){e=y(t[2])},l(s){e=w(s,t[2])},m(t,s){f(t,e,s)},p(t,s){4&s&&x(e,t[2])},d(t){t&&c(e)}}}function ne(t){let e,s,a,r,i,h,u,v=t[12].name+"",m=t[12].version+"";return{c(){e=n("option"),s=y(v),a=y(" (v"),r=y(m),i=y(")"),this.h()},l(t){e=l(t,"OPTION",{value:!0,disabled:!0});var n=o(e);s=w(n,v),a=w(n," (v"),r=w(n,m),i=w(n,")"),n.forEach(c),this.h()},h(){e.__value=h=t[12].hash,e.value=e.__value,e.disabled=u=t[12].version!==X},m(t,n){f(t,e,n),d(e,s),d(e,a),d(e,r),d(e,i)},p(t,a){16&a&&v!==(v=t[12].name+"")&&x(s,v),16&a&&m!==(m=t[12].version+"")&&x(r,m),16&a&&h!==(h=t[12].hash)&&(e.__value=h,e.value=e.__value),16&a&&u!==(u=t[12].version!==X)&&(e.disabled=u)},d(t){t&&c(e)}}}function re(t){let e,s,a,u,v,m,p;return{c(){e=n("div"),s=n("div"),a=n("h1"),u=y("Importing dataset..."),v=r(),m=n("p"),p=y("This can take a long time"),this.h()},l(t){e=l(t,"DIV",{class:!0});var n=o(e);s=l(n,"DIV",{class:!0});var r=o(s);a=l(r,"H1",{class:!0});var h=o(a);u=w(h,"Importing dataset..."),h.forEach(c),v=i(r),m=l(r,"P",{});var f=o(m);p=w(f,"This can take a long time"),f.forEach(c),r.forEach(c),n.forEach(c),this.h()},h(){h(a,"class","svelte-1f7ec2l"),h(s,"class","box svelte-1f7ec2l"),h(e,"class","scim svelte-1f7ec2l")},m(t,n){f(t,e,n),d(e,s),d(s,a),d(a,u),d(s,v),d(s,m),d(m,p)},d(t){t&&c(e)}}}function le(t){let e,s,a,u,v,m,p,$=t[1].message+"";return{c(){e=n("div"),s=n("div"),a=n("h1"),u=y("Error"),v=r(),m=n("p"),p=y($),this.h()},l(t){e=l(t,"DIV",{class:!0});var n=o(e);s=l(n,"DIV",{class:!0});var r=o(s);a=l(r,"H1",{class:!0});var h=o(a);u=w(h,"Error"),h.forEach(c),v=i(r),m=l(r,"P",{});var f=o(m);p=w(f,$),f.forEach(c),r.forEach(c),n.forEach(c),this.h()},h(){h(a,"class","svelte-1f7ec2l"),h(s,"class","box error svelte-1f7ec2l"),h(e,"class","scim svelte-1f7ec2l")},m(t,n){f(t,e,n),d(e,s),d(s,a),d(a,u),d(s,v),d(s,m),d(m,p)},p(t,e){2&e&&$!==($=t[1].message+"")&&x(p,$)},d(t){t&&c(e)}}}function oe(t){let e,s,a,u,m,g,E,b,k,x,I,V,O,P,A,U,H,G,M,q=t[2]&&ae(t),K=t[4],R=[];for(let n=0;n<K.length;n+=1)R[n]=ne(se(t,K,n));O=new ee({props:{datasets:t[4]}});let Y=t[0]&&re(),J=t[1]&&le(t);return{c(){e=n("div"),s=n("header"),a=n("input"),u=r(),m=n("button"),g=y("Import dataset"),E=r(),q&&q.c(),b=r(),k=n("select"),x=n("option"),I=y("Select a dataset");for(let t=0;t<R.length;t+=1)R[t].c();V=r(),T(O.$$.fragment),P=r(),Y&&Y.c(),A=r(),J&&J.c(),U=_(),this.h()},l(t){e=l(t,"DIV",{class:!0});var n=o(e);s=l(n,"HEADER",{});var r=o(s);a=l(r,"INPUT",{type:!0}),u=i(r),m=l(r,"BUTTON",{});var h=o(m);g=w(h,"Import dataset"),h.forEach(c),E=i(r),q&&q.l(r),b=i(r),k=l(r,"SELECT",{});var f=o(k);x=l(f,"OPTION",{value:!0,disabled:!0});var d=o(x);I=w(d,"Select a dataset"),d.forEach(c);for(let e=0;e<R.length;e+=1)R[e].l(f);f.forEach(c),r.forEach(c),V=i(n),N(O.$$.fragment,n),n.forEach(c),P=i(t),Y&&Y.l(t),A=i(t),J&&J.l(t),U=_(),this.h()},h(){h(a,"type","file"),x.__value="",x.value=x.__value,x.disabled=!0,void 0===t[5]&&j((()=>t[9].call(k))),h(e,"class","sourceManager svelte-1f7ec2l")},m(n,r){f(n,e,r),d(e,s),d(s,a),t[8](a),d(s,u),d(s,m),d(m,g),d(s,E),q&&q.m(s,null),d(s,b),d(s,k),d(k,x),d(x,I);for(let t=0;t<R.length;t+=1)R[t].m(k,null);B(k,t[5]),d(e,V),S(O,e,null),f(n,P,r),Y&&Y.m(n,r),f(n,A,r),J&&J.m(n,r),f(n,U,r),H=!0,G||(M=[v(m,"click",t[6]),v(k,"change",t[9])],G=!0)},p(t,[e]){if(t[2]?q?q.p(t,e):(q=ae(t),q.c(),q.m(s,b)):q&&(q.d(1),q=null),16&e){let s;for(K=t[4],s=0;s<K.length;s+=1){const a=se(t,K,s);R[s]?R[s].p(a,e):(R[s]=ne(a),R[s].c(),R[s].m(k,null))}for(;s<R.length;s+=1)R[s].d(1);R.length=K.length}48&e&&B(k,t[5]);const a={};16&e&&(a.datasets=t[4]),O.$set(a),t[0]?Y||(Y=re(),Y.c(),Y.m(A.parentNode,A)):Y&&(Y.d(1),Y=null),t[1]?J?J.p(t,e):(J=le(t),J.c(),J.m(U.parentNode,U)):J&&(J.d(1),J=null)},i(t){H||(p(O.$$.fragment,t),H=!0)},o(t){$(O.$$.fragment,t),H=!1},d(s){s&&c(e),t[8](null),q&&q.d(),C(R,s),D(O),s&&c(P),Y&&Y.d(s),s&&c(A),J&&J.d(s),s&&c(U),G=!1,L(M)}}}function ce(t,e,s){let a,n,r;g(t,Z,(t=>s(7,n=t))),g(t,tt,(t=>s(5,r=t)));var l,o=this&&this.__awaiter||function(t,e,s,a){return new(s||(s=Promise))((function(n,r){function l(t){try{c(a.next(t))}catch(e){r(e)}}function o(t){try{c(a.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(l,o)}c((a=a.apply(t,e||[])).next())}))},c=!1,i=null,h="";const u={noMapFile:()=>"No 'map.json' file was uploaded.",hashAlreadyExists:t=>`There is already a dataset '${t.name}' with the exact contents you are trying to import.'`};return n.every((t=>t.version!==X))&&(h=`There is no compatible dataset available. Upload one that is at least version ${X}.`),t.$$.update=()=>{128&t.$$.dirty&&s(4,a=n)},[c,i,h,l,a,r,function(){return o(this,void 0,void 0,(function*(){try{s(0,c=!0),yield et(l.files[0]),location.reload()}catch(t){if(console.trace(t),t instanceof st){let e=u[t.getStatus()],a=t.getStatus();e&&(a=e(t.getPayload())),s(2,h=a)}else s(1,i=t)}finally{s(0,c=!1)}}))},n,function(t){U[t?"unshift":"push"]((()=>{s(3,l=t)}))},function(){r=G(this),tt.set(r),s(4,a),s(7,n)}]}class ie extends t{constructor(t){super(),e(this,t,ce,oe,s,{})}}function he(t){let e,s;return e=new ie({}),{c(){T(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,a){S(e,t,a),s=!0},i(t){s||(p(e.$$.fragment,t),s=!0)},o(t){$(e.$$.fragment,t),s=!1},d(t){D(e,t)}}}function ue(t){let e,s,a,r;return a=new R({props:{text:"Source settings",$$slots:{default:[he]},$$scope:{ctx:t}}}),{c(){e=n("main"),s=n("section"),T(a.$$.fragment),this.h()},l(t){e=l(t,"MAIN",{class:!0});var n=o(e);s=l(n,"SECTION",{class:!0});var r=o(s);N(a.$$.fragment,r),r.forEach(c),n.forEach(c),this.h()},h(){h(s,"class","sourceSettings svelte-oumyrz"),h(e,"class","svelte-oumyrz")},m(t,n){f(t,e,n),d(e,s),S(a,s,null),r=!0},p(t,[e]){const s={};1&e&&(s.$$scope={dirty:e,ctx:t}),a.$set(s)},i(t){r||(p(a.$$.fragment,t),r=!0)},o(t){$(a.$$.fragment,t),r=!1},d(t){t&&c(e),D(a)}}}class fe extends t{constructor(t){super(),e(this,t,null,ue,s,{})}}function de(t){let e;return{c(){e=y("Dashboard")},l(t){e=w(t,"Dashboard")},m(t,s){f(t,e,s)},d(t){t&&c(e)}}}function ve(t){let e;return{c(){e=y("Characters")},l(t){e=w(t,"Characters")},m(t,s){f(t,e,s)},d(t){t&&c(e)}}}function me(t){let e;return{c(){e=y("Campaigns")},l(t){e=w(t,"Campaigns")},m(t,s){f(t,e,s)},d(t){t&&c(e)}}}function pe(t){let e;return{c(){e=y("Search content")},l(t){e=w(t,"Search content")},m(t,s){f(t,e,s)},d(t){t&&c(e)}}}function $e(t){let e;return{c(){e=y("Books")},l(t){e=w(t,"Books")},m(t,s){f(t,e,s)},d(t){t&&c(e)}}}function ge(t){let e;return{c(){e=y("Settings")},l(t){e=w(t,"Settings")},m(t,s){f(t,e,s)},d(t){t&&c(e)}}}function Ee(t){let e,s,a;return{c(){e=n("div"),this.h()},l(t){e=l(t,"DIV",{class:!0}),o(e).forEach(c),this.h()},h(){h(e,"class","scim svelte-1wookr8")},m(n,r){f(n,e,r),s||(a=v(e,"click",t[4]),s=!0)},p:k,d(t){t&&c(e),s=!1,a()}}}function be(t){let e,s,a,m,g,E,b,y,w,k,x,I,V,O,C,_,P,A,U,H,j,B,G,q,K;m=new it({props:{icon:"view-dashboard-outline",path:"/",$$slots:{default:[de]},$$scope:{ctx:t}}}),E=new it({props:{icon:"account",path:"/characters",$$slots:{default:[ve]},$$scope:{ctx:t}}}),y=new it({props:{icon:"bookmark",path:"/campaigns",$$slots:{default:[me]},$$scope:{ctx:t}}}),k=new it({props:{icon:"map-search-outline",path:"/search",$$slots:{default:[pe]},$$scope:{ctx:t}}}),I=new it({props:{icon:"book-open-outline",path:"/books",$$slots:{default:[$e]},$$scope:{ctx:t}}}),O=new it({props:{icon:"cog-outline",path:"/settings",$$slots:{default:[ge]},$$scope:{ctx:t}}});let R=t[0]&&Ee(t);return B=new M({props:{routes:t[1],prefix:ye}}),{c(){e=n("main"),s=n("nav"),a=n("div"),T(m.$$.fragment),g=r(),T(E.$$.fragment),b=r(),T(y.$$.fragment),w=r(),T(k.$$.fragment),x=r(),T(I.$$.fragment),V=r(),T(O.$$.fragment),_=r(),P=n("button"),A=n("span"),U=r(),R&&R.c(),H=r(),j=n("div"),T(B.$$.fragment),this.h()},l(t){e=l(t,"MAIN",{class:!0});var n=o(e);s=l(n,"NAV",{class:!0});var r=o(s);a=l(r,"DIV",{});var h=o(a);N(m.$$.fragment,h),g=i(h),N(E.$$.fragment,h),b=i(h),N(y.$$.fragment,h),w=i(h),N(k.$$.fragment,h),x=i(h),N(I.$$.fragment,h),V=i(h),N(O.$$.fragment,h),h.forEach(c),r.forEach(c),_=i(n),P=l(n,"BUTTON",{class:!0});var u=o(P);A=l(u,"SPAN",{class:!0}),o(A).forEach(c),u.forEach(c),U=i(n),R&&R.l(n),H=i(n),j=l(n,"DIV",{class:!0});var f=o(j);N(B.$$.fragment,f),f.forEach(c),n.forEach(c),this.h()},h(){h(s,"class",C=u(t[0]&&"open")+" svelte-1wookr8"),h(A,"class","mdi mdi-menu"),h(P,"class","svelte-1wookr8"),h(j,"class","content svelte-1wookr8"),h(e,"class","svelte-1wookr8")},m(n,r){f(n,e,r),d(e,s),d(s,a),S(m,a,null),d(a,g),S(E,a,null),d(a,b),S(y,a,null),d(a,w),S(k,a,null),d(a,x),S(I,a,null),d(a,V),S(O,a,null),d(e,_),d(e,P),d(P,A),d(e,U),R&&R.m(e,null),d(e,H),d(e,j),S(B,j,null),G=!0,q||(K=[v(a,"click",t[2]),v(P,"click",t[3])],q=!0)},p(t,[a]){const n={};32&a&&(n.$$scope={dirty:a,ctx:t}),m.$set(n);const r={};32&a&&(r.$$scope={dirty:a,ctx:t}),E.$set(r);const l={};32&a&&(l.$$scope={dirty:a,ctx:t}),y.$set(l);const o={};32&a&&(o.$$scope={dirty:a,ctx:t}),k.$set(o);const c={};32&a&&(c.$$scope={dirty:a,ctx:t}),I.$set(c);const i={};32&a&&(i.$$scope={dirty:a,ctx:t}),O.$set(i),(!G||1&a&&C!==(C=u(t[0]&&"open")+" svelte-1wookr8"))&&h(s,"class",C),t[0]?R?R.p(t,a):(R=Ee(t),R.c(),R.m(e,H)):R&&(R.d(1),R=null)},i(t){G||(p(m.$$.fragment,t),p(E.$$.fragment,t),p(y.$$.fragment,t),p(k.$$.fragment,t),p(I.$$.fragment,t),p(O.$$.fragment,t),p(B.$$.fragment,t),G=!0)},o(t){$(m.$$.fragment,t),$(E.$$.fragment,t),$(y.$$.fragment,t),$(k.$$.fragment,t),$(I.$$.fragment,t),$(O.$$.fragment,t),$(B.$$.fragment,t),G=!1},d(t){t&&c(e),D(m),D(E),D(y),D(k),D(I),D(O),R&&R.d(),D(B),q=!1,L(K)}}}const ye="";function we(t,e,s){var a=!1;return[a,{"/characters":kt,"/search":Vt,"/books":At,"/book/:id":Xt,"/settings":fe,"/":mt},()=>s(0,a=!1),()=>s(0,a=!0),()=>s(0,a=!1)]}export default class extends t{constructor(t){super(),e(this,t,we,be,s,{})}}
